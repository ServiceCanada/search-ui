/**
 * @license
 *
 * Copyright 2024 Coveo Solutions Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *       http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var UA=Object.create;var sc=Object.defineProperty;var _A=Object.getOwnPropertyDescriptor;var $A=Object.getOwnPropertyNames;var HA=Object.getPrototypeOf,GA=Object.prototype.hasOwnProperty;var Ym=e=>sc(e,"__esModule",{value:!0});var zA=(e=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(e,{get:(t,r)=>(typeof require!="undefined"?require:t)[r]}):e)(function(e){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var pe=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Km=(e,t)=>{Ym(e);for(var r in t)sc(e,r,{get:t[r],enumerable:!0})},R=(e,t,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of $A(t))!GA.call(e,a)&&a!=="default"&&sc(e,a,{get:()=>t[a],enumerable:!(r=_A(t,a))||r.enumerable});return e},Ie=e=>R(Ym(sc(e!=null?UA(HA(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);var lp=pe((pV,Qr)=>{function up(e){return Qr.exports=up=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qr.exports.__esModule=!0,Qr.exports.default=Qr.exports,up(e)}Qr.exports=up,Qr.exports.__esModule=!0,Qr.exports.default=Qr.exports});var pg=pe((fV,Wi)=>{var dg=lp().default;function ab(e,t){if(dg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(dg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}Wi.exports=ab,Wi.exports.__esModule=!0,Wi.exports.default=Wi.exports});var fg=pe((mV,Yi)=>{var nb=lp().default,ob=pg();function ib(e){var t=ob(e,"string");return nb(t)=="symbol"?t:String(t)}Yi.exports=ib,Yi.exports.__esModule=!0,Yi.exports.default=Yi.exports});var mg=pe((gV,Ki)=>{var sb=fg();function cb(e,t,r){return t=sb(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Ki.exports=cb,Ki.exports.__esModule=!0,Ki.exports.default=Ki.exports});var hg=pe((hV,Ji)=>{var ub=mg();function gg(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function lb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gg(Object(r),!0).forEach(function(a){ub(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gg(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}Ji.exports=lb,Ji.exports.__esModule=!0,Ji.exports.default=Ji.exports});var Zi=pe(Br=>{"use strict";Object.defineProperty(Br,"__esModule",{value:!0});var db=hg();function pb(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var Sg=pb(db);function je(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var yg=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),dp=function(){return Math.random().toString(36).substring(7).split("").join(".")},Xi={INIT:"@@redux/INIT"+dp(),REPLACE:"@@redux/REPLACE"+dp(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+dp()}};function fb(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function pp(e,t,r){var a;if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(je(0));if(typeof t=="function"&&typeof r=="undefined"&&(r=t,t=void 0),typeof r!="undefined"){if(typeof r!="function")throw new Error(je(1));return r(pp)(e,t)}if(typeof e!="function")throw new Error(je(2));var n=e,o=t,i=[],s=i,c=!1;function u(){s===i&&(s=i.slice())}function l(){if(c)throw new Error(je(3));return o}function d(g){if(typeof g!="function")throw new Error(je(4));if(c)throw new Error(je(5));var S=!0;return u(),s.push(g),function(){if(!!S){if(c)throw new Error(je(6));S=!1,u();var x=s.indexOf(g);s.splice(x,1),i=null}}}function p(g){if(!fb(g))throw new Error(je(7));if(typeof g.type=="undefined")throw new Error(je(8));if(c)throw new Error(je(9));try{c=!0,o=n(o,g)}finally{c=!1}for(var S=i=s,y=0;y<S.length;y++){var x=S[y];x()}return g}function f(g){if(typeof g!="function")throw new Error(je(10));n=g,p({type:Xi.REPLACE})}function m(){var g,S=d;return g={subscribe:function(x){if(typeof x!="object"||x===null)throw new Error(je(11));function b(){x.next&&x.next(l())}b();var P=S(b);return{unsubscribe:P}}},g[yg]=function(){return this},g}return p({type:Xi.INIT}),a={dispatch:p,subscribe:d,getState:l,replaceReducer:f},a[yg]=m,a}var mb=pp;function gb(e){Object.keys(e).forEach(function(t){var r=e[t],a=r(void 0,{type:Xi.INIT});if(typeof a=="undefined")throw new Error(je(12));if(typeof r(void 0,{type:Xi.PROBE_UNKNOWN_ACTION()})=="undefined")throw new Error(je(13))})}function hb(e){for(var t=Object.keys(e),r={},a=0;a<t.length;a++){var n=t[a];typeof e[n]=="function"&&(r[n]=e[n])}var o=Object.keys(r),i,s;try{gb(r)}catch(c){s=c}return function(u,l){if(u===void 0&&(u={}),s)throw s;if(!1)var d;for(var p=!1,f={},m=0;m<o.length;m++){var g=o[m],S=r[g],y=u[g],x=S(y,l);if(typeof x=="undefined"){var b=l&&l.type;throw new Error(je(14))}f[g]=x,p=p||x!==y}return p=p||o.length!==Object.keys(u).length,p?f:u}}function Cg(e,t){return function(){return t(e.apply(this,arguments))}}function Sb(e,t){if(typeof e=="function")return Cg(e,t);if(typeof e!="object"||e===null)throw new Error(je(16));var r={};for(var a in e){var n=e[a];typeof n=="function"&&(r[a]=Cg(n,t))}return r}function xg(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length===0?function(a){return a}:t.length===1?t[0]:t.reduce(function(a,n){return function(){return a(n.apply(void 0,arguments))}})}function yb(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(a){return function(){var n=a.apply(void 0,arguments),o=function(){throw new Error(je(15))},i={getState:n.getState,dispatch:function(){return o.apply(void 0,arguments)}},s=t.map(function(c){return c(i)});return o=xg.apply(void 0,s)(n.dispatch),Sg.default(Sg.default({},n),{},{dispatch:o})}}}Br.__DO_NOT_USE__ActionTypes=Xi;Br.applyMiddleware=yb;Br.bindActionCreators=Sb;Br.combineReducers=hb;Br.compose=xg;Br.createStore=pp;Br.legacy_createStore=mb});var fh=pe((TV,ph)=>{"use strict";function hF(e){try{return JSON.stringify(e)}catch{return'"[Circular]"'}}ph.exports=SF;function SF(e,t,r){var a=r&&r.stringify||hF,n=1;if(typeof e=="object"&&e!==null){var o=t.length+n;if(o===1)return e;var i=new Array(o);i[0]=a(e);for(var s=1;s<o;s++)i[s]=a(t[s]);return i.join(" ")}if(typeof e!="string")return e;var c=t.length;if(c===0)return e;for(var u="",l=1-n,d=-1,p=e&&e.length||0,f=0;f<p;){if(e.charCodeAt(f)===37&&f+1<p){switch(d=d>-1?d:0,e.charCodeAt(f+1)){case 100:case 102:if(l>=c||t[l]==null)break;d<f&&(u+=e.slice(d,f)),u+=Number(t[l]),d=f+2,f++;break;case 105:if(l>=c||t[l]==null)break;d<f&&(u+=e.slice(d,f)),u+=Math.floor(Number(t[l])),d=f+2,f++;break;case 79:case 111:case 106:if(l>=c||t[l]===void 0)break;d<f&&(u+=e.slice(d,f));var m=typeof t[l];if(m==="string"){u+="'"+t[l]+"'",d=f+2,f++;break}if(m==="function"){u+=t[l].name||"<anonymous>",d=f+2,f++;break}u+=a(t[l]),d=f+2,f++;break;case 115:if(l>=c)break;d<f&&(u+=e.slice(d,f)),u+=String(t[l]),d=f+2,f++;break;case 37:d<f&&(u+=e.slice(d,f)),u+="%",d=f+2,f++,l--;break}++l}++f}return d===-1?e:(d<p&&(u+=e.slice(d)),u)}});var ls=pe((DV,vc)=>{"use strict";var mh=fh();vc.exports=Ur;var cs=qF().console||{},yF={mapHttpRequest:xc,mapHttpResponse:xc,wrapRequestSerializer:Op,wrapResponseSerializer:Op,wrapErrorSerializer:Op,req:xc,res:xc,err:hh,errWithCause:hh};function yc(e,t){return e==="silent"?1/0:t.levels.values[e]}var Ip=Symbol("pino.logFuncs"),Ep=Symbol("pino.hierarchy"),CF={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function gh(e,t){let r={logger:t,parent:e[Ep]};t[Ep]=r}function xF(e,t,r){let a={};t.forEach(n=>{a[n]=r[n]?r[n]:cs[n]||cs[CF[n]||"log"]||us}),e[Ip]=a}function vF(e,t){return Array.isArray(e)?e.filter(function(a){return a!=="!stdSerializers.err"}):e===!0?Object.keys(t):!1}function Ur(e){e=e||{},e.browser=e.browser||{};let t=e.browser.transmit;if(t&&typeof t.send!="function")throw Error("pino: transmit option must have a send function");let r=e.browser.write||cs;e.browser.write&&(e.browser.asObject=!0);let a=e.serializers||{},n=vF(e.browser.serialize,a),o=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(o=!1);let i=Object.keys(e.customLevels||{}),s=["error","fatal","warn","info","debug","trace"].concat(i);typeof r=="function"&&s.forEach(function(g){r[g]=r}),(e.enabled===!1||e.browser.disabled)&&(e.level="silent");let c=e.level||"info",u=Object.create(r);u.log||(u.log=us),xF(u,s,r),gh({},u),Object.defineProperty(u,"levelVal",{get:d}),Object.defineProperty(u,"level",{get:p,set:f});let l={transmit:t,serialize:n,asObject:e.browser.asObject,formatters:e.browser.formatters,levels:s,timestamp:EF(e)};u.levels=AF(e),u.level=c,u.setMaxListeners=u.getMaxListeners=u.emit=u.addListener=u.on=u.prependListener=u.once=u.prependOnceListener=u.removeListener=u.removeAllListeners=u.listeners=u.listenerCount=u.eventNames=u.write=u.flush=us,u.serializers=a,u._serialize=n,u._stdErrSerialize=o,u.child=m,t&&(u._logEvent=kp());function d(){return yc(this.level,this)}function p(){return this._level}function f(g){if(g!=="silent"&&!this.levels.values[g])throw Error("unknown level "+g);this._level=g,Wa(this,l,u,"error"),Wa(this,l,u,"fatal"),Wa(this,l,u,"warn"),Wa(this,l,u,"info"),Wa(this,l,u,"debug"),Wa(this,l,u,"trace"),i.forEach(S=>{Wa(this,l,u,S)})}function m(g,S){if(!g)throw new Error("missing bindings for child Pino");S=S||{},n&&g.serializers&&(S.serializers=g.serializers);let y=S.serializers;if(n&&y){var x=Object.assign({},a,y),b=e.browser.serialize===!0?Object.keys(x):n;delete g.serializers,Cc([g],b,x,this._stdErrSerialize)}function P(H){this._childLevel=(H._childLevel|0)+1,this.bindings=g,x&&(this.serializers=x,this._serialize=b),t&&(this._logEvent=kp([].concat(H._logEvent.bindings,g)))}P.prototype=this;let N=new P(this);return gh(this,N),N.level=this.level,N}return u}function AF(e){let t=e.customLevels||{},r=Object.assign({},Ur.levels.values,t),a=Object.assign({},Ur.levels.labels,bF(t));return{values:r,labels:a}}function bF(e){let t={};return Object.keys(e).forEach(function(r){t[e[r]]=r}),t}Ur.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};Ur.stdSerializers=yF;Ur.stdTimeFunctions=Object.assign({},{nullTime:Sh,epochTime:yh,unixTime:kF,isoTime:OF});function FF(e){let t=[];e.bindings&&t.push(e.bindings);let r=e[Ep];for(;r.parent;)r=r.parent,r.logger.bindings&&t.push(r.logger.bindings);return t.reverse()}function Wa(e,t,r,a){if(e[a]=yc(e.level,r)>yc(a,r)?us:r[Ip][a],!t.transmit&&e[a]===us)return;e[a]=PF(e,t,r,a);let n=FF(e);n.length!==0&&(e[a]=RF(n,e[a]))}function RF(e,t){return function(){return t.apply(this,[...e,...arguments])}}function PF(e,t,r,a){return function(n){return function(){let i=t.timestamp(),s=new Array(arguments.length),c=Object.getPrototypeOf&&Object.getPrototypeOf(this)===cs?cs:this;for(var u=0;u<s.length;u++)s[u]=arguments[u];if(t.serialize&&!t.asObject&&Cc(s,this._serialize,this.serializers,this._stdErrSerialize),t.asObject||t.formatters?n.call(c,wF(this,a,s,i,t.formatters)):n.apply(c,s),t.transmit){let l=t.transmit.level||e._level,d=r.levels.values[l],p=r.levels.values[a];if(p<d)return;IF(this,{ts:i,methodLevel:a,methodValue:p,transmitLevel:l,transmitValue:r.levels.values[t.transmit.level||e._level],send:t.transmit.send,val:yc(e._level,r)},s)}}}(e[Ip][a])}function wF(e,t,r,a,n={}){let{level:o=()=>e.levels.values[t],log:i=p=>p}=n;e._serialize&&Cc(r,e._serialize,e.serializers,e._stdErrSerialize);let s=r.slice(),c=s[0],u={};a&&(u.time=a),u.level=o(t,e.levels.values[t]);let l=(e._childLevel|0)+1;if(l<1&&(l=1),c!==null&&typeof c=="object"){for(;l--&&typeof s[0]=="object";)Object.assign(u,s.shift());c=s.length?mh(s.shift(),s):void 0}else typeof c=="string"&&(c=mh(s.shift(),s));return c!==void 0&&(u.msg=c),i(u)}function Cc(e,t,r,a){for(let n in e)if(a&&e[n]instanceof Error)e[n]=Ur.stdSerializers.err(e[n]);else if(typeof e[n]=="object"&&!Array.isArray(e[n]))for(let o in e[n])t&&t.indexOf(o)>-1&&o in r&&(e[n][o]=r[o](e[n][o]))}function IF(e,t,r){let a=t.send,n=t.ts,o=t.methodLevel,i=t.methodValue,s=t.val,c=e._logEvent.bindings;Cc(r,e._serialize||Object.keys(e.serializers),e.serializers,e._stdErrSerialize===void 0?!0:e._stdErrSerialize),e._logEvent.ts=n,e._logEvent.messages=r.filter(function(u){return c.indexOf(u)===-1}),e._logEvent.level.label=o,e._logEvent.level.value=i,a(o,e._logEvent,s),e._logEvent=kp(c)}function kp(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function hh(e){let t={type:e.constructor.name,msg:e.message,stack:e.stack};for(let r in e)t[r]===void 0&&(t[r]=e[r]);return t}function EF(e){return typeof e.timestamp=="function"?e.timestamp:e.timestamp===!1?Sh:yh}function xc(){return{}}function Op(e){return e}function us(){}function Sh(){return!1}function yh(){return Date.now()}function kF(){return Math.round(Date.now()/1e3)}function OF(){return new Date(Date.now()).toISOString()}function qF(){function e(t){return typeof t!="undefined"&&t}try{return typeof globalThis!="undefined"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return e(self)||e(window)||e(this)||{}}}vc.exports.default=Ur;vc.exports.pino=Ur});var Ah=pe((VV,vh)=>{var TF="[object Object]";function DF(e){var t=!1;if(e!=null&&typeof e.toString!="function")try{t=!!(e+"")}catch{}return t}function VF(e,t){return function(r){return e(t(r))}}var MF=Function.prototype,Ch=Object.prototype,xh=MF.toString,LF=Ch.hasOwnProperty,NF=xh.call(Object),QF=Ch.toString,BF=VF(Object.getPrototypeOf,Object);function jF(e){return!!e&&typeof e=="object"}function UF(e){if(!jF(e)||QF.call(e)!=TF||DF(e))return!1;var t=BF(e);if(t===null)return!0;var r=LF.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&xh.call(r)==NF}vh.exports=UF});var bh=pe(Tp=>{"use strict";Object.defineProperty(Tp,"__esModule",{value:!0});Tp.default=WF;var _F=Zi(),$F=Ah(),HF=GF($F);function GF(e){return e&&e.__esModule?e:{default:e}}function zF(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}else return Array.from(e)}var qp=function(t){return typeof t=="function"};function WF(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};function a(){var o=[],i=[],s={getState:function(){return qp(r)?r(o):r},getActions:function(){return o},dispatch:function(u){if(!(0,HF.default)(u))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(typeof u.type=="undefined")throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant? Action: '+JSON.stringify(u));o.push(u);for(var l=0;l<i.length;l++)i[l]();return u},clearActions:function(){o=[]},subscribe:function(u){return qp(u)&&i.push(u),function(){var l=i.indexOf(u);l<0||i.splice(l,1)}},replaceReducer:function(u){if(!qp(u))throw new Error("Expected the nextReducer to be a function.")}};return s}var n=_F.applyMiddleware.apply(void 0,zF(e))(a);return n()}}});var wc=pe((Dp,Vp)=>{(function(e,t){typeof Dp=="object"&&typeof Vp!="undefined"?Vp.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis!="undefined"?globalThis:e||self).dayjs=t()})(Dp,function(){"use strict";var e=1e3,t=6e4,r=36e5,a="millisecond",n="second",o="minute",i="hour",s="day",c="week",u="month",l="quarter",d="year",p="date",f="Invalid Date",m=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,g=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,S={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(j){var L=["th","st","nd","rd"],Q=j%100;return"["+j+(L[(Q-20)%10]||L[Q]||L[0])+"]"}},y=function(j,L,Q){var z=String(j);return!z||z.length>=L?j:""+Array(L+1-z.length).join(Q)+j},x={s:y,z:function(j){var L=-j.utcOffset(),Q=Math.abs(L),z=Math.floor(Q/60),B=Q%60;return(L<=0?"+":"-")+y(z,2,"0")+":"+y(B,2,"0")},m:function j(L,Q){if(L.date()<Q.date())return-j(Q,L);var z=12*(Q.year()-L.year())+(Q.month()-L.month()),B=L.clone().add(z,u),re=Q-B<0,ne=L.clone().add(z+(re?-1:1),u);return+(-(z+(Q-B)/(re?B-ne:ne-B))||0)},a:function(j){return j<0?Math.ceil(j)||0:Math.floor(j)},p:function(j){return{M:u,y:d,w:c,d:s,D:p,h:i,m:o,s:n,ms:a,Q:l}[j]||String(j||"").toLowerCase().replace(/s$/,"")},u:function(j){return j===void 0}},b="en",P={};P[b]=S;var N="$isDayjsObject",H=function(j){return j instanceof fe||!(!j||!j[N])},Z=function j(L,Q,z){var B;if(!L)return b;if(typeof L=="string"){var re=L.toLowerCase();P[re]&&(B=re),Q&&(P[re]=Q,B=re);var ne=L.split("-");if(!B&&ne.length>1)return j(ne[0])}else{var le=L.name;P[le]=L,B=le}return!z&&B&&(b=B),B||!z&&b},U=function(j,L){if(H(j))return j.clone();var Q=typeof L=="object"?L:{};return Q.date=j,Q.args=arguments,new fe(Q)},_=x;_.l=Z,_.i=H,_.w=function(j,L){return U(j,{locale:L.$L,utc:L.$u,x:L.$x,$offset:L.$offset})};var fe=function(){function j(Q){this.$L=Z(Q.locale,null,!0),this.parse(Q),this.$x=this.$x||Q.x||{},this[N]=!0}var L=j.prototype;return L.parse=function(Q){this.$d=function(z){var B=z.date,re=z.utc;if(B===null)return new Date(NaN);if(_.u(B))return new Date;if(B instanceof Date)return new Date(B);if(typeof B=="string"&&!/Z$/i.test(B)){var ne=B.match(m);if(ne){var le=ne[2]-1||0,be=(ne[7]||"0").substring(0,3);return re?new Date(Date.UTC(ne[1],le,ne[3]||1,ne[4]||0,ne[5]||0,ne[6]||0,be)):new Date(ne[1],le,ne[3]||1,ne[4]||0,ne[5]||0,ne[6]||0,be)}}return new Date(B)}(Q),this.init()},L.init=function(){var Q=this.$d;this.$y=Q.getFullYear(),this.$M=Q.getMonth(),this.$D=Q.getDate(),this.$W=Q.getDay(),this.$H=Q.getHours(),this.$m=Q.getMinutes(),this.$s=Q.getSeconds(),this.$ms=Q.getMilliseconds()},L.$utils=function(){return _},L.isValid=function(){return this.$d.toString()!==f},L.isSame=function(Q,z){var B=U(Q);return this.startOf(z)<=B&&B<=this.endOf(z)},L.isAfter=function(Q,z){return U(Q)<this.startOf(z)},L.isBefore=function(Q,z){return this.endOf(z)<U(Q)},L.$g=function(Q,z,B){return _.u(Q)?this[z]:this.set(B,Q)},L.unix=function(){return Math.floor(this.valueOf()/1e3)},L.valueOf=function(){return this.$d.getTime()},L.startOf=function(Q,z){var B=this,re=!!_.u(z)||z,ne=_.p(Q),le=function(qt,Me){var pt=_.w(B.$u?Date.UTC(B.$y,Me,qt):new Date(B.$y,Me,qt),B);return re?pt:pt.endOf(s)},be=function(qt,Me){return _.w(B.toDate()[qt].apply(B.toDate("s"),(re?[0,0,0,0]:[23,59,59,999]).slice(Me)),B)},we=this.$W,Ve=this.$M,rt=this.$D,ra="set"+(this.$u?"UTC":"");switch(ne){case d:return re?le(1,0):le(31,11);case u:return re?le(1,Ve):le(0,Ve+1);case c:var $t=this.$locale().weekStart||0,Lr=(we<$t?we+7:we)-$t;return le(re?rt-Lr:rt+(6-Lr),Ve);case s:case p:return be(ra+"Hours",0);case i:return be(ra+"Minutes",1);case o:return be(ra+"Seconds",2);case n:return be(ra+"Milliseconds",3);default:return this.clone()}},L.endOf=function(Q){return this.startOf(Q,!1)},L.$set=function(Q,z){var B,re=_.p(Q),ne="set"+(this.$u?"UTC":""),le=(B={},B[s]=ne+"Date",B[p]=ne+"Date",B[u]=ne+"Month",B[d]=ne+"FullYear",B[i]=ne+"Hours",B[o]=ne+"Minutes",B[n]=ne+"Seconds",B[a]=ne+"Milliseconds",B)[re],be=re===s?this.$D+(z-this.$W):z;if(re===u||re===d){var we=this.clone().set(p,1);we.$d[le](be),we.init(),this.$d=we.set(p,Math.min(this.$D,we.daysInMonth())).$d}else le&&this.$d[le](be);return this.init(),this},L.set=function(Q,z){return this.clone().$set(Q,z)},L.get=function(Q){return this[_.p(Q)]()},L.add=function(Q,z){var B,re=this;Q=Number(Q);var ne=_.p(z),le=function(Ve){var rt=U(re);return _.w(rt.date(rt.date()+Math.round(Ve*Q)),re)};if(ne===u)return this.set(u,this.$M+Q);if(ne===d)return this.set(d,this.$y+Q);if(ne===s)return le(1);if(ne===c)return le(7);var be=(B={},B[o]=t,B[i]=r,B[n]=e,B)[ne]||1,we=this.$d.getTime()+Q*be;return _.w(we,this)},L.subtract=function(Q,z){return this.add(-1*Q,z)},L.format=function(Q){var z=this,B=this.$locale();if(!this.isValid())return B.invalidDate||f;var re=Q||"YYYY-MM-DDTHH:mm:ssZ",ne=_.z(this),le=this.$H,be=this.$m,we=this.$M,Ve=B.weekdays,rt=B.months,ra=B.meridiem,$t=function(Me,pt,Nr,aa){return Me&&(Me[pt]||Me(z,re))||Nr[pt].slice(0,aa)},Lr=function(Me){return _.s(le%12||12,Me,"0")},qt=ra||function(Me,pt,Nr){var aa=Me<12?"AM":"PM";return Nr?aa.toLowerCase():aa};return re.replace(g,function(Me,pt){return pt||function(Nr){switch(Nr){case"YY":return String(z.$y).slice(-2);case"YYYY":return _.s(z.$y,4,"0");case"M":return we+1;case"MM":return _.s(we+1,2,"0");case"MMM":return $t(B.monthsShort,we,rt,3);case"MMMM":return $t(rt,we);case"D":return z.$D;case"DD":return _.s(z.$D,2,"0");case"d":return String(z.$W);case"dd":return $t(B.weekdaysMin,z.$W,Ve,2);case"ddd":return $t(B.weekdaysShort,z.$W,Ve,3);case"dddd":return Ve[z.$W];case"H":return String(le);case"HH":return _.s(le,2,"0");case"h":return Lr(1);case"hh":return Lr(2);case"a":return qt(le,be,!0);case"A":return qt(le,be,!1);case"m":return String(be);case"mm":return _.s(be,2,"0");case"s":return String(z.$s);case"ss":return _.s(z.$s,2,"0");case"SSS":return _.s(z.$ms,3,"0");case"Z":return ne}return null}(Me)||ne.replace(":","")})},L.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},L.diff=function(Q,z,B){var re,ne=this,le=_.p(z),be=U(Q),we=(be.utcOffset()-this.utcOffset())*t,Ve=this-be,rt=function(){return _.m(ne,be)};switch(le){case d:re=rt()/12;break;case u:re=rt();break;case l:re=rt()/3;break;case c:re=(Ve-we)/6048e5;break;case s:re=(Ve-we)/864e5;break;case i:re=Ve/r;break;case o:re=Ve/t;break;case n:re=Ve/e;break;default:re=Ve}return B?re:_.a(re)},L.daysInMonth=function(){return this.endOf(u).$D},L.$locale=function(){return P[this.$L]},L.locale=function(Q,z){if(!Q)return this.$L;var B=this.clone(),re=Z(Q,z,!0);return re&&(B.$L=re),B},L.clone=function(){return _.w(this.$d,this)},L.toDate=function(){return new Date(this.valueOf())},L.toJSON=function(){return this.isValid()?this.toISOString():null},L.toISOString=function(){return this.$d.toISOString()},L.toString=function(){return this.$d.toUTCString()},j}(),Se=fe.prototype;return U.prototype=Se,[["$ms",a],["$s",n],["$m",o],["$H",i],["$W",s],["$M",u],["$y",d],["$D",p]].forEach(function(j){Se[j[1]]=function(L){return this.$g(L,j[0],j[1])}}),U.extend=function(j,L){return j.$i||(j(L,fe,U),j.$i=!0),U},U.locale=Z,U.isDayjs=H,U.unix=function(j){return U(1e3*j)},U.en=P[b],U.Ls=P,U.p={},U})});var kh=pe((Mp,Lp)=>{(function(e,t){typeof Mp=="object"&&typeof Lp!="undefined"?Lp.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis!="undefined"?globalThis:e||self).dayjs_plugin_timezone=t()})(Mp,function(){"use strict";var e={year:0,month:1,day:2,hour:3,minute:4,second:5},t={};return function(r,a,n){var o,i=function(l,d,p){p===void 0&&(p={});var f=new Date(l),m=function(g,S){S===void 0&&(S={});var y=S.timeZoneName||"short",x=g+"|"+y,b=t[x];return b||(b=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:g,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:y}),t[x]=b),b}(d,p);return m.formatToParts(f)},s=function(l,d){for(var p=i(l,d),f=[],m=0;m<p.length;m+=1){var g=p[m],S=g.type,y=g.value,x=e[S];x>=0&&(f[x]=parseInt(y,10))}var b=f[3],P=b===24?0:b,N=f[0]+"-"+f[1]+"-"+f[2]+" "+P+":"+f[4]+":"+f[5]+":000",H=+l;return(n.utc(N).valueOf()-(H-=H%1e3))/6e4},c=a.prototype;c.tz=function(l,d){l===void 0&&(l=o);var p=this.utcOffset(),f=this.toDate(),m=f.toLocaleString("en-US",{timeZone:l}),g=Math.round((f-new Date(m))/1e3/60),S=n(m,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(15*-Math.round(f.getTimezoneOffset()/15)-g,!0);if(d){var y=S.utcOffset();S=S.add(p-y,"minute")}return S.$x.$timezone=l,S},c.offsetName=function(l){var d=this.$x.$timezone||n.tz.guess(),p=i(this.valueOf(),d,{timeZoneName:l}).find(function(f){return f.type.toLowerCase()==="timezonename"});return p&&p.value};var u=c.startOf;c.startOf=function(l,d){if(!this.$x||!this.$x.$timezone)return u.call(this,l,d);var p=n(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return u.call(p,l,d).tz(this.$x.$timezone,!0)},n.tz=function(l,d,p){var f=p&&d,m=p||d||o,g=s(+n(),m);if(typeof l!="string")return n(l).tz(m);var S=function(P,N,H){var Z=P-60*N*1e3,U=s(Z,H);if(N===U)return[Z,N];var _=s(Z-=60*(U-N)*1e3,H);return U===_?[Z,U]:[P-60*Math.min(U,_)*1e3,Math.max(U,_)]}(n.utc(l,f).valueOf(),g,m),y=S[0],x=S[1],b=n(y).utcOffset(x);return b.$x.$timezone=m,b},n.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},n.tz.setDefault=function(l){o=l}}})});var Oh=pe((Np,Qp)=>{(function(e,t){typeof Np=="object"&&typeof Qp!="undefined"?Qp.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis!="undefined"?globalThis:e||self).dayjs_plugin_utc=t()})(Np,function(){"use strict";var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,r=/([+-]|\d\d)/g;return function(a,n,o){var i=n.prototype;o.utc=function(f){var m={date:f,utc:!0,args:arguments};return new n(m)},i.utc=function(f){var m=o(this.toDate(),{locale:this.$L,utc:!0});return f?m.add(this.utcOffset(),e):m},i.local=function(){return o(this.toDate(),{locale:this.$L,utc:!1})};var s=i.parse;i.parse=function(f){f.utc&&(this.$u=!0),this.$utils().u(f.$offset)||(this.$offset=f.$offset),s.call(this,f)};var c=i.init;i.init=function(){if(this.$u){var f=this.$d;this.$y=f.getUTCFullYear(),this.$M=f.getUTCMonth(),this.$D=f.getUTCDate(),this.$W=f.getUTCDay(),this.$H=f.getUTCHours(),this.$m=f.getUTCMinutes(),this.$s=f.getUTCSeconds(),this.$ms=f.getUTCMilliseconds()}else c.call(this)};var u=i.utcOffset;i.utcOffset=function(f,m){var g=this.$utils().u;if(g(f))return this.$u?0:g(this.$offset)?u.call(this):this.$offset;if(typeof f=="string"&&(f=function(b){b===void 0&&(b="");var P=b.match(t);if(!P)return null;var N=(""+P[0]).match(r)||["-",0,0],H=N[0],Z=60*+N[1]+ +N[2];return Z===0?0:H==="+"?Z:-Z}(f),f===null))return this;var S=Math.abs(f)<=16?60*f:f,y=this;if(m)return y.$offset=S,y.$u=f===0,y;if(f!==0){var x=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(y=this.local().add(S+x,e)).$offset=S,y.$x.$localOffset=x}else y=this.utc();return y};var l=i.format;i.format=function(f){var m=f||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return l.call(this,m)},i.valueOf=function(){var f=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*f},i.isUTC=function(){return!!this.$u},i.toISOString=function(){return this.toDate().toISOString()},i.toString=function(){return this.toDate().toUTCString()};var d=i.toDate;i.toDate=function(f){return f==="s"&&this.$offset?o(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():d.call(this)};var p=i.diff;i.diff=function(f,m,g){if(f&&this.$u===f.$u)return p.call(this,f,m,g);var S=this.local(),y=o(f).local();return p.call(S,y,m,g)}}})});var Th=pe((WV,qh)=>{qh.exports=fetch});var Dh=pe(ds=>{"use strict";var Ic=ds&&ds.__assign||function(){return Ic=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++){t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},Ic.apply(this,arguments)};Object.defineProperty(ds,"__esModule",{value:!0});var tR={delayFirstAttempt:!1,jitter:"none",maxDelay:1/0,numOfAttempts:10,retry:function(){return!0},startingDelay:100,timeMultiple:2};function rR(e){var t=Ic(Ic({},tR),e);return t.numOfAttempts<1&&(t.numOfAttempts=1),t}ds.getSanitizedOptions=rR});var Vh=pe(Bp=>{"use strict";Object.defineProperty(Bp,"__esModule",{value:!0});function aR(e){var t=Math.random()*e;return Math.round(t)}Bp.fullJitter=aR});var Mh=pe(jp=>{"use strict";Object.defineProperty(jp,"__esModule",{value:!0});function nR(e){return e}jp.noJitter=nR});var Lh=pe(Up=>{"use strict";Object.defineProperty(Up,"__esModule",{value:!0});var oR=Vh(),iR=Mh();function sR(e){switch(e.jitter){case"full":return oR.fullJitter;case"none":default:return iR.noJitter}}Up.JitterFactory=sR});var $p=pe(_p=>{"use strict";Object.defineProperty(_p,"__esModule",{value:!0});var cR=Lh(),uR=function(){function e(t){this.options=t,this.attempt=0}return e.prototype.apply=function(){var t=this;return new Promise(function(r){return setTimeout(r,t.jitteredDelay)})},e.prototype.setAttemptNumber=function(t){this.attempt=t},Object.defineProperty(e.prototype,"jitteredDelay",{get:function(){var t=cR.JitterFactory(this.options);return t(this.delay)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"delay",{get:function(){var t=this.options.startingDelay,r=this.options.timeMultiple,a=this.numOfDelayedAttempts,n=t*Math.pow(r,a);return Math.min(n,this.options.maxDelay)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt},enumerable:!0,configurable:!0}),e}();_p.Delay=uR});var Nh=pe(_r=>{"use strict";var lR=_r&&_r.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,n){a.__proto__=n}||function(a,n){for(var o in n)n.hasOwnProperty(o)&&(a[o]=n[o])},e(t,r)};return function(t,r){e(t,r);function a(){this.constructor=t}t.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)}}(),dR=_r&&_r.__awaiter||function(e,t,r,a){function n(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function s(l){try{u(a.next(l))}catch(d){i(d)}}function c(l){try{u(a.throw(l))}catch(d){i(d)}}function u(l){l.done?o(l.value):n(l.value).then(s,c)}u((a=a.apply(e,t||[])).next())})},pR=_r&&_r.__generator||function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},a,n,o,i;return i={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function s(u){return function(l){return c([u,l])}}function c(u){if(a)throw new TypeError("Generator is already executing.");for(;r;)try{if(a=1,n&&(o=u[0]&2?n.return:u[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,u[1])).done)return o;switch(n=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,n=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(l){u=[6,l],n=0}finally{a=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(_r,"__esModule",{value:!0});var fR=$p(),mR=function(e){lR(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.apply=function(){return dR(this,void 0,void 0,function(){return pR(this,function(r){return[2,this.isFirstAttempt?!0:e.prototype.apply.call(this)]})})},Object.defineProperty(t.prototype,"isFirstAttempt",{get:function(){return this.attempt===0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt-1},enumerable:!0,configurable:!0}),t}(fR.Delay);_r.SkipFirstDelay=mR});var Qh=pe(ps=>{"use strict";var gR=ps&&ps.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,n){a.__proto__=n}||function(a,n){for(var o in n)n.hasOwnProperty(o)&&(a[o]=n[o])},e(t,r)};return function(t,r){e(t,r);function a(){this.constructor=t}t.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)}}();Object.defineProperty(ps,"__esModule",{value:!0});var hR=$p(),SR=function(e){gR(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(hR.Delay);ps.AlwaysDelay=SR});var Bh=pe(Hp=>{"use strict";Object.defineProperty(Hp,"__esModule",{value:!0});var yR=Nh(),CR=Qh();function xR(e,t){var r=vR(e);return r.setAttemptNumber(t),r}Hp.DelayFactory=xR;function vR(e){return e.delayFirstAttempt?new CR.AlwaysDelay(e):new yR.SkipFirstDelay(e)}});var jh=pe(Ka=>{"use strict";var Gp=Ka&&Ka.__awaiter||function(e,t,r,a){function n(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function s(l){try{u(a.next(l))}catch(d){i(d)}}function c(l){try{u(a.throw(l))}catch(d){i(d)}}function u(l){l.done?o(l.value):n(l.value).then(s,c)}u((a=a.apply(e,t||[])).next())})},zp=Ka&&Ka.__generator||function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},a,n,o,i;return i={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function s(u){return function(l){return c([u,l])}}function c(u){if(a)throw new TypeError("Generator is already executing.");for(;r;)try{if(a=1,n&&(o=u[0]&2?n.return:u[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,u[1])).done)return o;switch(n=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,n=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(l){u=[6,l],n=0}finally{a=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(Ka,"__esModule",{value:!0});var AR=Dh(),bR=Bh();function FR(e,t){return t===void 0&&(t={}),Gp(this,void 0,void 0,function(){var r,a;return zp(this,function(n){switch(n.label){case 0:return r=AR.getSanitizedOptions(t),a=new RR(e,r),[4,a.execute()];case 1:return[2,n.sent()]}})})}Ka.backOff=FR;var RR=function(){function e(t,r){this.request=t,this.options=r,this.attemptNumber=0}return e.prototype.execute=function(){return Gp(this,void 0,void 0,function(){var t,r;return zp(this,function(a){switch(a.label){case 0:if(this.attemptLimitReached)return[3,7];a.label=1;case 1:return a.trys.push([1,4,,6]),[4,this.applyDelay()];case 2:return a.sent(),[4,this.request()];case 3:return[2,a.sent()];case 4:return t=a.sent(),this.attemptNumber++,[4,this.options.retry(t,this.attemptNumber)];case 5:if(r=a.sent(),!r||this.attemptLimitReached)throw t;return[3,6];case 6:return[3,0];case 7:throw new Error("Something went wrong.")}})})},Object.defineProperty(e.prototype,"attemptLimitReached",{get:function(){return this.attemptNumber>=this.options.numOfAttempts},enumerable:!0,configurable:!0}),e.prototype.applyDelay=function(){return Gp(this,void 0,void 0,function(){var t;return zp(this,function(r){switch(r.label){case 0:return t=bR.DelayFactory(this.options,this.attemptNumber),[4,t.apply()];case 1:return r.sent(),[2]}})})},e}()});var _h=pe((oM,Uh)=>{"use strict";function PR(e){if(arguments.length===0)throw new TypeError("1 argument required, but only 0 present.");if(e=`${e}`,e=e.replace(/[ \t\n\f\r]/g,""),e.length%4==0&&(e=e.replace(/==?$/,"")),e.length%4==1||/[^+/0-9A-Za-z]/.test(e))return null;let t="",r=0,a=0;for(let n=0;n<e.length;n++)r<<=6,r|=IR(e[n]),a+=6,a===24&&(t+=String.fromCharCode((r&16711680)>>16),t+=String.fromCharCode((r&65280)>>8),t+=String.fromCharCode(r&255),r=a=0);return a===12?(r>>=4,t+=String.fromCharCode(r)):a===18&&(r>>=2,t+=String.fromCharCode((r&65280)>>8),t+=String.fromCharCode(r&255)),t}var wR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function IR(e){let t=wR.indexOf(e);return t<0?void 0:t}Uh.exports=PR});var Hh=pe((iM,$h)=>{"use strict";function ER(e){if(arguments.length===0)throw new TypeError("1 argument required, but only 0 present.");let t;for(e=`${e}`,t=0;t<e.length;t++)if(e.charCodeAt(t)>255)return null;let r="";for(t=0;t<e.length;t+=3){let a=[void 0,void 0,void 0,void 0];a[0]=e.charCodeAt(t)>>2,a[1]=(e.charCodeAt(t)&3)<<4,e.length>t+1&&(a[1]|=e.charCodeAt(t+1)>>4,a[2]=(e.charCodeAt(t+1)&15)<<2),e.length>t+2&&(a[2]|=e.charCodeAt(t+2)>>6,a[3]=e.charCodeAt(t+2)&63);for(let n=0;n<a.length;n++)typeof a[n]=="undefined"?r+="=":r+=OR(a[n])}return r}var kR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function OR(e){if(e>=0&&e<64)return kR[e]}$h.exports=ER});var Wp=pe((sM,Gh)=>{"use strict";var qR=_h(),TR=Hh();Gh.exports={atob:qR,btoa:TR}});var sS=pe((IL,iS)=>{"use strict";var Xp=typeof self!="undefined"?self:typeof window!="undefined"?window:void 0;if(!Xp)throw new Error("Unable to find global scope. Are you sure this is running in the browser?");if(!Xp.AbortController)throw new Error('Could not find "AbortController" in the global scope. You need to polyfill it first');iS.exports.AbortController=Xp.AbortController});var Zy=pe((Mf,Lf)=>{(function(e,t){typeof Mf=="object"&&typeof Lf!="undefined"?Lf.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis!="undefined"?globalThis:e||self).dayjs_plugin_quarterOfYear=t()})(Mf,function(){"use strict";var e="month",t="quarter";return function(r,a){var n=a.prototype;n.quarter=function(s){return this.$utils().u(s)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(s-1))};var o=n.add;n.add=function(s,c){return s=Number(s),this.$utils().p(c)===t?this.add(3*s,e):o.bind(this)(s,c)};var i=n.startOf;n.startOf=function(s,c){var u=this.$utils(),l=!!u.u(c)||c;if(u.p(s)===t){var d=this.quarter()-1;return l?this.month(3*d).startOf(e).startOf("day"):this.month(3*d+2).endOf(e).endOf("day")}return i.bind(this)(s,c)}}})});var eC=pe((Nf,Qf)=>{(function(e,t){typeof Nf=="object"&&typeof Qf!="undefined"?Qf.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis!="undefined"?globalThis:e||self).dayjs_plugin_customParseFormat=t()})(Nf,function(){"use strict";var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},t=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,r=/\d\d/,a=/\d\d?/,n=/\d*[^-_:/,()\s\d]+/,o={},i=function(f){return(f=+f)+(f>68?1900:2e3)},s=function(f){return function(m){this[f]=+m}},c=[/[+-]\d\d:?(\d\d)?|Z/,function(f){(this.zone||(this.zone={})).offset=function(m){if(!m||m==="Z")return 0;var g=m.match(/([+-]|\d\d)/g),S=60*g[1]+(+g[2]||0);return S===0?0:g[0]==="+"?-S:S}(f)}],u=function(f){var m=o[f];return m&&(m.indexOf?m:m.s.concat(m.f))},l=function(f,m){var g,S=o.meridiem;if(S){for(var y=1;y<=24;y+=1)if(f.indexOf(S(y,0,m))>-1){g=y>12;break}}else g=f===(m?"pm":"PM");return g},d={A:[n,function(f){this.afternoon=l(f,!1)}],a:[n,function(f){this.afternoon=l(f,!0)}],S:[/\d/,function(f){this.milliseconds=100*+f}],SS:[r,function(f){this.milliseconds=10*+f}],SSS:[/\d{3}/,function(f){this.milliseconds=+f}],s:[a,s("seconds")],ss:[a,s("seconds")],m:[a,s("minutes")],mm:[a,s("minutes")],H:[a,s("hours")],h:[a,s("hours")],HH:[a,s("hours")],hh:[a,s("hours")],D:[a,s("day")],DD:[r,s("day")],Do:[n,function(f){var m=o.ordinal,g=f.match(/\d+/);if(this.day=g[0],m)for(var S=1;S<=31;S+=1)m(S).replace(/\[|\]/g,"")===f&&(this.day=S)}],M:[a,s("month")],MM:[r,s("month")],MMM:[n,function(f){var m=u("months"),g=(u("monthsShort")||m.map(function(S){return S.slice(0,3)})).indexOf(f)+1;if(g<1)throw new Error;this.month=g%12||g}],MMMM:[n,function(f){var m=u("months").indexOf(f)+1;if(m<1)throw new Error;this.month=m%12||m}],Y:[/[+-]?\d+/,s("year")],YY:[r,function(f){this.year=i(f)}],YYYY:[/\d{4}/,s("year")],Z:c,ZZ:c};function p(f){var m,g;m=f,g=o&&o.formats;for(var S=(f=m.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(Z,U,_){var fe=_&&_.toUpperCase();return U||g[_]||e[_]||g[fe].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(Se,j,L){return j||L.slice(1)})})).match(t),y=S.length,x=0;x<y;x+=1){var b=S[x],P=d[b],N=P&&P[0],H=P&&P[1];S[x]=H?{regex:N,parser:H}:b.replace(/^\[|\]$/g,"")}return function(Z){for(var U={},_=0,fe=0;_<y;_+=1){var Se=S[_];if(typeof Se=="string")fe+=Se.length;else{var j=Se.regex,L=Se.parser,Q=Z.slice(fe),z=j.exec(Q)[0];L.call(U,z),Z=Z.replace(z,"")}}return function(B){var re=B.afternoon;if(re!==void 0){var ne=B.hours;re?ne<12&&(B.hours+=12):ne===12&&(B.hours=0),delete B.afternoon}}(U),U}}return function(f,m,g){g.p.customParseFormat=!0,f&&f.parseTwoDigitYear&&(i=f.parseTwoDigitYear);var S=m.prototype,y=S.parse;S.parse=function(x){var b=x.date,P=x.utc,N=x.args;this.$u=P;var H=N[1];if(typeof H=="string"){var Z=N[2]===!0,U=N[3]===!0,_=Z||U,fe=N[2];U&&(fe=N[2]),o=this.$locale(),!Z&&fe&&(o=g.Ls[fe]),this.$d=function(Q,z,B){try{if(["x","X"].indexOf(z)>-1)return new Date((z==="X"?1e3:1)*Q);var re=p(z)(Q),ne=re.year,le=re.month,be=re.day,we=re.hours,Ve=re.minutes,rt=re.seconds,ra=re.milliseconds,$t=re.zone,Lr=new Date,qt=be||(ne||le?1:Lr.getDate()),Me=ne||Lr.getFullYear(),pt=0;ne&&!le||(pt=le>0?le-1:Lr.getMonth());var Nr=we||0,aa=Ve||0,Wd=rt||0,Yd=ra||0;return $t?new Date(Date.UTC(Me,pt,qt,Nr,aa,Wd,Yd+60*$t.offset*1e3)):B?new Date(Date.UTC(Me,pt,qt,Nr,aa,Wd,Yd)):new Date(Me,pt,qt,Nr,aa,Wd,Yd)}catch{return new Date("")}}(b,H,P),this.init(),fe&&fe!==!0&&(this.$L=this.locale(fe).$L),_&&b!=this.format(H)&&(this.$d=new Date("")),o={}}else if(H instanceof Array)for(var Se=H.length,j=1;j<=Se;j+=1){N[1]=H[j-1];var L=g.apply(this,N);if(L.isValid()){this.$d=L.$d,this.$L=L.$L,this.init();break}j===Se&&(this.$d=new Date(""))}else y.call(this,x)}}})});var FC=pe((DG,bC)=>{var nE=/(^|; )Coveo-Pendragon=([^;]*)/;bC.exports=()=>nE.exec(document.cookie)?.pop()||null});var Ui=()=>global.crypto,Jm=()=>{typeof window=="undefined"&&(Ui()||(global.crypto=zA("crypto")),!Ui().getRandomValues&&Ui().webcrypto&&(global.crypto.getRandomValues=Ui().webcrypto.getRandomValues.bind(Ui().webcrypto)))};var h={};Km(h,{EnhancerArray:()=>Tg,MiddlewareArray:()=>qg,SHOULD_AUTOBATCH:()=>wp,TaskAbortError:()=>is,addListener:()=>sh,autoBatchEnhancer:()=>gF,clearAllListeners:()=>ch,configureStore:()=>Cp,createAction:()=>C,createActionCreatorInvariantMiddleware:()=>Tb,createAsyncThunk:()=>W,createDraftSafeSelector:()=>jr,createEntityAdapter:()=>Kb,createImmutableStateInvariantMiddleware:()=>Nb,createListenerMiddleware:()=>dF,createNextState:()=>ia,createReducer:()=>T,createSelector:()=>sa,createSerializableStateInvariantMiddleware:()=>Qb,createSlice:()=>$b,current:()=>$i,findNonSerializableValue:()=>fc,freeze:()=>_i,getDefaultMiddleware:()=>mc,getType:()=>Ob,isAction:()=>gp,isActionCreator:()=>Eg,isAllOf:()=>Ap,isAnyOf:()=>ns,isAsyncThunkAction:()=>Kg,isDraft:()=>He,isFluxStandardAction:()=>kg,isFulfilled:()=>Yg,isImmutableDefault:()=>Mg,isPending:()=>zg,isPlain:()=>Sp,isPlainObject:()=>pc,isRejected:()=>hc,isRejectedWithValue:()=>Wg,miniSerializeError:()=>$g,nanoid:()=>xp,original:()=>Xm,prepareAutoBatched:()=>pF,removeListener:()=>uh,unwrapResult:()=>Hg});function ft(e){for(var t=arguments.length,r=Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];if(!1)var n,o;throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function He(e){return!!e&&!!e[Ce]}function Tt(e){var t;return!!e&&(function(r){if(!r||typeof r!="object")return!1;var a=Object.getPrototypeOf(r);if(a===null)return!0;var n=Object.hasOwnProperty.call(a,"constructor")&&a.constructor;return n===Object||typeof n=="function"&&Function.toString.call(n)===eb}(e)||Array.isArray(e)||!!e[ug]||!!((t=e.constructor)===null||t===void 0?void 0:t[ug])||Kd(e)||Jd(e))}function Xm(e){return He(e)||ft(23,e),e[Ce].t}function Ga(e,t,r){r===void 0&&(r=!1),Ln(e)===0?(r?Object.keys:Qn)(e).forEach(function(a){r&&typeof a=="symbol"||t(a,e[a],e)}):e.forEach(function(a,n){return t(n,a,e)})}function Ln(e){var t=e[Ce];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:Kd(e)?2:Jd(e)?3:0}function Nn(e,t){return Ln(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function WA(e,t){return Ln(e)===2?e.get(t):e[t]}function Zm(e,t,r){var a=Ln(e);a===2?e.set(t,r):a===3?e.add(r):e[t]=r}function eg(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function Kd(e){return XA&&e instanceof Map}function Jd(e){return ZA&&e instanceof Set}function na(e){return e.o||e.t}function Xd(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=lg(e);delete t[Ce];for(var r=Qn(t),a=0;a<r.length;a++){var n=r[a],o=t[n];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[n]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[n]})}return Object.create(Object.getPrototypeOf(e),t)}function _i(e,t){return t===void 0&&(t=!1),Zd(e)||He(e)||!Tt(e)||(Ln(e)>1&&(e.set=e.add=e.clear=e.delete=YA),Object.freeze(e),t&&Ga(e,function(r,a){return _i(a,!0)},!0)),e}function YA(){ft(2)}function Zd(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Ht(e){var t=cp[e];return t||ft(18,e),t}function KA(e,t){cp[e]||(cp[e]=t)}function ep(){return Hi}function tp(e,t){t&&(Ht("Patches"),e.u=[],e.s=[],e.v=t)}function cc(e){rp(e),e.p.forEach(JA),e.p=null}function rp(e){e===Hi&&(Hi=e.l)}function tg(e){return Hi={p:[],l:Hi,h:e,m:!0,_:0}}function JA(e){var t=e[Ce];t.i===0||t.i===1?t.j():t.g=!0}function ap(e,t){t._=t.p.length;var r=t.p[0],a=e!==void 0&&e!==r;return t.h.O||Ht("ES5").S(t,e,a),a?(r[Ce].P&&(cc(t),ft(4)),Tt(e)&&(e=uc(t,e),t.l||lc(t,e)),t.u&&Ht("Patches").M(r[Ce].t,e,t.u,t.s)):e=uc(t,r,[]),cc(t),t.u&&t.v(t.u,t.s),e!==cg?e:void 0}function uc(e,t,r){if(Zd(t))return t;var a=t[Ce];if(!a)return Ga(t,function(s,c){return rg(e,a,t,s,c,r)},!0),t;if(a.A!==e)return t;if(!a.P)return lc(e,a.t,!0),a.t;if(!a.I){a.I=!0,a.A._--;var n=a.i===4||a.i===5?a.o=Xd(a.k):a.o,o=n,i=!1;a.i===3&&(o=new Set(n),n.clear(),i=!0),Ga(o,function(s,c){return rg(e,a,n,s,c,r,i)}),lc(e,n,!1),r&&e.u&&Ht("Patches").N(a,r,e.u,e.s)}return a.o}function rg(e,t,r,a,n,o,i){if(He(n)){var s=uc(e,n,o&&t&&t.i!==3&&!Nn(t.R,a)?o.concat(a):void 0);if(Zm(r,a,s),!He(s))return;e.m=!1}else i&&r.add(n);if(Tt(n)&&!Zd(n)){if(!e.h.D&&e._<1)return;uc(e,n),t&&t.A.l||lc(e,n)}}function lc(e,t,r){r===void 0&&(r=!1),!e.l&&e.h.D&&e.m&&_i(t,r)}function np(e,t){var r=e[Ce];return(r?na(r):e)[t]}function ag(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var a=Object.getOwnPropertyDescriptor(r,t);if(a)return a;r=Object.getPrototypeOf(r)}}function oa(e){e.P||(e.P=!0,e.l&&oa(e.l))}function op(e){e.o||(e.o=Xd(e.t))}function ip(e,t,r){var a=Kd(t)?Ht("MapSet").F(t,r):Jd(t)?Ht("MapSet").T(t,r):e.O?function(n,o){var i=Array.isArray(n),s={i:i?1:0,A:o?o.A:ep(),P:!1,I:!1,R:{},l:o,t:n,k:null,o:null,j:null,C:!1},c=s,u=Gi;i&&(c=[s],u=zi);var l=Proxy.revocable(c,u),d=l.revoke,p=l.proxy;return s.k=p,s.j=d,p}(t,r):Ht("ES5").J(t,r);return(r?r.A:ep()).p.push(a),a}function $i(e){return He(e)||ft(22,e),function t(r){if(!Tt(r))return r;var a,n=r[Ce],o=Ln(r);if(n){if(!n.P&&(n.i<4||!Ht("ES5").K(n)))return n.t;n.I=!0,a=ng(r,o),n.I=!1}else a=ng(r,o);return Ga(a,function(i,s){n&&WA(n.t,i)===s||Zm(a,i,t(s))}),o===3?new Set(a):a}(e)}function ng(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Xd(e)}function og(){function e(i,s){var c=o[i];return c?c.enumerable=s:o[i]=c={configurable:!0,enumerable:s,get:function(){var u=this[Ce];return Gi.get(u,i)},set:function(u){var l=this[Ce];Gi.set(l,i,u)}},c}function t(i){for(var s=i.length-1;s>=0;s--){var c=i[s][Ce];if(!c.P)switch(c.i){case 5:a(c)&&oa(c);break;case 4:r(c)&&oa(c)}}}function r(i){for(var s=i.t,c=i.k,u=Qn(c),l=u.length-1;l>=0;l--){var d=u[l];if(d!==Ce){var p=s[d];if(p===void 0&&!Nn(s,d))return!0;var f=c[d],m=f&&f[Ce];if(m?m.t!==p:!eg(f,p))return!0}}var g=!!s[Ce];return u.length!==Qn(s).length+(g?0:1)}function a(i){var s=i.k;if(s.length!==i.t.length)return!0;var c=Object.getOwnPropertyDescriptor(s,s.length-1);if(c&&!c.get)return!0;for(var u=0;u<s.length;u++)if(!s.hasOwnProperty(u))return!0;return!1}function n(i){i.g&&ft(3,JSON.stringify(na(i)))}var o={};KA("ES5",{J:function(i,s){var c=Array.isArray(i),u=function(d,p){if(d){for(var f=Array(p.length),m=0;m<p.length;m++)Object.defineProperty(f,""+m,e(m,!0));return f}var g=lg(p);delete g[Ce];for(var S=Qn(g),y=0;y<S.length;y++){var x=S[y];g[x]=e(x,d||!!g[x].enumerable)}return Object.create(Object.getPrototypeOf(p),g)}(c,i),l={i:c?5:4,A:s?s.A:ep(),P:!1,I:!1,R:{},l:s,t:i,k:u,o:null,g:!1,C:!1};return Object.defineProperty(u,Ce,{value:l,writable:!0}),u},S:function(i,s,c){c?He(s)&&s[Ce].A===i&&t(i.p):(i.u&&function u(l){if(l&&typeof l=="object"){var d=l[Ce];if(d){var p=d.t,f=d.k,m=d.R,g=d.i;if(g===4)Ga(f,function(P){P!==Ce&&(p[P]!==void 0||Nn(p,P)?m[P]||u(f[P]):(m[P]=!0,oa(d)))}),Ga(p,function(P){f[P]!==void 0||Nn(f,P)||(m[P]=!1,oa(d))});else if(g===5){if(a(d)&&(oa(d),m.length=!0),f.length<p.length)for(var S=f.length;S<p.length;S++)m[S]=!1;else for(var y=p.length;y<f.length;y++)m[y]=!0;for(var x=Math.min(f.length,p.length),b=0;b<x;b++)f.hasOwnProperty(b)||(m[b]=!0),m[b]===void 0&&u(f[b])}}}}(i.p[0]),t(i.p))},K:function(i){return i.i===4?r(i):a(i)}})}var ig,Hi,sp=typeof Symbol!="undefined"&&typeof Symbol("x")=="symbol",XA=typeof Map!="undefined",ZA=typeof Set!="undefined",sg=typeof Proxy!="undefined"&&Proxy.revocable!==void 0&&typeof Reflect!="undefined",cg=sp?Symbol.for("immer-nothing"):((ig={})["immer-nothing"]=!0,ig),ug=sp?Symbol.for("immer-draftable"):"__$immer_draftable",Ce=sp?Symbol.for("immer-state"):"__$immer_state",nV=typeof Symbol!="undefined"&&Symbol.iterator||"@@iterator";var eb=""+Object.prototype.constructor,Qn=typeof Reflect!="undefined"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,lg=Object.getOwnPropertyDescriptors||function(e){var t={};return Qn(e).forEach(function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)}),t},cp={},Gi={get:function(e,t){if(t===Ce)return e;var r=na(e);if(!Nn(r,t))return function(n,o,i){var s,c=ag(o,i);return c?"value"in c?c.value:(s=c.get)===null||s===void 0?void 0:s.call(n.k):void 0}(e,r,t);var a=r[t];return e.I||!Tt(a)?a:a===np(e.t,t)?(op(e),e.o[t]=ip(e.A.h,a,e)):a},has:function(e,t){return t in na(e)},ownKeys:function(e){return Reflect.ownKeys(na(e))},set:function(e,t,r){var a=ag(na(e),t);if(a==null?void 0:a.set)return a.set.call(e.k,r),!0;if(!e.P){var n=np(na(e),t),o=n==null?void 0:n[Ce];if(o&&o.t===r)return e.o[t]=r,e.R[t]=!1,!0;if(eg(r,n)&&(r!==void 0||Nn(e.t,t)))return!0;op(e),oa(e)}return e.o[t]===r&&(r!==void 0||t in e.o)||Number.isNaN(r)&&Number.isNaN(e.o[t])||(e.o[t]=r,e.R[t]=!0),!0},deleteProperty:function(e,t){return np(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,op(e),oa(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=na(e),a=Reflect.getOwnPropertyDescriptor(r,t);return a&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:a.enumerable,value:r[t]}},defineProperty:function(){ft(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){ft(12)}},zi={};Ga(Gi,function(e,t){zi[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),zi.deleteProperty=function(e,t){return zi.set.call(this,e,t,void 0)},zi.set=function(e,t,r){return Gi.set.call(this,e[0],t,r,e[0])};var tb=function(){function e(r){var a=this;this.O=sg,this.D=!0,this.produce=function(n,o,i){if(typeof n=="function"&&typeof o!="function"){var s=o;o=n;var c=a;return function(g){var S=this;g===void 0&&(g=s);for(var y=arguments.length,x=Array(y>1?y-1:0),b=1;b<y;b++)x[b-1]=arguments[b];return c.produce(g,function(P){var N;return(N=o).call.apply(N,[S,P].concat(x))})}}var u;if(typeof o!="function"&&ft(6),i!==void 0&&typeof i!="function"&&ft(7),Tt(n)){var l=tg(a),d=ip(a,n,void 0),p=!0;try{u=o(d),p=!1}finally{p?cc(l):rp(l)}return typeof Promise!="undefined"&&u instanceof Promise?u.then(function(g){return tp(l,i),ap(g,l)},function(g){throw cc(l),g}):(tp(l,i),ap(u,l))}if(!n||typeof n!="object"){if((u=o(n))===void 0&&(u=n),u===cg&&(u=void 0),a.D&&_i(u,!0),i){var f=[],m=[];Ht("Patches").M(n,u,f,m),i(f,m)}return u}ft(21,n)},this.produceWithPatches=function(n,o){if(typeof n=="function")return function(u){for(var l=arguments.length,d=Array(l>1?l-1:0),p=1;p<l;p++)d[p-1]=arguments[p];return a.produceWithPatches(u,function(f){return n.apply(void 0,[f].concat(d))})};var i,s,c=a.produce(n,o,function(u,l){i=u,s=l});return typeof Promise!="undefined"&&c instanceof Promise?c.then(function(u){return[u,i,s]}):[c,i,s]},typeof(r==null?void 0:r.useProxies)=="boolean"&&this.setUseProxies(r.useProxies),typeof(r==null?void 0:r.autoFreeze)=="boolean"&&this.setAutoFreeze(r.autoFreeze)}var t=e.prototype;return t.createDraft=function(r){Tt(r)||ft(8),He(r)&&(r=$i(r));var a=tg(this),n=ip(this,r,void 0);return n[Ce].C=!0,rp(a),n},t.finishDraft=function(r,a){var n=r&&r[Ce],o=n.A;return tp(o,a),ap(void 0,o)},t.setAutoFreeze=function(r){this.D=r},t.setUseProxies=function(r){r&&!sg&&ft(20),this.O=r},t.applyPatches=function(r,a){var n;for(n=a.length-1;n>=0;n--){var o=a[n];if(o.path.length===0&&o.op==="replace"){r=o.value;break}}n>-1&&(a=a.slice(n+1));var i=Ht("Patches").$;return He(r)?i(r,a):this.produce(r,function(s){return i(s,a)})},e}(),mt=new tb,rb=mt.produce,oV=mt.produceWithPatches.bind(mt),iV=mt.setAutoFreeze.bind(mt),sV=mt.setUseProxies.bind(mt),cV=mt.applyPatches.bind(mt),uV=mt.createDraft.bind(mt),lV=mt.finishDraft.bind(mt),ia=rb;R(h,Ie(Zi()));var dc="NOT_FOUND";function Cb(e){var t;return{get:function(a){return t&&e(t.key,a)?t.value:dc},put:function(a,n){t={key:a,value:n}},getEntries:function(){return t?[t]:[]},clear:function(){t=void 0}}}function xb(e,t){var r=[];function a(s){var c=r.findIndex(function(l){return t(s,l.key)});if(c>-1){var u=r[c];return c>0&&(r.splice(c,1),r.unshift(u)),u.value}return dc}function n(s,c){a(s)===dc&&(r.unshift({key:s,value:c}),r.length>e&&r.pop())}function o(){return r}function i(){r=[]}return{get:a,put:n,getEntries:o,clear:i}}var vg=function(t,r){return t===r};function vb(e){return function(r,a){if(r===null||a===null||r.length!==a.length)return!1;for(var n=r.length,o=0;o<n;o++)if(!e(r[o],a[o]))return!1;return!0}}function Ag(e,t){var r=typeof t=="object"?t:{equalityCheck:t},a=r.equalityCheck,n=a===void 0?vg:a,o=r.maxSize,i=o===void 0?1:o,s=r.resultEqualityCheck,c=vb(n),u=i===1?Cb(c):xb(i,c);function l(){var d=u.get(arguments);if(d===dc){if(d=e.apply(null,arguments),s){var p=u.getEntries(),f=p.find(function(m){return s(m.value,d)});f&&(d=f.value)}u.put(arguments,d)}return d}return l.clearCache=function(){return u.clear()},l}function Ab(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every(function(a){return typeof a=="function"})){var r=t.map(function(a){return typeof a=="function"?"function "+(a.name||"unnamed")+"()":typeof a}).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+r+"]")}return t}function bb(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];var n=function(){for(var i=arguments.length,s=new Array(i),c=0;c<i;c++)s[c]=arguments[c];var u=0,l,d={memoizeOptions:void 0},p=s.pop();if(typeof p=="object"&&(d=p,p=s.pop()),typeof p!="function")throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof p+"]");var f=d,m=f.memoizeOptions,g=m===void 0?r:m,S=Array.isArray(g)?g:[g],y=Ab(s),x=e.apply(void 0,[function(){return u++,p.apply(null,arguments)}].concat(S)),b=e(function(){for(var N=[],H=y.length,Z=0;Z<H;Z++)N.push(y[Z].apply(null,arguments));return l=x.apply(null,N),l});return Object.assign(b,{resultFunc:p,memoizedResultFunc:x,dependencies:y,lastResult:function(){return l},recomputations:function(){return u},resetRecomputations:function(){return u=0}}),b};return n}var sa=bb(Ag);var ua=Ie(Zi()),mp=Ie(Zi());function bg(e){var t=function(a){var n=a.dispatch,o=a.getState;return function(i){return function(s){return typeof s=="function"?s(n,o,e):i(s)}}};return t}var Fg=bg();Fg.withExtraArgument=bg;var es=Fg;var Rg=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,n){a.__proto__=n}||function(a,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(a[o]=n[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function a(){this.constructor=t}t.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)}}(),ts=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},a,n,o,i;return i={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function s(u){return function(l){return c([u,l])}}function c(u){if(a)throw new TypeError("Generator is already executing.");for(;r;)try{if(a=1,n&&(o=u[0]&2?n.return:u[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,u[1])).done)return o;switch(n=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,n=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(l){u=[6,l],n=0}finally{a=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},ca=function(e,t){for(var r=0,a=t.length,n=e.length;r<a;r++,n++)e[n]=t[r];return e},Fb=Object.defineProperty,Rb=Object.defineProperties,Pb=Object.getOwnPropertyDescriptors,Pg=Object.getOwnPropertySymbols,wb=Object.prototype.hasOwnProperty,Ib=Object.prototype.propertyIsEnumerable,wg=function(e,t,r){return t in e?Fb(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r},at=function(e,t){for(var r in t||(t={}))wb.call(t,r)&&wg(e,r,t[r]);if(Pg)for(var a=0,n=Pg(t);a<n.length;a++){var r=n[a];Ib.call(t,r)&&wg(e,r,t[r])}return e},fp=function(e,t){return Rb(e,Pb(t))},rs=function(e,t,r){return new Promise(function(a,n){var o=function(c){try{s(r.next(c))}catch(u){n(u)}},i=function(c){try{s(r.throw(c))}catch(u){n(u)}},s=function(c){return c.done?a(c.value):Promise.resolve(c.value).then(o,i)};s((r=r.apply(e,t)).next())})},jr=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=sa.apply(void 0,e),a=function(n){for(var o=[],i=1;i<arguments.length;i++)o[i-1]=arguments[i];return r.apply(void 0,ca([He(n)?$i(n):n],o))};return a},Eb=typeof window!="undefined"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?mp.compose:mp.compose.apply(null,arguments)},wV=typeof window!="undefined"&&window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__:function(){return function(e){return e}};function pc(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var r=t;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return t===r}var Ig=function(e){return e&&typeof e.match=="function"};function C(e,t){function r(){for(var a=[],n=0;n<arguments.length;n++)a[n]=arguments[n];if(t){var o=t.apply(void 0,a);if(!o)throw new Error("prepareAction did not return an object");return at(at({type:e,payload:o.payload},"meta"in o&&{meta:o.meta}),"error"in o&&{error:o.error})}return{type:e,payload:a[0]}}return r.toString=function(){return""+e},r.type=e,r.match=function(a){return a.type===e},r}function gp(e){return pc(e)&&"type"in e}function Eg(e){return typeof e=="function"&&"type"in e&&Ig(e)}function kg(e){return gp(e)&&typeof e.type=="string"&&Object.keys(e).every(kb)}function kb(e){return["type","payload","error","meta"].indexOf(e)>-1}function Ob(e){return""+e}function qb(e){var t=e?(""+e).split("/"):[],r=t[t.length-1]||"actionCreator";return'Detected an action creator with type "'+(e||"unknown")+`" being dispatched. 
Make sure you're calling the action creator before dispatching, i.e. \`dispatch(`+r+"())` instead of `dispatch("+r+")`. This is necessary even if the action has no payload."}function Tb(e){return e===void 0&&(e={}),function(){return function(a){return function(n){return a(n)}}};var t=e.isActionCreator,r=t===void 0?Eg:t;return function(){return function(a){return function(n){return r(n)&&console.warn(qb(n.type)),a(n)}}}}function Og(e,t){var r=0;return{measureTime:function(a){var n=Date.now();try{return a()}finally{var o=Date.now();r+=o-n}},warnIfExceeded:function(){r>e&&console.warn(t+" took "+r+"ms, which is more than the warning threshold of "+e+`ms. 
If your state or actions are very large, you may want to disable the middleware as it might cause too much of a slowdown in development mode. See https://redux-toolkit.js.org/api/getDefaultMiddleware for instructions.
It is disabled in production builds, so you don't need to worry about that.`)}}}var qg=function(e){Rg(t,e);function t(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];var n=e.apply(this,r)||this;return Object.setPrototypeOf(n,t.prototype),n}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];return e.prototype.concat.apply(this,r)},t.prototype.prepend=function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];return r.length===1&&Array.isArray(r[0])?new(t.bind.apply(t,ca([void 0],r[0].concat(this)))):new(t.bind.apply(t,ca([void 0],r.concat(this))))},t}(Array),Tg=function(e){Rg(t,e);function t(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];var n=e.apply(this,r)||this;return Object.setPrototypeOf(n,t.prototype),n}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];return e.prototype.concat.apply(this,r)},t.prototype.prepend=function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];return r.length===1&&Array.isArray(r[0])?new(t.bind.apply(t,ca([void 0],r[0].concat(this)))):new(t.bind.apply(t,ca([void 0],r.concat(this))))},t}(Array);function hp(e){return Tt(e)?ia(e,function(){}):e}var Db=!0,Dg="Invariant failed";function Vg(e,t){if(!e)throw Db?new Error(Dg):new Error(Dg+": "+(t||""))}function Vb(e,t,r,a){return JSON.stringify(e,Mb(t,a),r)}function Mb(e,t){var r=[],a=[];return t||(t=function(n,o){return r[0]===o?"[Circular ~]":"[Circular ~."+a.slice(0,r.indexOf(o)).join(".")+"]"}),function(n,o){if(r.length>0){var i=r.indexOf(this);~i?r.splice(i+1):r.push(this),~i?a.splice(i,1/0,n):a.push(n),~r.indexOf(o)&&(o=t.call(this,n,o))}else r.push(o);return e==null?o:e.call(this,n,o)}}function Mg(e){return typeof e!="object"||e==null||Object.isFrozen(e)}function Lb(e,t,r){var a=Lg(e,t,r);return{detectMutations:function(){return Ng(e,t,a,r)}}}function Lg(e,t,r,a,n){t===void 0&&(t=[]),a===void 0&&(a=""),n===void 0&&(n=new Set);var o={value:r};if(!e(r)&&!n.has(r)){n.add(r),o.children={};for(var i in r){var s=a?a+"."+i:i;t.length&&t.indexOf(s)!==-1||(o.children[i]=Lg(e,t,r[i],s))}}return o}function Ng(e,t,r,a,n,o){t===void 0&&(t=[]),n===void 0&&(n=!1),o===void 0&&(o="");var i=r?r.value:void 0,s=i===a;if(n&&!s&&!Number.isNaN(a))return{wasMutated:!0,path:o};if(e(i)||e(a))return{wasMutated:!1};var c={};for(var u in r.children)c[u]=!0;for(var u in a)c[u]=!0;var l=t.length>0,d=function(f){var m=o?o+"."+f:f;if(l){var g=t.some(function(y){return y instanceof RegExp?y.test(m):m===y});if(g)return"continue"}var S=Ng(e,t,r.children[f],a[f],s,m);if(S.wasMutated)return{value:S}};for(var u in c){var p=d(u);if(typeof p=="object")return p.value}return{wasMutated:!1}}function Nb(e){return e===void 0&&(e={}),function(){return function(c){return function(u){return c(u)}}};var t=e.isImmutable,r=t===void 0?Mg:t,a=e.ignoredPaths,n=e.warnAfter,o=n===void 0?32:n,i=e.ignore;a=a||i;var s=Lb.bind(null,r,a);return function(c){var u=c.getState,l=u(),d=s(l),p;return function(f){return function(m){var g=Og(o,"ImmutableStateInvariantMiddleware");g.measureTime(function(){l=u(),p=d.detectMutations(),d=s(l),Vg(!p.wasMutated,"A state mutation was detected between dispatches, in the path '"+(p.path||"")+"'.  This may cause incorrect behavior. (https://redux.js.org/style-guide/style-guide#do-not-mutate-state)")});var S=f(m);return g.measureTime(function(){l=u(),p=d.detectMutations(),d=s(l),p.wasMutated&&Vg(!p.wasMutated,"A state mutation was detected inside a dispatch, in the path: "+(p.path||"")+". Take a look at the reducer(s) handling the action "+Vb(m)+". (https://redux.js.org/style-guide/style-guide#do-not-mutate-state)")}),g.warnIfExceeded(),S}}}}function Sp(e){var t=typeof e;return e==null||t==="string"||t==="boolean"||t==="number"||Array.isArray(e)||pc(e)}function fc(e,t,r,a,n,o){t===void 0&&(t=""),r===void 0&&(r=Sp),n===void 0&&(n=[]);var i;if(!r(e))return{keyPath:t||"<root>",value:e};if(typeof e!="object"||e===null||(o==null?void 0:o.has(e)))return!1;for(var s=a!=null?a(e):Object.entries(e),c=n.length>0,u=function(S,y){var x=t?t+"."+S:S;if(c){var b=n.some(function(P){return P instanceof RegExp?P.test(x):x===P});if(b)return"continue"}if(!r(y))return{value:{keyPath:x,value:y}};if(typeof y=="object"&&(i=fc(y,x,r,a,n,o),i))return{value:i}},l=0,d=s;l<d.length;l++){var p=d[l],f=p[0],m=p[1],g=u(f,m);if(typeof g=="object")return g.value}return o&&Qg(e)&&o.add(e),!1}function Qg(e){if(!Object.isFrozen(e))return!1;for(var t=0,r=Object.values(e);t<r.length;t++){var a=r[t];if(!(typeof a!="object"||a===null)&&!Qg(a))return!1}return!0}function Qb(e){return e===void 0&&(e={}),function(){return function(b){return function(P){return b(P)}}};var t=e.isSerializable,r=t===void 0?Sp:t,a=e.getEntries,n=e.ignoredActions,o=n===void 0?[]:n,i=e.ignoredActionPaths,s=i===void 0?["meta.arg","meta.baseQueryMeta"]:i,c=e.ignoredPaths,u=c===void 0?[]:c,l=e.warnAfter,d=l===void 0?32:l,p=e.ignoreState,f=p===void 0?!1:p,m=e.ignoreActions,g=m===void 0?!1:m,S=e.disableCache,y=S===void 0?!1:S,x=!y&&WeakSet?new WeakSet:void 0;return function(b){return function(P){return function(N){var H=P(N),Z=Og(d,"SerializableStateInvariantMiddleware");return!g&&!(o.length&&o.indexOf(N.type)!==-1)&&Z.measureTime(function(){var U=fc(N,"",r,a,s,x);if(U){var _=U.keyPath,fe=U.value;console.error("A non-serializable value was detected in an action, in the path: `"+_+"`. Value:",fe,`
Take a look at the logic that dispatched this action: `,N,`
(See https://redux.js.org/faq/actions#why-should-type-be-a-string-or-at-least-serializable-why-should-my-action-types-be-constants)`,`
(To allow non-serializable values see: https://redux-toolkit.js.org/usage/usage-guide#working-with-non-serializable-data)`)}}),f||(Z.measureTime(function(){var U=b.getState(),_=fc(U,"",r,a,u,x);if(_){var fe=_.keyPath,Se=_.value;console.error("A non-serializable value was detected in the state, in the path: `"+fe+"`. Value:",Se,`
Take a look at the reducer(s) handling this action type: `+N.type+`.
(See https://redux.js.org/faq/organizing-state#can-i-put-functions-promises-or-other-non-serializable-items-in-my-store-state)`)}}),Z.warnIfExceeded()),H}}}}function Bb(e){return typeof e=="boolean"}function jb(){return function(t){return mc(t)}}function mc(e){e===void 0&&(e={});var t=e.thunk,r=t===void 0?!0:t,a=e.immutableCheck,n=a===void 0?!0:a,o=e.serializableCheck,i=o===void 0?!0:o,s=e.actionCreatorCheck,c=s===void 0?!0:s,u=new qg;if(r&&(Bb(r)?u.push(es):u.push(es.withExtraArgument(r.extraArgument))),!1){if(n)var l;if(i)var d;if(c)var p}return u}var yp=!0;function Cp(e){var t=jb(),r=e||{},a=r.reducer,n=a===void 0?void 0:a,o=r.middleware,i=o===void 0?t():o,s=r.devTools,c=s===void 0?!0:s,u=r.preloadedState,l=u===void 0?void 0:u,d=r.enhancers,p=d===void 0?void 0:d,f;if(typeof n=="function")f=n;else if(pc(n))f=(0,ua.combineReducers)(n);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var m=i;if(typeof m=="function"&&(m=m(t),!yp&&!Array.isArray(m)))throw new Error("when using a middleware builder function, an array of middleware must be returned");if(!yp&&m.some(function(P){return typeof P!="function"}))throw new Error("each middleware provided to configureStore must be a function");var g=ua.applyMiddleware.apply(void 0,m),S=ua.compose;c&&(S=Eb(at({trace:!yp},typeof c=="object"&&c)));var y=new Tg(g),x=y;Array.isArray(p)?x=ca([g],p):typeof p=="function"&&(x=p(y));var b=S.apply(void 0,x);return(0,ua.createStore)(f,l,b)}function Bg(e){var t={},r=[],a,n={addCase:function(o,i){var s=typeof o=="string"?o:o.type;if(!s)throw new Error("`builder.addCase` cannot be called with an empty action type");if(s in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[s]=i,n},addMatcher:function(o,i){return r.push({matcher:o,reducer:i}),n},addDefaultCase:function(o){return a=o,n}};return e(n),[t,r,a]}function Ub(e){return typeof e=="function"}function T(e,t,r,a){r===void 0&&(r=[]);var n=typeof t=="function"?Bg(t):[t,r,a],o=n[0],i=n[1],s=n[2],c;if(Ub(e))c=function(){return hp(e())};else{var u=hp(e);c=function(){return u}}function l(d,p){d===void 0&&(d=c());var f=ca([o[p.type]],i.filter(function(m){var g=m.matcher;return g(p)}).map(function(m){var g=m.reducer;return g}));return f.filter(function(m){return!!m}).length===0&&(f=[s]),f.reduce(function(m,g){if(g)if(He(m)){var S=m,y=g(S,p);return y===void 0?m:y}else{if(Tt(m))return ia(m,function(x){return g(x,p)});var y=g(m,p);if(y===void 0){if(m===null)return m;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}return m},d)}return l.getInitialState=c,l}function _b(e,t){return e+"/"+t}function $b(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var r=typeof e.initialState=="function"?e.initialState:hp(e.initialState),a=e.reducers||{},n=Object.keys(a),o={},i={},s={};n.forEach(function(l){var d=a[l],p=_b(t,l),f,m;"reducer"in d?(f=d.reducer,m=d.prepare):f=d,o[l]=f,i[p]=f,s[l]=m?C(p,m):C(p)});function c(){var l=typeof e.extraReducers=="function"?Bg(e.extraReducers):[e.extraReducers],d=l[0],p=d===void 0?{}:d,f=l[1],m=f===void 0?[]:f,g=l[2],S=g===void 0?void 0:g,y=at(at({},p),i);return T(r,function(x){for(var b in y)x.addCase(b,y[b]);for(var P=0,N=m;P<N.length;P++){var H=N[P];x.addMatcher(H.matcher,H.reducer)}S&&x.addDefaultCase(S)})}var u;return{name:t,reducer:function(l,d){return u||(u=c()),u(l,d)},actions:s,caseReducers:o,getInitialState:function(){return u||(u=c()),u.getInitialState()}}}function Hb(){return{ids:[],entities:{}}}function Gb(){function e(t){return t===void 0&&(t={}),Object.assign(Hb(),t)}return{getInitialState:e}}function zb(){function e(t){var r=function(u){return u.ids},a=function(u){return u.entities},n=jr(r,a,function(u,l){return u.map(function(d){return l[d]})}),o=function(u,l){return l},i=function(u,l){return u[l]},s=jr(r,function(u){return u.length});if(!t)return{selectIds:r,selectEntities:a,selectAll:n,selectTotal:s,selectById:jr(a,o,i)};var c=jr(t,a);return{selectIds:jr(t,r),selectEntities:c,selectAll:jr(t,n),selectTotal:jr(t,s),selectById:jr(c,o,i)}}return{getSelectors:e}}function Wb(e){var t=Re(function(r,a){return e(a)});return function(a){return t(a,void 0)}}function Re(e){return function(r,a){function n(i){return kg(i)}var o=function(i){n(a)?e(a.payload,i):e(a,i)};return He(r)?(o(r),r):ia(r,o)}}function as(e,t){var r=t(e);return r}function za(e){return Array.isArray(e)||(e=Object.values(e)),e}function jg(e,t,r){e=za(e);for(var a=[],n=[],o=0,i=e;o<i.length;o++){var s=i[o],c=as(s,t);c in r.entities?n.push({id:c,changes:s}):a.push(s)}return[a,n]}function Ug(e){function t(m,g){var S=as(m,e);S in g.entities||(g.ids.push(S),g.entities[S]=m)}function r(m,g){m=za(m);for(var S=0,y=m;S<y.length;S++){var x=y[S];t(x,g)}}function a(m,g){var S=as(m,e);S in g.entities||g.ids.push(S),g.entities[S]=m}function n(m,g){m=za(m);for(var S=0,y=m;S<y.length;S++){var x=y[S];a(x,g)}}function o(m,g){m=za(m),g.ids=[],g.entities={},r(m,g)}function i(m,g){return s([m],g)}function s(m,g){var S=!1;m.forEach(function(y){y in g.entities&&(delete g.entities[y],S=!0)}),S&&(g.ids=g.ids.filter(function(y){return y in g.entities}))}function c(m){Object.assign(m,{ids:[],entities:{}})}function u(m,g,S){var y=S.entities[g.id],x=Object.assign({},y,g.changes),b=as(x,e),P=b!==g.id;return P&&(m[g.id]=b,delete S.entities[g.id]),S.entities[b]=x,P}function l(m,g){return d([m],g)}function d(m,g){var S={},y={};m.forEach(function(P){P.id in g.entities&&(y[P.id]={id:P.id,changes:at(at({},y[P.id]?y[P.id].changes:null),P.changes)})}),m=Object.values(y);var x=m.length>0;if(x){var b=m.filter(function(P){return u(S,P,g)}).length>0;b&&(g.ids=Object.keys(g.entities))}}function p(m,g){return f([m],g)}function f(m,g){var S=jg(m,e,g),y=S[0],x=S[1];d(x,g),r(y,g)}return{removeAll:Wb(c),addOne:Re(t),addMany:Re(r),setOne:Re(a),setMany:Re(n),setAll:Re(o),updateOne:Re(l),updateMany:Re(d),upsertOne:Re(p),upsertMany:Re(f),removeOne:Re(i),removeMany:Re(s)}}function Yb(e,t){var r=Ug(e),a=r.removeOne,n=r.removeMany,o=r.removeAll;function i(x,b){return s([x],b)}function s(x,b){x=za(x);var P=x.filter(function(N){return!(as(N,e)in b.entities)});P.length!==0&&S(P,b)}function c(x,b){return u([x],b)}function u(x,b){x=za(x),x.length!==0&&S(x,b)}function l(x,b){x=za(x),b.entities={},b.ids=[],s(x,b)}function d(x,b){return p([x],b)}function p(x,b){for(var P=!1,N=0,H=x;N<H.length;N++){var Z=H[N],U=b.entities[Z.id];if(!!U){P=!0,Object.assign(U,Z.changes);var _=e(U);Z.id!==_&&(delete b.entities[Z.id],b.entities[_]=U)}}P&&y(b)}function f(x,b){return m([x],b)}function m(x,b){var P=jg(x,e,b),N=P[0],H=P[1];p(H,b),s(N,b)}function g(x,b){if(x.length!==b.length)return!1;for(var P=0;P<x.length&&P<b.length;P++)if(x[P]!==b[P])return!1;return!0}function S(x,b){x.forEach(function(P){b.entities[e(P)]=P}),y(b)}function y(x){var b=Object.values(x.entities);b.sort(t);var P=b.map(e),N=x.ids;g(N,P)||(x.ids=P)}return{removeOne:a,removeMany:n,removeAll:o,addOne:Re(i),updateOne:Re(d),upsertOne:Re(f),setOne:Re(c),setMany:Re(u),setAll:Re(l),addMany:Re(s),updateMany:Re(p),upsertMany:Re(m)}}function Kb(e){e===void 0&&(e={});var t=at({sortComparer:!1,selectId:function(s){return s.id}},e),r=t.selectId,a=t.sortComparer,n=Gb(),o=zb(),i=a?Yb(r,a):Ug(r);return at(at(at({selectId:r,sortComparer:a},n),o),i)}var Jb="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",xp=function(e){e===void 0&&(e=21);for(var t="",r=e;r--;)t+=Jb[Math.random()*64|0];return t},Xb=["name","message","stack","code"],vp=function(){function e(t,r){this.payload=t,this.meta=r}return e}(),_g=function(){function e(t,r){this.payload=t,this.meta=r}return e}(),$g=function(e){if(typeof e=="object"&&e!==null){for(var t={},r=0,a=Xb;r<a.length;r++){var n=a[r];typeof e[n]=="string"&&(t[n]=e[n])}return t}return{message:String(e)}},W=function(){function e(t,r,a){var n=C(t+"/fulfilled",function(l,d,p,f){return{payload:l,meta:fp(at({},f||{}),{arg:p,requestId:d,requestStatus:"fulfilled"})}}),o=C(t+"/pending",function(l,d,p){return{payload:void 0,meta:fp(at({},p||{}),{arg:d,requestId:l,requestStatus:"pending"})}}),i=C(t+"/rejected",function(l,d,p,f,m){return{payload:f,error:(a&&a.serializeError||$g)(l||"Rejected"),meta:fp(at({},m||{}),{arg:p,requestId:d,rejectedWithValue:!!f,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"})}}),s=!1,c=typeof AbortController!="undefined"?AbortController:function(){function l(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return l.prototype.abort=function(){},l}();function u(l){return function(d,p,f){var m=(a==null?void 0:a.idGenerator)?a.idGenerator(l):xp(),g=new c,S,y=!1;function x(P){S=P,g.abort()}var b=function(){return rs(this,null,function(){var P,N,H,Z,U,_,fe;return ts(this,function(Se){switch(Se.label){case 0:return Se.trys.push([0,4,,5]),Z=(P=a==null?void 0:a.condition)==null?void 0:P.call(a,l,{getState:p,extra:f}),Zb(Z)?[4,Z]:[3,2];case 1:Z=Se.sent(),Se.label=2;case 2:if(Z===!1||g.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return y=!0,U=new Promise(function(j,L){return g.signal.addEventListener("abort",function(){return L({name:"AbortError",message:S||"Aborted"})})}),d(o(m,l,(N=a==null?void 0:a.getPendingMeta)==null?void 0:N.call(a,{requestId:m,arg:l},{getState:p,extra:f}))),[4,Promise.race([U,Promise.resolve(r(l,{dispatch:d,getState:p,extra:f,requestId:m,signal:g.signal,abort:x,rejectWithValue:function(j,L){return new vp(j,L)},fulfillWithValue:function(j,L){return new _g(j,L)}})).then(function(j){if(j instanceof vp)throw j;return j instanceof _g?n(j.payload,m,l,j.meta):n(j,m,l)})])];case 3:return H=Se.sent(),[3,5];case 4:return _=Se.sent(),H=_ instanceof vp?i(null,m,l,_.payload,_.meta):i(_,m,l),[3,5];case 5:return fe=a&&!a.dispatchConditionRejection&&i.match(H)&&H.meta.condition,fe||d(H),[2,H]}})})}();return Object.assign(b,{abort:x,requestId:m,arg:l,unwrap:function(){return b.then(Hg)}})}}return Object.assign(u,{pending:o,rejected:i,fulfilled:n,typePrefix:t})}return e.withTypes=function(){return e},e}();function Hg(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function Zb(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var Gg=function(e,t){return Ig(e)?e.match(t):e(t)};function ns(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(r){return e.some(function(a){return Gg(a,r)})}}function Ap(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(r){return e.every(function(a){return Gg(a,r)})}}function gc(e,t){if(!e||!e.meta)return!1;var r=typeof e.meta.requestId=="string",a=t.indexOf(e.meta.requestStatus)>-1;return r&&a}function os(e){return typeof e[0]=="function"&&"pending"in e[0]&&"fulfilled"in e[0]&&"rejected"in e[0]}function zg(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length===0?function(r){return gc(r,["pending"])}:os(e)?function(r){var a=e.map(function(o){return o.pending}),n=ns.apply(void 0,a);return n(r)}:zg()(e[0])}function hc(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length===0?function(r){return gc(r,["rejected"])}:os(e)?function(r){var a=e.map(function(o){return o.rejected}),n=ns.apply(void 0,a);return n(r)}:hc()(e[0])}function Wg(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=function(a){return a&&a.meta&&a.meta.rejectedWithValue};return e.length===0?function(a){var n=Ap(hc.apply(void 0,e),r);return n(a)}:os(e)?function(a){var n=Ap(hc.apply(void 0,e),r);return n(a)}:Wg()(e[0])}function Yg(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length===0?function(r){return gc(r,["fulfilled"])}:os(e)?function(r){var a=e.map(function(o){return o.fulfilled}),n=ns.apply(void 0,a);return n(r)}:Yg()(e[0])}function Kg(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length===0?function(r){return gc(r,["pending","fulfilled","rejected"])}:os(e)?function(r){for(var a=[],n=0,o=e;n<o.length;n++){var i=o[n];a.push(i.pending,i.rejected,i.fulfilled)}var s=ns.apply(void 0,a);return s(r)}:Kg()(e[0])}var bp=function(e,t){if(typeof e!="function")throw new TypeError(t+" is not a function")},Fp=function(){},Jg=function(e,t){return t===void 0&&(t=Fp),e.catch(t),e},Xg=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},Bn=function(e,t){var r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},eF="task",Zg="listener",eh="completed",Rp="cancelled",tF="task-"+Rp,rF="task-"+eh,th=Zg+"-"+Rp,aF=Zg+"-"+eh,is=function(){function e(t){this.code=t,this.name="TaskAbortError",this.message=eF+" "+Rp+" (reason: "+t+")"}return e}(),jn=function(e){if(e.aborted)throw new is(e.reason)};function rh(e,t){var r=Fp;return new Promise(function(a,n){var o=function(){return n(new is(e.reason))};if(e.aborted){o();return}r=Xg(e,o),t.finally(function(){return r()}).then(a,n)}).finally(function(){r=Fp})}var nF=function(e,t){return rs(void 0,null,function(){var r,a;return ts(this,function(n){switch(n.label){case 0:return n.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return n.sent(),[4,e()];case 2:return r=n.sent(),[2,{status:"ok",value:r}];case 3:return a=n.sent(),[2,{status:a instanceof is?"cancelled":"rejected",error:a}];case 4:return t==null||t(),[7];case 5:return[2]}})})},Sc=function(e){return function(t){return Jg(rh(e,t).then(function(r){return jn(e),r}))}},ah=function(e){var t=Sc(e);return function(r){return t(new Promise(function(a){return setTimeout(a,r)}))}},oF=Object.assign,nh={},ss="listenerMiddleware",iF=function(e,t){var r=function(a){return Xg(e,function(){return Bn(a,e.reason)})};return function(a,n){bp(a,"taskExecutor");var o=new AbortController;r(o);var i=nF(function(){return rs(void 0,null,function(){var s;return ts(this,function(c){switch(c.label){case 0:return jn(e),jn(o.signal),[4,a({pause:Sc(o.signal),delay:ah(o.signal),signal:o.signal})];case 1:return s=c.sent(),jn(o.signal),[2,s]}})})},function(){return Bn(o,rF)});return(n==null?void 0:n.autoJoin)&&t.push(i),{result:Sc(e)(i),cancel:function(){Bn(o,tF)}}}},sF=function(e,t){var r=function(a,n){return rs(void 0,null,function(){var o,i,s,c;return ts(this,function(u){switch(u.label){case 0:jn(t),o=function(){},i=new Promise(function(l,d){var p=e({predicate:a,effect:function(f,m){m.unsubscribe(),l([f,m.getState(),m.getOriginalState()])}});o=function(){p(),d()}}),s=[i],n!=null&&s.push(new Promise(function(l){return setTimeout(l,n,null)})),u.label=1;case 1:return u.trys.push([1,,3,4]),[4,rh(t,Promise.race(s))];case 2:return c=u.sent(),jn(t),[2,c];case 3:return o(),[7];case 4:return[2]}})})};return function(a,n){return Jg(r(a,n))}},oh=function(e){var t=e.type,r=e.actionCreator,a=e.matcher,n=e.predicate,o=e.effect;if(t)n=C(t).match;else if(r)t=r.type,n=r.match;else if(a)n=a;else if(!n)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return bp(o,"options.listener"),{predicate:n,type:t,effect:o}},cF=function(e){var t=oh(e),r=t.type,a=t.predicate,n=t.effect,o=xp(),i={id:o,effect:n,type:r,predicate:a,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}};return i},Pp=function(e){e.pending.forEach(function(t){Bn(t,th)})},uF=function(e){return function(){e.forEach(Pp),e.clear()}},ih=function(e,t,r){try{e(t,r)}catch(a){setTimeout(function(){throw a},0)}},sh=C(ss+"/add"),ch=C(ss+"/removeAll"),uh=C(ss+"/remove"),lF=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,ca([ss+"/error"],e))};function dF(e){var t=this;e===void 0&&(e={});var r=new Map,a=e.extra,n=e.onError,o=n===void 0?lF:n;bp(o,"onError");var i=function(f){return f.unsubscribe=function(){return r.delete(f.id)},r.set(f.id,f),function(m){f.unsubscribe(),(m==null?void 0:m.cancelActive)&&Pp(f)}},s=function(f){for(var m=0,g=Array.from(r.values());m<g.length;m++){var S=g[m];if(f(S))return S}},c=function(f){var m=s(function(g){return g.effect===f.effect});return m||(m=cF(f)),i(m)},u=function(f){var m=oh(f),g=m.type,S=m.effect,y=m.predicate,x=s(function(b){var P=typeof g=="string"?b.type===g:b.predicate===y;return P&&b.effect===S});return x&&(x.unsubscribe(),f.cancelActive&&Pp(x)),!!x},l=function(f,m,g,S){return rs(t,null,function(){var y,x,b,P;return ts(this,function(N){switch(N.label){case 0:y=new AbortController,x=sF(c,y.signal),b=[],N.label=1;case 1:return N.trys.push([1,3,4,6]),f.pending.add(y),[4,Promise.resolve(f.effect(m,oF({},g,{getOriginalState:S,condition:function(H,Z){return x(H,Z).then(Boolean)},take:x,delay:ah(y.signal),pause:Sc(y.signal),extra:a,signal:y.signal,fork:iF(y.signal,b),unsubscribe:f.unsubscribe,subscribe:function(){r.set(f.id,f)},cancelActiveListeners:function(){f.pending.forEach(function(H,Z,U){H!==y&&(Bn(H,th),U.delete(H))})}})))];case 2:return N.sent(),[3,6];case 3:return P=N.sent(),P instanceof is||ih(o,P,{raisedBy:"effect"}),[3,6];case 4:return[4,Promise.allSettled(b)];case 5:return N.sent(),Bn(y,aF),f.pending.delete(y),[7];case 6:return[2]}})})},d=uF(r),p=function(f){return function(m){return function(g){if(!gp(g))return m(g);if(sh.match(g))return c(g.payload);if(ch.match(g)){d();return}if(uh.match(g))return u(g.payload);var S=f.getState(),y=function(){if(S===nh)throw new Error(ss+": getOriginalState can only be called synchronously");return S},x;try{if(x=m(g),r.size>0)for(var b=f.getState(),P=Array.from(r.values()),N=0,H=P;N<H.length;N++){var Z=H[N],U=!1;try{U=Z.predicate(g,b,S)}catch(_){U=!1,ih(o,_,{raisedBy:"predicate"})}!U||l(Z,g,f,y)}}finally{S=nh}return x}}};return{middleware:p,startListening:c,stopListening:u,clearListeners:d}}var wp="RTK_autoBatch",pF=function(){return function(e){var t;return{payload:e,meta:(t={},t[wp]=!0,t)}}},lh,fF=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window!="undefined"?window:typeof global!="undefined"?global:globalThis):function(e){return(lh||(lh=Promise.resolve())).then(e).catch(function(t){return setTimeout(function(){throw t},0)})},dh=function(e){return function(t){setTimeout(t,e)}},mF=typeof window!="undefined"&&window.requestAnimationFrame?window.requestAnimationFrame:dh(10),gF=function(e){return e===void 0&&(e={type:"raf"}),function(t){return function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];var n=t.apply(void 0,r),o=!0,i=!1,s=!1,c=new Set,u=e.type==="tick"?fF:e.type==="raf"?mF:e.type==="callback"?e.queueNotification:dh(e.timeout),l=function(){s=!1,i&&(i=!1,c.forEach(function(d){return d()}))};return Object.assign({},n,{subscribe:function(d){var p=function(){return o&&d()},f=n.subscribe(p);return c.add(d),function(){f(),c.delete(d)}},dispatch:function(d){var p;try{return o=!((p=d==null?void 0:d.meta)==null?void 0:p[wp]),i=!o,i&&(s||(s=!0,u(l))),n.dispatch(d)}finally{o=!0}}})}}};og();var wS=Ie(ls()),IS=Ie(bh());var Ac=e=>t=>r=>{var o,i;let a=(o=r.payload)==null?void 0:o.analyticsAction;a!==void 0&&((i=r.payload)==null||delete i.analyticsAction);let n=t(r);return r.type==="search/executeSearch/fullfilled"&&a===void 0&&console.error("No analytics action associated with search:",r),r.type==="recommendation/get/fullfilled"&&a===void 0&&console.error("No analytics action associated with recommendation:",r),r.type==="productRecommendations/get/fullfilled"&&a===void 0&&console.error("No analytics action associated with product recommendation:",r),a!==void 0&&e.dispatch(a),n};function YF(e){return e.instantlyCallable}var bc=()=>e=>t=>e(YF(t)?t():t);var Fc=e=>()=>t=>r=>{var n;if(!r.error)return t(r);let a=r.error;if(((n=r.payload)==null?void 0:n.ignored)||e.error(a.stack||a.message||a.name||"Error",`Action dispatch error ${r.type}`,r),r.error.name!=="SchemaValidationError")return t(r)},Rc=e=>t=>r=>a=>(e.debug({action:a,nextState:t.getState()},`Action dispatched: ${a.type}`),r(a));function KF(e,t){let r=`
  The following properties are invalid:

    ${e.join(`
	`)}
  
  ${t}
  `;return new Ya(r)}var Ya=class extends Error{constructor(e){super(e);this.name="SchemaValidationError"}},Y=class{constructor(e){this.definition=e}validate(e={},t=""){let r={...this.default,...e},a=[];for(let n in this.definition){let o=this.definition[n].validate(r[n]);o&&a.push(`${n}: ${o}`)}if(a.length)throw KF(a,t);return r}get default(){let e={};for(let t in this.definition){let r=this.definition[t].default;r!==void 0&&(e[t]=r)}return e}},me=class{constructor(e={}){this.baseConfig=e}validate(e){return this.baseConfig.required&&te(e)?"value is required.":null}get default(){return this.baseConfig.default instanceof Function?this.baseConfig.default():this.baseConfig.default}get required(){return this.baseConfig.required===!0}};function Ee(e){return e===void 0}function JF(e){return e===null}function te(e){return Ee(e)||JF(e)}var D=class{constructor(e={}){this.config=e,this.value=new me(e)}validate(e){let t=this.value.validate(e);return t||(XF(e)?e<this.config.min?`minimum value of ${this.config.min} not respected.`:e>this.config.max?`maximum value of ${this.config.max} not respected.`:null:"value is not a number.")}get default(){return this.value.default}get required(){return this.value.required}};function XF(e){return Ee(e)||Fh(e)}function Fh(e){return typeof e=="number"&&!isNaN(e)}var K=class{constructor(e={}){this.value=new me(e)}validate(e){let t=this.value.validate(e);return t||(ZF(e)?null:"value is not a boolean.")}get default(){return this.value.default}get required(){return this.value.required}};function ZF(e){return Ee(e)||Rh(e)}function Rh(e){return typeof e=="boolean"}var eR=/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i,w=class{constructor(e={}){this.config={emptyAllowed:!0,url:!1,...e},this.value=new me(this.config)}validate(e){let{emptyAllowed:t,url:r,regex:a,constrainTo:n}=this.config,o=this.value.validate(e);return o||(Ee(e)?null:Un(e)?!t&&!e.length?"value is an empty string.":r&&!eR.test(e)?"value is not a valid URL.":a&&!a.test(e)?`value did not match provided regex ${a}`:n&&!n.includes(e)?`value should be one of: ${n.join(", ")}.`:null:"value is not a string.")}get default(){return this.value.default}get required(){return this.value.required}};function Un(e){return Object.prototype.toString.call(e)==="[object String]"}var q=class{constructor(e={}){this.config={options:{required:!1},values:{},...e}}validate(e){if(Ee(e))return this.config.options.required?"value is required and is currently undefined":null;if(!Ph(e))return"value is not an object";for(let[r,a]of Object.entries(this.config.values))if(a.required&&te(e[r]))return`value does not contain ${r}`;let t="";for(let[r,a]of Object.entries(this.config.values)){let n=e[r],o=a.validate(n);o!==null&&(t+=" "+o)}return t===""?null:t}get default(){}get required(){return!!this.config.options.required}};function Ph(e){return e!==void 0&&typeof e=="object"}var X=class{constructor(e={}){this.config=e,this.value=new me(this.config)}validate(e){if(!te(e)&&!Array.isArray(e))return"value is not an array";let t=this.value.validate(e);if(t!==null)return t;if(te(e))return null;if(this.config.max!==void 0&&e.length>this.config.max)return`value contains more than ${this.config.max}`;if(this.config.min!==void 0&&e.length<this.config.min)return`value contains less than ${this.config.min}`;if(this.config.each!==void 0){let r="";return e.forEach(a=>{this.config.each.required&&te(a)&&(r=`value is null or undefined: ${e.join(",")}`);let n=this.validatePrimitiveValue(a,this.config.each);n!==null&&(r+=" "+n)}),r===""?null:r}return null}validatePrimitiveValue(e,t){return Rh(e)||Un(e)||Fh(e)||Ph(e)?t.validate(e):"value is not a primitive value"}get default(){}get required(){return this.value.required}};function _n(e){return Array.isArray(e)}var Dt=class{constructor(e){this.config=e,this.value=new me(e)}validate(e){let t=this.value.validate(e);return t!==null?t:Ee(e)||Object.values(this.config.enum).find(a=>a===e)?null:"value is not in enum."}get default(){return this.value.default}get required(){return this.value.required}};var O=new w({required:!0,emptyAllowed:!1}),de=new w({required:!1,emptyAllowed:!1}),ge=new w({required:!0,emptyAllowed:!0}),wh=new w({required:!1,emptyAllowed:!0}),Pc=new X({each:O,required:!0}),Ih=new w({required:!1,emptyAllowed:!1,regex:/^\d+\.\d+\.\d+$/}),Vt=({message:e,name:t,stack:r})=>({message:e,name:t,stack:r}),nt=(e,t)=>{if("required"in t)return{payload:new Y({value:t}).validate({value:e}).value};let n=new q({options:{required:!0},values:t}).validate(e);if(n)throw new Ya(n);return{payload:e}},A=(e,t)=>{try{return nt(e,t)}catch(r){return{payload:e,error:Vt(r)}}},ke=(e,t,r,a)=>{let n=`Check the initialState of ${a}`;return Eh(e,t,r,n,"Controller initialization error")},he=(e,t,r,a)=>{let n=`Check the options of ${a}`;return Eh(e,t,r,n,"Controller initialization error")},Eh=(e,t,r,a,n)=>{try{return t.validate(r,a)}catch(o){throw e.logger.error(o,n),o}};var Dc=Ie(wc()),aS=Ie(kh()),nS=Ie(Oh());var Zh=Ie(Th()),eS=Ie(jh());var k=new Error("Failed to load reducers."),fs=class extends Error{constructor(){super();this.name="ExpiredToken",this.message="The token being used to perform the request is expired."}},$n=class extends Error{constructor(t,r){super();this.name="Disconnected",this.message=`Client could not connect to the following URL: ${t}`,this.statusCode=r!=null?r:0}};var zh=Ie(Wp()),la=(e,t=5)=>e+Math.random().toString(36).substring(2,2+t);function Ec(e){return Array.isArray(e)}function kc(e){return e.trim()===""}function Wh(e,t){return[...e.reduce((r,a)=>{let n=t(a);return r.has(n)||r.set(n,a),r},new Map).values()]}function DR(e){return(typeof btoa!="undefined"?btoa:zh.btoa)(encodeURI(e))}function Oc(e,t){let{[e]:r,...a}=t;return a}function Hn(e){return DR(JSON.stringify(e))}var VR=new Set(["1",1,"yes",!0]);function qc(){if(typeof navigator=="undefined"||typeof window=="undefined")return!1;let e=navigator,t=window;return[e.globalPrivacyControl,e.doNotTrack,e.msDoNotTrack,t.doNotTrack].some(r=>VR.has(r))}function Yh(e){let t={};for(let[r,a]of e)t[r]=a;return t}function Kh(e,t,r){return clearTimeout(t),setTimeout(e,r)}function ms(e){if(typeof e!="object"||!e)return e;try{return JSON.parse(JSON.stringify(e))}catch(t){return e}}function Jh(e){let t=[];for(let r in e){let a=encodeURIComponent(r),n=encodeURIComponent(e[r]);t.push(`${a}=${n}`)}return t.join("&")}function Xh(e){return typeof e!="object"||!e?!1:Object.values(e).every(MR)}function MR(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"}function tS(e){return e===429}var ot=class{static async call(t){let r=LR(t),{logger:a}=t,n=await ot.preprocessRequest(r,t);a.info(n,"Platform request");let{url:o,...i}=n,s=async()=>{let c=await(0,Zh.default)(o,i);if(tS(c.status))throw c;return c};try{let c=await(0,eS.backOff)(s,{retry:u=>{let l=u&&tS(u.status);return l&&a.info("Platform retrying request"),l}});if(c.status===419)throw a.info("Platform renewing token"),new fs;if(c.status===404)throw new $n(o,c.status);return a.info({response:c,requestInfo:n},"Platform response"),c}catch(c){return c.message==="Failed to fetch"?new $n(o):c}}static async preprocessRequest(t,r){let{origin:a,preprocessRequest:n,logger:o,requestMetadata:i}=r,{signal:s,...c}=t,u=ms(c);try{let l=await n(t,a,i);return{...t,...l}}catch(l){o.error(l,"Platform request preprocessing failed. Returning default request options.")}return u}};function rS(e,t){let r=!t||!t.environment||t.environment==="prod"?"":t.environment,a=!t||!t.region||t.region==="us"?"":`-${t.region}`;return`https://${e}${r}${a}.cloud.coveo.com`}function gs(e,t="prod"){let r=t==="prod"?"":t,a=`https://${e}.org${r}.coveo.com`,n=`https://${e}.analytics.org${r}.coveo.com`,o=`${a}/rest/search/v2`,i=`https://${e}.admin.org${r}.coveo.com`;return{platform:a,analytics:n,search:o,admin:i}}function Tc(e){return(e==null?void 0:e.multiRegionSubDomain)?`https://${e.multiRegionSubDomain}.org.coveo.com`:rS("platform",e)}function Yp(e){return rS("analytics",e)}function LR(e){let{url:t,method:r,requestParams:a,contentType:n,accessToken:o,signal:i}=e,s=e.method==="POST"||e.method==="PUT",c=NR(a,n);return{url:t,method:r,headers:{"Content-Type":n,Authorization:`Bearer ${o}`,...e.headers},...s&&{body:c},signal:i}}function NR(e,t){return t==="application/x-www-form-urlencoded"?Xh(e)?Jh(e):"":JSON.stringify(e)}Dc.default.extend(nS.default);Dc.default.extend(aS.default);var Kp="/rest/search/v2",Jp="/rest/ua",it=()=>({organizationId:"",accessToken:"",platformUrl:Tc(),search:{apiBaseUrl:`${Tc()}${Kp}`,locale:"en-US",timezone:Dc.default.tz.guess(),authenticationProviders:[]},analytics:{enabled:!0,apiBaseUrl:`${Yp()}${Jp}`,nextApiBaseUrl:"",originContext:"Search",originLevel2:"default",originLevel3:"default",anonymous:!1,deviceId:"",userDisplayName:"",documentLocation:"",trackingId:"",analyticsMode:"legacy",source:{}}});var Ct=()=>!1;function Ja(){return{uniqueId:"",content:"",isLoading:!1,position:-1,resultsWithPreview:[]}}var Ge=()=>"default";var Mt=(r=>(r.Relevance="relevance",r.Fields="fields",r))(Mt||{}),Vc=(r=>(r.Ascending="asc",r.Descending="desc",r))(Vc||{});var jM=new q({options:{required:!1},values:{by:new Dt({enum:Mt,required:!0}),fields:new X({each:new q({values:{name:new w,direction:new Dt({enum:Vc})}})})}});var WM=new q({options:{required:!1},values:{by:new Dt({enum:Mt,required:!0}),fields:new X({each:new q({values:{field:new w({required:!0}),direction:new Dt({enum:Vc}),displayName:new w}})})}});function da(){return[]}function Xa(){return{}}function pa(){return{}}var Mc=()=>({});var JR=Ie(ls());var Za=e=>e;function Gn(){return{answerSnippet:"",documentId:{contentIdKey:"",contentIdValue:""},question:"",relatedQuestions:[],score:0}}function Te(){return{response:{results:[],searchUid:"",totalCountFiltered:0,facets:[],generateAutomaticFacets:{facets:[]},queryCorrections:[],triggers:[],questionAnswer:Gn(),pipeline:"",splitTestRun:"",termsToHighlight:{},phrasesToHighlight:{},extendedResults:{}},duration:0,queryExecuted:"",error:null,automaticallyCorrected:!1,isLoading:!1,results:[],searchResponseId:"",requestId:"",questionAnswer:Gn(),extendedResults:{}}}function Gt(e){let{url:t,accessToken:r,organizationId:a,authentication:n,...o}=e;return o}var $r=e=>{let{response:t}=e;return t.body?QR(e):BR(t)},QR=e=>UR(e)?_R(e):jR(e)?e.body:{message:"unknown",statusCode:0,type:"unknown"},BR=e=>{let t=JSON.parse(JSON.stringify(e,Object.getOwnPropertyNames(e)));return{...t,message:`Client side error: ${t.message||""}`,statusCode:400,type:"ClientError"}};function jR(e){return e.body.statusCode!==void 0}function UR(e){return e.body.exception!==void 0}var _R=e=>({message:e.body.exception.code,statusCode:e.response.status,type:e.body.exception.code});function Lc(){if(typeof window=="undefined"){let{AbortController:e}=sS();return new e}return typeof AbortController=="undefined"?null:new AbortController}var en=class{constructor(){this.currentAbortController=null}async enqueue(t,r){var o;let a=this.currentAbortController,n=this.currentAbortController=Lc();a&&(r.warnOnAbort&&r.logger.warn("Cancelling current pending search query"),a.abort());try{return await t((o=n==null?void 0:n.signal)!=null?o:null)}finally{this.currentAbortController===n&&(this.currentAbortController=null)}}};var tn=class{constructor(t){this._params={};this._basePath=t}addParam(t,r){this._params={...this.params,[t]:r}}get basePath(){return this._basePath}get params(){return this._params}get hasParams(){return Object.entries(this._params).length}get href(){return this.hasParams?`${this.basePath}?${Object.entries(this.params).map(([t,r])=>`${t}=${encodeURIComponent(r)}`).join("&")}`:this.basePath}},cS=e=>/^https:\/\/platform(dev|stg|hipaa)?(-)?(eu|au)?\.cloud\.coveo\.com/.test(e),uS=(e,t)=>{let r=Zp(e);return r&&r.organizationId===t?r:null},Zp=e=>{let t=e.match(/^https:\/\/(?<organizationId>\w+)\.org(?<environment>dev|stg|hipaa)?\.coveo\.com/);return(t==null?void 0:t.groups)?t.groups:null};function lS(e){return((e.headers.get("content-type")||"").split(";").find(a=>a.indexOf("charset=")!==-1)||"").split("=")[1]||"UTF-8"}var zt=(e,t,r,a)=>{let n=new tn(`${e.url}${a}`);return n.addParam("organizationId",e.organizationId),e.authentication&&n.addParam("authentication",e.authentication),{accessToken:e.accessToken,method:t,contentType:r,url:n.href,origin:"searchApiFetch"}};var dS=(e,t)=>{let r=new tn(`${e.url}${t}`);return r.addParam("access_token",e.accessToken),r.addParam("organizationId",e.organizationId),r.addParam("uniqueId",e.uniqueId),e.q!==void 0&&r.addParam("q",e.q),e.enableNavigation!==void 0&&r.addParam("enableNavigation",`${e.enableNavigation}`),e.requestedOutputSize!==void 0&&r.addParam("requestedOutputSize",`${e.requestedOutputSize}`),e.visitorId!==void 0&&r.addParam("visitorId",`${e.visitorId}`),r.href},pS=async(e,t)=>{let r=await ot.call({...zt(e,"POST","application/x-www-form-urlencoded","/html"),requestParams:Gt(e),requestMetadata:{method:"html"},...t});if(r instanceof Error)throw r;let a=lS(r),n=await r.arrayBuffer(),i=new TextDecoder(a).decode(n);return $R(i)?{success:i}:{error:$r({response:r,body:i})}};function $R(e){return typeof e=="string"}function HR(e){return{statusCode:e.statusCode,type:e.name,message:e.message}}function GR(e){return{statusCode:e.code,type:e.name,message:e.message,ignored:!0}}function hs(e,t){if(t&&e.name==="AbortError")return{error:GR(e)};if(e instanceof $n)return{error:HR(e)};throw e}var Ss=class{constructor(t){this.options=t;this.apiCallsQueues={unknown:new en,mainSearch:new en,facetValues:new en,foldingCollection:new en,instantResults:new en}}async plan(t){let r=await ot.call({...zt(t,"POST","application/json","/plan"),requestParams:Gt(t),requestMetadata:{method:"plan"},...this.options});if(r instanceof Error)return hs(r);let a=await r.json();return WR(a)?{success:a}:{error:$r({response:r,body:a})}}async querySuggest(t){let r=await ot.call({...zt(t,"POST","application/json","/querySuggest"),requestMetadata:{method:"querySuggest"},requestParams:Gt(t),...this.options});if(r instanceof Error)return hs(r);let a=await r.json(),n={response:r,body:a};return zR(a)?{success:(await this.options.postprocessQuerySuggestResponseMiddleware(n)).body}:{error:$r(n)}}async search(t,r){var s;let a=(s=r==null?void 0:r.origin)!=null?s:"unknown",n=await this.apiCallsQueues[a].enqueue(c=>ot.call({...zt(t,"POST","application/json",""),requestParams:Gt(t),requestMetadata:{method:"search",origin:r==null?void 0:r.origin},...this.options,signal:c!=null?c:void 0}),{logger:this.options.logger,warnOnAbort:!(r==null?void 0:r.disableAbortWarning)});if(n instanceof Error)return hs(n,r==null?void 0:r.disableAbortWarning);let o=await n.json(),i={response:n,body:o};return Qc(o)?(i.body=fS(o),{success:(await this.options.postprocessSearchResponseMiddleware(i)).body}):{error:$r(i)}}async facetSearch(t){let r=await ot.call({...zt(t,"POST","application/json","/facet"),requestParams:Gt(t),requestMetadata:{method:"facetSearch"},...this.options});if(r instanceof Error)throw r;let a=await r.json(),n={response:r,body:a};return(await this.options.postprocessFacetSearchResponseMiddleware(n)).body}async recommendations(t){let r=await ot.call({...zt(t,"POST","application/json",""),requestParams:Gt(t),requestMetadata:{method:"recommendations"},...this.options});if(r instanceof Error)throw r;let a=await r.json();return Qc(a)?{success:a}:{error:$r({response:r,body:a})}}async html(t){return pS(t,{...this.options})}async productRecommendations(t){let r=await ot.call({...zt(t,"POST","application/json",""),requestParams:Gt(t),requestMetadata:{method:"productRecommendations"},...this.options});if(r instanceof Error)throw r;let a=await r.json();return Qc(a)?{success:a}:{error:$r({response:r,body:a})}}async fieldDescriptions(t){let r=await ot.call({...zt(t,"GET","application/json","/fields"),requestParams:{},requestMetadata:{method:"fieldDescriptions"},...this.options});if(r instanceof Error)throw r;let a=await r.json();return YR(a)?{success:a}:{error:$r({response:r,body:a})}}},Nc=e=>e.success!==void 0,ye=e=>e.error!==void 0;function Qc(e){return e.results!==void 0}function fS(e){let t=Gn();return te(e.questionAnswer)?(e.questionAnswer=t,e):(e.questionAnswer={...t,...e.questionAnswer},e)}function zR(e){return e.completions!==void 0}function WR(e){return e.preprocessingOutput!==void 0}function YR(e){return e.fields!==void 0}function Wt(){return{contextValues:{}}}var Bc=()=>({correctedQuery:"",wordCorrections:[],originalQuery:""}),gS=()=>({correctedQuery:"",corrections:[],originalQuery:""});function ys(){return{enableDidYouMean:!1,wasCorrectedTo:"",wasAutomaticallyCorrected:!1,queryCorrection:Bc(),originalQuery:"",automaticallyCorrectQuery:!0,queryCorrectionMode:"legacy"}}function zn(){return{enabled:!0}}function fa(){return{freezeFacetOrder:!1,facets:{}}}function Yt(){return{}}function hS(e){return{request:e,hasBreadcrumbs:!0}}function Kt(){return{}}function SS(e){return{request:e}}function Jt(){return{}}function yS(e){return{request:e}}function Xt(){return{}}var ef=["author","language","urihash","objecttype","collection","source","permanentid"],CS=[...ef,"date","filetype","parents"],XR=[...CS,"ec_price","ec_name","ec_description","ec_brand","ec_category","ec_item_group_id","ec_shortdesc","ec_thumbnails","ec_images","ec_promo_price","ec_in_stock","ec_rating"],Wn=()=>({fieldsToInclude:ef,fetchAllFields:!1,fieldsDescription:[]});var rn=()=>({enabled:!1,fields:{collection:"foldingcollection",parent:"foldingparent",child:"foldingchild"},filterFieldRange:2,collections:{}});function Yn(){return{id:"",isVisible:!0,isLoading:!1,isStreaming:!1,citations:[],liked:!1,disliked:!1,responseFormat:{answerStyle:"default"},feedbackModalOpen:!1,feedbackSubmitted:!1,fieldsToIncludeInCitations:[]}}function Ue(){return{firstResult:0,defaultNumberOfResults:10,numberOfResults:10,totalCountFiltered:0}}var xe=()=>({q:"",enableQuerySyntax:!1});var Kn=()=>({liked:!1,disliked:!1,expanded:!1,feedbackModalOpen:!1,relatedQuestions:[]});var ma=(r=>(r.Ascending="ascending",r.Descending="descending",r))(ma||{}),Zt=(o=>(o.Relevancy="relevancy",o.QRE="qre",o.Date="date",o.Field="field",o.NoSort="nosort",o))(Zt||{}),Hr=e=>{if(_n(e))return e.map(t=>Hr(t)).join(",");switch(e.by){case"relevancy":case"qre":case"nosort":return e.by;case"date":return`date ${e.order}`;case"field":return`@${e.field} ${e.order}`;default:return""}},Cs=()=>({by:"relevancy"}),tf=e=>({by:"date",order:e}),rf=(e,t)=>({by:"field",order:t,field:e}),af=()=>({by:"qre"}),nf=()=>({by:"nosort"}),xS=new q({values:{by:new Dt({enum:Zt,required:!0}),order:new Dt({enum:ma}),field:new w}});function tt(){return Hr(Cs())}function an(){return{}}function nn(){return{}}function xs(){return{}}var vs=()=>({url:"",clientId:"",additionalFields:[],advancedParameters:{debug:!1},products:[],facets:{results:[]},error:null,isLoading:!1,responseId:""});function ga(){return{contextValues:{}}}var st=()=>({cq:"",cqWasSet:!1,aq:"",aqWasSet:!1,lq:"",lqWasSet:!1,dq:"",dqWasSet:!1,defaultFilters:{cq:"",aq:"",lq:"",dq:""}});var Lt=()=>"";var vS=Ie(ls());var jc=e=>e,Uc=e=>e,_c=e=>e;function AS(e){return new Ss({logger:(0,vS.default)({level:"silent"}),preprocessRequest:Za,postprocessSearchResponseMiddleware:jc,postprocessFacetSearchResponseMiddleware:Uc,postprocessQuerySuggestResponseMiddleware:_c,...e})}var ZR=10,$c=e=>({past:[],present:e,future:[]}),eP=e=>{let{past:t,present:r,future:a}=e;if(!r||t.length===0)return e;let n=t[t.length-1];return{past:t.slice(0,t.length-1),present:n,future:[r,...a]}},tP=e=>{let{past:t,present:r,future:a}=e;if(!r||a.length===0)return e;let n=a[0],o=a.slice(1);return{past:[...t,r],present:n,future:o}},rP=e=>{let{action:t,state:r,reducer:a}=e,{past:n,present:o}=r,i=a(o,t);return o?o===i?r:{past:[...n,o].slice(-ZR),present:i,future:[]}:$c(i)},bS=e=>{let{actionTypes:t,reducer:r}=e,a=$c();return(n=a,o)=>{switch(o.type){case t.undo:return eP(n);case t.redo:return tP(n);case t.snapshot:return rP({state:n,reducer:r,action:o});default:return n}}};function Hc(){return{length:void 0}}var FS=1,RS=20,Gc=5,PS=1,zc=8;function ha(){return{desiredCount:Gc,numberOfValues:zc,set:{}}}function Wc(){return Nt({})}function Nt(e){var t,r,a;return{context:e.context||Wt(),dictionaryFieldContext:e.dictionaryFieldContext||ga(),facetSet:e.facetSet||Kt(),numericFacetSet:e.numericFacetSet||Xt(),dateFacetSet:e.dateFacetSet||Jt(),categoryFacetSet:e.categoryFacetSet||Yt(),automaticFacetSet:(t=e.automaticFacetSet)!=null?t:ha(),pagination:e.pagination||Ue(),query:e.query||xe(),tabSet:e.tabSet||nn(),advancedSearchQueries:e.advancedSearchQueries||st(),staticFilterSet:e.staticFilterSet||an(),querySet:e.querySet||pa(),sortCriteria:e.sortCriteria||tt(),pipeline:e.pipeline||Lt(),searchHub:e.searchHub||Ge(),facetOptions:e.facetOptions||fa(),facetOrder:(r=e.facetOrder)!=null?r:da(),debug:(a=e.debug)!=null?a:Ct()}}function Yc(){return{}}function Kc(e){return e?e.expiresAt&&Date.now()>=e.expiresAt:!1}function Jc(){return{queries:[],maxLength:10}}function Xc(){return{results:[],maxLength:10}}function Zc(){return{}}var eu=()=>({redirectTo:"",query:"",executions:[],notifications:[],queryModification:{originalQuery:"",newQuery:"",queryToIgnore:""}});function tu(e={}){return{configuration:it(),advancedSearchQueries:st(),staticFilterSet:an(),facetSet:Kt(),dateFacetSet:Jt(),numericFacetSet:Xt(),categoryFacetSet:Yt(),facetSearchSet:Xa(),categoryFacetSearchSet:xs(),facetOptions:fa(),pagination:Ue(),query:xe(),querySet:pa(),instantResults:Yc(),tabSet:nn(),querySuggest:{},search:Te(),sortCriteria:tt(),context:Wt(),dictionaryFieldContext:ga(),didYouMean:ys(),fields:Wn(),history:$c(Wc()),pipeline:Lt(),facetOrder:da(),searchHub:Ge(),debug:Ct(),resultPreview:Ja(),version:"unit-testing-version",folding:rn(),triggers:eu(),questionAnswering:Kn(),standaloneSearchBoxSet:Zc(),recentResults:Xc(),recentQueries:Jc(),excerptLength:Hc(),automaticFacetSet:ha(),generatedAnswer:Yn(),...e}}function ES(e={}){let t=aP(e,tu);return{...t,executeFirstSearch:jest.fn(),executeFirstSearchAfterStandaloneSearchBoxRedirect:jest.fn(),apiClient:t.apiClient}}function aP(e={},t,r=nP){let a=(0,wS.default)({level:"silent"}),n=kS(e,t),{store:o,apiClient:i}=r(a,n),s=o(n),c=()=>{},{state:u,...l}=e;return{store:s,apiClient:i,state:kS(e,t),subscribe:jest.fn(()=>c),get dispatch(){return s.dispatch},get actions(){return s.getActions()},findAsyncAction(d){let p=this.actions.find(f=>f.type===d.type);return oP(p)?p:void 0},get relay(){return null},logger:a,addReducers:jest.fn(),enableAnalytics:jest.fn(),disableAnalytics:jest.fn(),...l}}function kS(e,t){let r=e.state||t();return r.configuration.analytics.enabled=!1,r}var nP=e=>{let t={apiClient:AS({logger:e}),validatePayload:nt,logger:e};return{store:(0,IS.default)([bc,Fc(e),Ac,es.withExtraArgument(t),...mc(),Rc(e)]),apiClient:t.apiClient}};function oP(e){return e?"meta"in e:!1}function As(e={}){return{urihash:"",parents:"",sfid:"",sfparentid:"",sfinsertedbyid:"",documenttype:"",sfcreatedbyid:"",permanentid:"",date:0,objecttype:"",sourcetype:"",sftitle:"",size:0,sffeeditemid:"",clickableuri:"",sfcreatedby:"",source:"",collection:"",connectortype:"",filetype:"",sfcreatedbyname:"",sflikecount:0,language:[],...e}}function OS(e={}){return{title:"",uri:"",printableUri:"",clickUri:"",uniqueId:"",excerpt:"",firstSentences:"",summary:null,flags:"",hasHtmlVersion:!1,score:0,percentScore:0,rankingInfo:null,isTopResult:!1,isRecommendation:!1,titleHighlights:[],firstSentencesHighlights:[],excerptHighlights:[],printableUriHighlights:[],summaryHighlights:[],absentTerms:[],raw:As(),isUserActionView:!1,...e}}var Cj={title:"example documentTitle",uri:"example documentUri",printableUri:"printable-uri",clickUri:"example documentUrl",uniqueId:"unique-id",excerpt:"excerpt",firstSentences:"first-sentences",flags:"flags",rankingModifier:"example rankingModifier",raw:As({urihash:"example documentUriHash",source:"example sourceName",collection:"example collectionName",permanentid:"example contentIDValue"})};var qS={};Km(qS,{escape:()=>Jn,getHighlightedSuggestion:()=>of,highlightString:()=>iP});function iP(e){if(kc(e.openingDelimiter)||kc(e.closingDelimiter))throw Error("delimiters should be a non-empty string");if(te(e.content)||kc(e.content))return e.content;if(e.highlights.length===0)return Jn(e.content);let t=e.content.length,r="",a=0;for(let n=0;n<e.highlights.length;n++){let o=e.highlights[n],i=o.offset,s=i+o.length;if(s>t)break;r+=Jn(e.content.slice(a,i)),r+=e.openingDelimiter,r+=Jn(e.content.slice(i,s)),r+=e.closingDelimiter,a=s}return a!==t&&(r+=Jn(e.content.slice(a))),r}function of(e,t){return e=Jn(e),e.replace(/\[(.*?)\]|\{(.*?)\}|\((.*?)\)/g,(r,a,n,o)=>a?sf(a,t.notMatchDelimiters):n?sf(n,t.exactMatchDelimiters):o?sf(o,t.correctionDelimiters):r)}function sf(e,t){return t?t.open+e+t.close:e}function Jn(e){let t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},r="(?:"+Object.keys(t).join("|")+")",a=RegExp(r),n=RegExp(r,"g");return a.test(e)?e.replace(n,o=>t[o]):e}async function TS(e,t){let r=e.getReader(),a;for(;!(a=await r.read()).done;)t(a.value)}function DS(e){let t,r,a,n=!1;return function(i){t===void 0?(t=i,r=0,a=-1):t=sP(t,i);let s=t.length,c=0;for(;r<s;){n&&(t[r]===10&&(c=++r),n=!1);let u=-1;for(;r<s&&u===-1;++r)switch(t[r]){case 58:a===-1&&(a=r-c);break;case 13:n=!0;case 10:u=r;break}if(u===-1)break;e(t.subarray(c,u),a),c=r,a=-1}c===s?t=void 0:c!==0&&(t=t.subarray(c),r-=c)}}function VS(e,t,r){let a=MS(),n=new TextDecoder;return function(i,s){if(i.length===0)r==null||r(a),a=MS();else if(s>0){let c=n.decode(i.subarray(0,s)),u=s+(i[s+1]===32?2:1),l=n.decode(i.subarray(u));switch(c){case"data":a.data=a.data?a.data+`
`+l:l;break;case"event":a.event=l;break;case"id":e(a.id=l);break;case"retry":let d=parseInt(l,10);isNaN(d)||t(a.retry=d);break}}}}function sP(e,t){let r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r}function MS(){return{data:"",event:"",id:"",retry:void 0}}var cP=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]]);return r},ru="text/event-stream",uP=1e3,LS="last-event-id";function cf(e,t){var{signal:r,headers:a,onopen:n,onmessage:o,onclose:i,onerror:s,openWhenHidden:c,fetch:u}=t,l=cP(t,["signal","headers","onopen","onmessage","onclose","onerror","openWhenHidden","fetch"]);return new Promise((d,p)=>{let f=Object.assign({},a);f.accept||(f.accept=ru);let m;function g(){m?.abort(),document.hidden||N()}c||document.addEventListener("visibilitychange",g);let S=uP,y=0;function x(){document.removeEventListener("visibilitychange",g),window.clearTimeout(y),m?.abort()}r==null||r.addEventListener("abort",()=>{x(),d()});let b=u??window.fetch,P=n??lP;async function N(){var H;m=typeof AbortController=="undefined"?null:new AbortController;try{let Z=await b(e,Object.assign(Object.assign({},l),{headers:f,signal:m?.signal}));await P(Z),await TS(Z.body,DS(VS(U=>{U?f[LS]=U:delete f[LS]},U=>{S=U},o))),i==null||i(),x(),d()}catch(Z){if(!m?.signal.aborted)try{let U=(H=s==null?void 0:s(Z))!==null&&H!==void 0?H:S;window.clearTimeout(y),y=window.setTimeout(N,U)}catch(U){x(),p(U)}}}N()})}function lP(e){let t=e.headers.get("content-type");if(!(t==null?void 0:t.startsWith(ru)))throw new Error(`Expected content-type to be ${ru}, Actual: ${t}`)}var dP=(e,t,r)=>new tn(`${e}/rest/organizations/${t}/machinelearning/streaming/${r}`).href,NS=3,pP=5e3,fP="text/event-stream",uf=1,QS=class extends Error{},au=class extends Error{constructor(t){super(t.message);this.payload=t}},BS=class{constructor(){this.timeouts=new Set}add(t){this.timeouts.add(t)}remove(t){clearTimeout(t),this.timeouts.delete(t)}isActive(t){return this.timeouts.has(t)}},lf=class{constructor(t){this.logger=t.logger}streamGeneratedAnswer(t,r){let{url:a,organizationId:n,streamId:o,accessToken:i}=t,{write:s,abort:c,close:u,resetAnswer:l}=r,d=new BS;if(!o){this.logger.error("No stream ID found");return}let p=0,f,m=()=>{f&&!d.isActive(f)&&(S==null||S.abort(),l(),y())},g=()=>{d.remove(f),f=Kh(m,f,pP),d.add(f)},S=Lc(),y=()=>cf(dP(a,n,o),{method:"GET",headers:{Authorization:`Bearer ${i}`,accept:"*/*"},signal:S==null?void 0:S.signal,async onopen(x){if(x.ok&&x.headers.get("content-type")===fP)return;throw x.status>=400&&x.status<500&&x.status!==429?new au({message:"Error opening stream",code:x.status}):new QS},onmessage:x=>{let b=JSON.parse(x.data);if(b.finishReason==="ERROR"){d.remove(f),S==null||S.abort(),c({message:b.errorMessage,code:b.statusCode});return}s(b),p=0,b.finishReason==="COMPLETED"?(d.remove(f),u()):g()},onerror:x=>{if(d.remove(f),x instanceof au)throw S==null||S.abort(),c(x),x;if(++p>NS){this.logger.info("Maximum retry exceeded.");let b={message:"Failed to complete stream.",code:uf};throw S==null||S.abort(),c(b),new au(b)}this.logger.info(`Retrying...(${p}/${NS})`),l()}});return y(),S}};function er(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]]);return r}function F(e,t,r,a){function n(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function s(l){try{u(a.next(l))}catch(d){i(d)}}function c(l){try{u(a.throw(l))}catch(d){i(d)}}function u(l){l.done?o(l.value):n(l.value).then(s,c)}u((a=a.apply(e,t||[])).next())})}var se;(function(e){e.search="search",e.click="click",e.custom="custom",e.view="view",e.collect="collect"})(se||(se={}));function jS(){return typeof window!="undefined"}function df(){return typeof navigator!="undefined"}function Xn(){return typeof document!="undefined"}function pf(){try{return typeof localStorage!="undefined"}catch{return!1}}function mP(){try{return typeof sessionStorage!="undefined"}catch{return!1}}function US(){return df()&&navigator.cookieEnabled}var gP=[se.click,se.custom,se.search,se.view],hP=(e,t)=>gP.indexOf(e)!==-1?Object.assign({language:Xn()?document.documentElement.lang:"unknown",userAgent:df()?navigator.userAgent:"unknown"},t):t,Zn=class{static set(t,r,a){var n,o,i,s;a&&(o=new Date,o.setTime(o.getTime()+a)),s=window.location.hostname,s.indexOf(".")===-1?_S(t,r,o):(i=s.split("."),n=i[i.length-2]+"."+i[i.length-1],_S(t,r,o,n))}static get(t){for(var r=t+"=",a=document.cookie.split(";"),n=0;n<a.length;n++){var o=a[n];if(o=o.replace(/^\s+/,""),o.lastIndexOf(r,0)===0)return o.substring(r.length,o.length)}return null}static erase(t){Zn.set(t,"",-1)}};function _S(e,t,r,a){document.cookie=`${e}=${t}`+(r?`;expires=${r.toUTCString()}`:"")+(a?`;domain=${a}`:"")+";path=/;SameSite=Lax"}function SP(){return pf()?localStorage:US()?new Sa:mP()?sessionStorage:new eo}var Sa=class{getItem(t){return Zn.get(`${Sa.prefix}${t}`)}removeItem(t){Zn.erase(`${Sa.prefix}${t}`)}setItem(t,r,a){Zn.set(`${Sa.prefix}${t}`,r,a)}};Sa.prefix="coveo_";var $S=class{constructor(){this.cookieStorage=new Sa}getItem(t){return localStorage.getItem(t)||this.cookieStorage.getItem(t)}removeItem(t){this.cookieStorage.removeItem(t),localStorage.removeItem(t)}setItem(t,r){localStorage.setItem(t,r),this.cookieStorage.setItem(t,r,31556926e3)}},eo=class{getItem(t){return null}removeItem(t){}setItem(t,r){}},bs="__coveo.analytics.history",HS=20,GS=1e3*60,zS=75,Fs=class{constructor(t){this.store=t||SP()}addElement(t){t.internalTime=new Date().getTime(),t=this.cropQueryElement(this.stripEmptyQuery(t));let r=this.getHistoryWithInternalTime();r!=null?this.isValidEntry(t)&&this.setHistory([t].concat(r)):this.setHistory([t])}addElementAsync(t){return F(this,void 0,void 0,function*(){t.internalTime=new Date().getTime(),t=this.cropQueryElement(this.stripEmptyQuery(t));let r=yield this.getHistoryWithInternalTimeAsync();r!=null?this.isValidEntry(t)&&this.setHistory([t].concat(r)):this.setHistory([t])})}getHistory(){let t=this.getHistoryWithInternalTime();return this.stripEmptyQueries(this.stripInternalTime(t))}getHistoryAsync(){return F(this,void 0,void 0,function*(){let t=yield this.getHistoryWithInternalTimeAsync();return this.stripEmptyQueries(this.stripInternalTime(t))})}getHistoryWithInternalTime(){try{let t=this.store.getItem(bs);return t&&typeof t=="string"?JSON.parse(t):[]}catch{return[]}}getHistoryWithInternalTimeAsync(){return F(this,void 0,void 0,function*(){try{let t=yield this.store.getItem(bs);return t?JSON.parse(t):[]}catch{return[]}})}setHistory(t){try{this.store.setItem(bs,JSON.stringify(t.slice(0,HS)))}catch{}}clear(){try{this.store.removeItem(bs)}catch{}}getMostRecentElement(){let t=this.getHistoryWithInternalTime();return Array.isArray(t)?t.sort((a,n)=>(n.internalTime||0)-(a.internalTime||0))[0]:null}cropQueryElement(t){return t.name&&t.value&&t.name.toLowerCase()==="query"&&(t.value=t.value.slice(0,zS)),t}isValidEntry(t){let r=this.getMostRecentElement();return r&&r.value==t.value?(t.internalTime||0)-(r.internalTime||0)>GS:!0}stripInternalTime(t){return Array.isArray(t)?t.map(r=>{let{name:a,time:n,value:o}=r;return{name:a,time:n,value:o}}):[]}stripEmptyQuery(t){let{name:r,time:a,value:n}=t;return r&&typeof n=="string"&&r.toLowerCase()==="query"&&n.trim()===""?{name:r,time:a}:t}stripEmptyQueries(t){return t.map(r=>this.stripEmptyQuery(r))}},WS=Object.freeze({__proto__:null,HistoryStore:Fs,MAX_NUMBER_OF_HISTORY_ELEMENTS:HS,MAX_VALUE_SIZE:zS,MIN_THRESHOLD_FOR_DUPLICATE_VALUE:GS,STORE_KEY:bs,default:Fs}),yP=(e,t)=>F(void 0,void 0,void 0,function*(){return e===se.view?(yield CP(t.contentIdValue),Object.assign({location:window.location.toString(),referrer:document.referrer,title:document.title},t)):t}),CP=e=>F(void 0,void 0,void 0,function*(){let t=new Fs,r={name:"PageView",value:e,time:new Date().toISOString()};yield t.addElementAsync(r)}),nu,xP=new Uint8Array(16);function vP(){if(!nu&&(nu=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!nu))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return nu(xP)}var AP=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function ou(e){return typeof e=="string"&&AP.test(e)}var _e=[];for(let e=0;e<256;++e)_e.push((e+256).toString(16).slice(1));function YS(e,t=0){return(_e[e[t+0]]+_e[e[t+1]]+_e[e[t+2]]+_e[e[t+3]]+"-"+_e[e[t+4]]+_e[e[t+5]]+"-"+_e[e[t+6]]+_e[e[t+7]]+"-"+_e[e[t+8]]+_e[e[t+9]]+"-"+_e[e[t+10]]+_e[e[t+11]]+_e[e[t+12]]+_e[e[t+13]]+_e[e[t+14]]+_e[e[t+15]]).toLowerCase()}function bP(e){if(!ou(e))throw TypeError("Invalid UUID");let t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}function FP(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}var RP="6ba7b810-9dad-11d1-80b4-00c04fd430c8",PP="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function wP(e,t,r){function a(n,o,i,s){var c;if(typeof n=="string"&&(n=FP(n)),typeof o=="string"&&(o=bP(o)),((c=o)===null||c===void 0?void 0:c.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+n.length);if(u.set(o),u.set(n,o.length),u=r(u),u[6]=u[6]&15|t,u[8]=u[8]&63|128,i){s=s||0;for(let l=0;l<16;++l)i[s+l]=u[l];return i}return YS(u)}try{a.name=e}catch{}return a.DNS=RP,a.URL=PP,a}var IP=typeof crypto!="undefined"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),KS={randomUUID:IP};function on(e,t,r){if(KS.randomUUID&&!t&&!e)return KS.randomUUID();e=e||{};let a=e.random||(e.rng||vP)();if(a[6]=a[6]&15|64,a[8]=a[8]&63|128,t){r=r||0;for(let n=0;n<16;++n)t[r+n]=a[n];return t}return YS(a)}function EP(e,t,r,a){switch(e){case 0:return t&r^~t&a;case 1:return t^r^a;case 2:return t&r^t&a^r&a;case 3:return t^r^a}}function ff(e,t){return e<<t|e>>>32-t}function kP(e){let t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof e=="string"){let i=unescape(encodeURIComponent(e));e=[];for(let s=0;s<i.length;++s)e.push(i.charCodeAt(s))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);let a=e.length/4+2,n=Math.ceil(a/16),o=new Array(n);for(let i=0;i<n;++i){let s=new Uint32Array(16);for(let c=0;c<16;++c)s[c]=e[i*64+c*4]<<24|e[i*64+c*4+1]<<16|e[i*64+c*4+2]<<8|e[i*64+c*4+3];o[i]=s}o[n-1][14]=(e.length-1)*8/Math.pow(2,32),o[n-1][14]=Math.floor(o[n-1][14]),o[n-1][15]=(e.length-1)*8&4294967295;for(let i=0;i<n;++i){let s=new Uint32Array(80);for(let f=0;f<16;++f)s[f]=o[i][f];for(let f=16;f<80;++f)s[f]=ff(s[f-3]^s[f-8]^s[f-14]^s[f-16],1);let c=r[0],u=r[1],l=r[2],d=r[3],p=r[4];for(let f=0;f<80;++f){let m=Math.floor(f/20),g=ff(c,5)+EP(m,u,l,d)+p+t[m]+s[f]>>>0;p=d,d=l,l=ff(u,30)>>>0,u=c,c=g}r[0]=r[0]+c>>>0,r[1]=r[1]+u>>>0,r[2]=r[2]+l>>>0,r[3]=r[3]+d>>>0,r[4]=r[4]+p>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var OP=wP("v5",80,kP),JS=OP,XS="2.29.3",ZS=e=>`${e.protocol}//${e.hostname}${e.pathname.indexOf("/")===0?e.pathname:`/${e.pathname}`}${e.search}`,Rs={pageview:"pageview",event:"event"},mf=class{constructor({client:t,uuidGenerator:r=on}){this.client=t,this.uuidGenerator=r}},ey=class extends mf{constructor({client:t,uuidGenerator:r=on}){super({client:t,uuidGenerator:r});this.actionData={},this.pageViewId=r(),this.nextPageViewId=this.pageViewId,this.currentLocation=ZS(window.location),this.lastReferrer=Xn()?document.referrer:"",this.addHooks()}getApi(t){switch(t){case"setAction":return this.setAction;default:return null}}setAction(t,r){this.action=t,this.actionData=r}clearData(){this.clearPluginData(),this.action=void 0,this.actionData={}}getLocationInformation(t,r){return Object.assign({hitType:t},this.getNextValues(t,r))}updateLocationInformation(t,r){this.updateLocationForNextPageView(t,r)}getDefaultContextInformation(t){let r={title:Xn()?document.title:"",encoding:Xn()?document.characterSet:"UTF-8"},a={screenResolution:`${screen.width}x${screen.height}`,screenColor:`${screen.colorDepth}-bit`},n={language:navigator.language,userAgent:navigator.userAgent},o={time:Date.now(),eventId:this.uuidGenerator()};return Object.assign(Object.assign(Object.assign(Object.assign({},o),a),n),r)}updateLocationForNextPageView(t,r){let{pageViewId:a,referrer:n,location:o}=this.getNextValues(t,r);this.lastReferrer=n,this.pageViewId=a,this.currentLocation=o,t===Rs.pageview&&(this.nextPageViewId=this.uuidGenerator(),this.hasSentFirstPageView=!0)}getNextValues(t,r){return{pageViewId:t===Rs.pageview?this.nextPageViewId:this.pageViewId,referrer:t===Rs.pageview&&this.hasSentFirstPageView?this.currentLocation:this.lastReferrer,location:t===Rs.pageview?this.getCurrentLocationFromPayload(r):this.currentLocation}}getCurrentLocationFromPayload(t){if(t.page){let r=n=>n.replace(/^\/?(.*)$/,"/$1");return`${(n=>n.split("/").slice(0,3).join("/"))(this.currentLocation)}${r(t.page)}`}else return ZS(window.location)}},tr=class{constructor(t,r){if(!ou(t))throw Error("Not a valid uuid");this.clientId=t,this.creationDate=Math.floor(r/1e3)}toString(){return this.clientId.replace(/-/g,"")+"."+this.creationDate.toString()}get expired(){let t=Math.floor(Date.now()/1e3)-this.creationDate;return t<0||t>tr.expirationTime}validate(t,r){return!this.expired&&this.matchReferrer(t,r)}matchReferrer(t,r){try{let a=new URL(t);return r.some(n=>new RegExp(n.replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*")+"$").test(a.host))}catch{return!1}}static fromString(t){let r=t.split(".");if(r.length!==2)return null;let[a,n]=r;if(a.length!==32||isNaN(parseInt(n)))return null;let o=a.substring(0,8)+"-"+a.substring(8,12)+"-"+a.substring(12,16)+"-"+a.substring(16,20)+"-"+a.substring(20,32);return ou(o)?new tr(o,Number.parseInt(n)*1e3):null}};tr.cvo_cid="cvo_cid";tr.expirationTime=120;var ty=class extends mf{constructor({client:t,uuidGenerator:r=on}){super({client:t,uuidGenerator:r})}getApi(t){switch(t){case"decorate":return this.decorate;case"acceptFrom":return this.acceptFrom;default:return null}}decorate(t){return F(this,void 0,void 0,function*(){if(!this.client.getCurrentVisitorId)throw new Error("Could not retrieve current clientId");try{let r=new URL(t),a=yield this.client.getCurrentVisitorId();return r.searchParams.set(tr.cvo_cid,new tr(a,Date.now()).toString()),r.toString()}catch{throw new Error("Invalid URL provided")}})}acceptFrom(t){this.client.setAcceptedLinkReferrers(t)}};ty.Id="link";var xt=Object.keys;function iu(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}var gf={id:"svc_ticket_id",subject:"svc_ticket_subject",description:"svc_ticket_description",category:"svc_ticket_category",productId:"svc_ticket_product_id",custom:"svc_ticket_custom"},qP=xt(gf).map(e=>gf[e]),TP=[...qP].join("|"),DP=new RegExp(`^(${TP}$)`),VP={svcAction:"svc_action",svcActionData:"svc_action_data"},MP=e=>xt(e).filter(t=>e[t]!==void 0).reduce((t,r)=>{let a=gf[r]||r;return Object.assign(Object.assign({},t),{[a]:e[r]})},{}),LP=e=>DP.test(e),NP=[LP],ry={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",price:"pr",quantity:"qt",coupon:"cc",position:"ps",group:"group"},ay={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",position:"ps",price:"pr",group:"group"},ze={action:"pa",list:"pal",listSource:"pls"},su={id:"ti",revenue:"tr",tax:"tt",shipping:"ts",coupon:"tcc",affiliation:"ta",step:"cos",option:"col"},QP=["loyaltyCardId","loyaltyTier","thirdPartyPersona","companyName","favoriteStore","storeName","userIndustry","userRole","userDepartment","businessUnit"],hf={id:"quoteId",affiliation:"quoteAffiliation"},Sf={id:"reviewId",rating:"reviewRating",comment:"reviewComment"},BP={add:ze,bookmark_add:ze,bookmark_remove:ze,click:ze,checkout:ze,checkout_option:ze,detail:ze,impression:ze,remove:ze,refund:Object.assign(Object.assign({},ze),su),purchase:Object.assign(Object.assign({},ze),su),quickview:ze,quote:Object.assign(Object.assign({},ze),hf),review:Object.assign(Object.assign({},ze),Sf)},jP=xt(ry).map(e=>ry[e]),UP=xt(ay).map(e=>ay[e]),_P=xt(ze).map(e=>ze[e]),$P=xt(su).map(e=>su[e]),HP=xt(Sf).map(e=>Sf[e]),GP=xt(hf).map(e=>hf[e]),zP=[...jP,"custom"].join("|"),WP=[...UP,"custom"].join("|"),ny="(pr[0-9]+)",oy="(il[0-9]+pi[0-9]+)",YP=new RegExp(`^${ny}(${zP})$`),KP=new RegExp(`^(${oy}(${WP}))|(il[0-9]+nm)$`),JP=new RegExp(`^(${_P.join("|")})$`),XP=new RegExp(`^(${$P.join("|")})$`),ZP=new RegExp(`^${ny}custom$`),ew=new RegExp(`^${oy}custom$`),tw=new RegExp(`^(${[...QP,...HP,...GP].join("|")})$`),rw=e=>YP.test(e),aw=e=>KP.test(e),nw=e=>JP.test(e),ow=e=>XP.test(e),iw=e=>tw.test(e),sw=[aw,rw,nw,ow,iw],cw=[ZP,ew],uw={anonymizeIp:"aip"},lw={eventCategory:"ec",eventAction:"ea",eventLabel:"el",eventValue:"ev",page:"dp",visitorId:"cid",clientId:"cid",userId:"uid",currencyCode:"cu"},dw={hitType:"t",pageViewId:"pid",encoding:"de",location:"dl",referrer:"dr",screenColor:"sd",screenResolution:"sr",title:"dt",userAgent:"ua",language:"ul",eventId:"z",time:"tm"},pw=["contentId","contentIdKey","contentType","searchHub","tab","searchUid","permanentId","contentLocale","trackingId"],fw=Object.assign(Object.assign(Object.assign(Object.assign({},uw),lw),dw),pw.reduce((e,t)=>Object.assign(Object.assign({},e),{[t]:t}),{})),yf=Object.assign(Object.assign({},fw),VP),mw=e=>{let t=!!e.action&&BP[e.action]||{};return xt(e).reduce((r,a)=>{let n=t[a]||yf[a]||a;return Object.assign(Object.assign({},r),{[n]:e[a]})},{})},gw=xt(yf).map(e=>yf[e]),hw=e=>gw.indexOf(e)!==-1,Sw=e=>e==="custom",yw=e=>[...sw,...NP,hw,Sw].some(t=>t(e)),Cw=e=>xt(e).reduce((t,r)=>{let a=xw(r);return a?Object.assign(Object.assign({},t),vw(a,e[r])):Object.assign(Object.assign({},t),{[r]:e[r]})},{}),xw=e=>{let t;return[...cw].every(r=>{var a;return t=(a=r.exec(e))===null||a===void 0?void 0:a[1],!Boolean(t)}),t},vw=(e,t)=>xt(t).reduce((r,a)=>Object.assign(Object.assign({},r),{[`${e}${a}`]:t[a]}),{}),iy=class{constructor(t){this.opts=t}sendEvent(t,r){return F(this,void 0,void 0,function*(){if(!this.isAvailable())throw new Error('navigator.sendBeacon is not supported in this browser. Consider adding a polyfill like "sendbeacon-polyfill".');let{baseUrl:a,preprocessRequest:n}=this.opts,o=yield this.getQueryParamsForEventType(t),{url:i,payload:s}=yield this.preProcessRequestAsPotentialJSONString(`${a}/analytics/${t}?${o}`,r,n),c=this.encodeForEventType(t,s),u=new Blob([c],{type:"application/x-www-form-urlencoded"});navigator.sendBeacon(i,u)})}isAvailable(){return"sendBeacon"in navigator}deleteHttpCookieVisitorId(){return Promise.resolve()}preProcessRequestAsPotentialJSONString(t,r,a){return F(this,void 0,void 0,function*(){let n=t,o=r;if(a){let i=yield a({url:t,body:JSON.stringify(r)},"analyticsBeacon"),{url:s,body:c}=i;n=s||t;try{o=JSON.parse(c)}catch(u){console.error("Unable to process the request body as a JSON string",u)}}return{payload:o,url:n}})}encodeForEventType(t,r){return this.isEventTypeLegacy(t)?this.encodeEventToJson(t,r):this.encodeEventToJson(t,r,this.opts.token)}getQueryParamsForEventType(t){return F(this,void 0,void 0,function*(){let{token:r,visitorIdProvider:a}=this.opts,n=yield a.getCurrentVisitorId();return[r&&this.isEventTypeLegacy(t)?`access_token=${r}`:"",n?`visitorId=${n}`:"","discardVisitInfo=true"].filter(o=>!!o).join("&")})}isEventTypeLegacy(t){return[se.click,se.custom,se.search,se.view].indexOf(t)!==-1}encodeEventToJson(t,r,a){let n=`${t}Event=${encodeURIComponent(JSON.stringify(r))}`;return a&&(n=`access_token=${encodeURIComponent(a)}&${n}`),n}},sy=class{sendEvent(t,r){return F(this,void 0,void 0,function*(){return Promise.resolve()})}deleteHttpCookieVisitorId(){return F(this,void 0,void 0,function*(){return Promise.resolve()})}},cy=window.fetch,Cf=class{constructor(t){this.opts=t}sendEvent(t,r){return F(this,void 0,void 0,function*(){let{baseUrl:a,visitorIdProvider:n,preprocessRequest:o}=this.opts,i=this.shouldAppendVisitorId(t)?yield this.getVisitorIdParam():"",s={url:`${a}/analytics/${t}${i}`,credentials:"include",mode:"cors",headers:this.getHeaders(),method:"POST",body:JSON.stringify(r)},c=Object.assign(Object.assign({},s),o?yield o(s,"analyticsFetch"):{}),{url:u}=c,l=er(c,["url"]),d=yield cy(u,l);if(d.ok){let p=yield d.json();return p.visitorId&&n.setCurrentVisitorId(p.visitorId),p}else{try{d.json()}catch{}throw console.error(`An error has occured when sending the "${t}" event.`,d,r),new Error(`An error has occurred when sending the "${t}" event. Check the console logs for more details.`)}})}deleteHttpCookieVisitorId(){return F(this,void 0,void 0,function*(){let{baseUrl:t}=this.opts,r=`${t}/analytics/visit`;yield cy(r,{headers:this.getHeaders(),method:"DELETE"})})}shouldAppendVisitorId(t){return[se.click,se.custom,se.search,se.view].indexOf(t)!==-1}getVisitorIdParam(){return F(this,void 0,void 0,function*(){let{visitorIdProvider:t}=this.opts,r=yield t.getCurrentVisitorId();return r?`?visitor=${r}`:""})}getHeaders(){let{token:t}=this.opts;return Object.assign(Object.assign({},t?{Authorization:`Bearer ${t}`}:{}),{"Content-Type":"application/json"})}},uy=class{constructor(t,r){pf()&&US()?this.storage=new $S:pf()?this.storage=localStorage:(console.warn("BrowserRuntime detected no valid storage available.",this),this.storage=new eo),this.client=new Cf(t),this.beaconClient=new iy(t),window.addEventListener("beforeunload",()=>{let a=r();for(let{eventType:n,payload:o}of a)this.beaconClient.sendEvent(n,o)})}getClientDependingOnEventType(t){return t==="click"&&this.beaconClient.isAvailable()?this.beaconClient:this.client}},ly=class{constructor(t,r){this.storage=r||new eo,this.client=new Cf(t)}getClientDependingOnEventType(t){return this.client}},dy=class{constructor(){this.storage=new eo,this.client=new sy}getClientDependingOnEventType(t){return this.client}},Aw="xx",bw=e=>(e==null?void 0:e.startsWith(Aw))||!1,Fw=`
        We've detected you're using React Native but have not provided the corresponding runtime, 
        for an optimal experience please use the "coveo.analytics/react-native" subpackage.
        Follow the Readme on how to set it up: https://github.com/coveo/coveo.analytics.js#using-react-native
    `;function Rw(){return typeof navigator!="undefined"&&navigator.product=="ReactNative"}var Pw=["1",1,"yes",!0];function Ps(){return df()&&[navigator.globalPrivacyControl,navigator.doNotTrack,navigator.msDoNotTrack,window.doNotTrack].some(e=>Pw.indexOf(e)!==-1)}var py="v15",fy={default:"https://analytics.cloud.coveo.com/rest/ua",production:"https://analytics.cloud.coveo.com/rest/ua",hipaa:"https://analyticshipaa.cloud.coveo.com/rest/ua"};function ww(e=fy.default,t=py,r=!1){if(e=e.replace(/\/$/,""),r)return`${e}/${t}`;let a=e.endsWith("/rest")||e.endsWith("/rest/ua");return`${e}${a?"":"/rest"}/${t}`}var Iw="38824e1f-37f5-42d3-8372-a4b8fa9df946",Qt=class{get defaultOptions(){return{endpoint:fy.default,isCustomEndpoint:!1,token:"",version:py,beforeSendHooks:[],afterSendHooks:[]}}get version(){return XS}constructor(t){if(this.acceptedLinkReferrers=[],!t)throw new Error("You have to pass options to this constructor");this.options=Object.assign(Object.assign({},this.defaultOptions),t),this.visitorId="",this.bufferedRequests=[],this.beforeSendHooks=[yP,hP].concat(this.options.beforeSendHooks),this.afterSendHooks=this.options.afterSendHooks,this.eventTypeMapping={};let r={baseUrl:this.baseUrl,token:this.options.token,visitorIdProvider:this,preprocessRequest:this.options.preprocessRequest};this.runtime=this.options.runtimeEnvironment||this.initRuntime(r),Ps()&&(this.runtime.storage=new eo),this.addEventTypeMapping(se.view,{newEventType:se.view,addClientIdParameter:!0}),this.addEventTypeMapping(se.click,{newEventType:se.click,addClientIdParameter:!0}),this.addEventTypeMapping(se.custom,{newEventType:se.custom,addClientIdParameter:!0}),this.addEventTypeMapping(se.search,{newEventType:se.search,addClientIdParameter:!0})}initRuntime(t){return jS()&&Xn()?new uy(t,()=>{let r=[...this.bufferedRequests];return this.bufferedRequests=[],r}):(Rw()&&console.warn(Fw),new ly(t))}get storage(){return this.runtime.storage}determineVisitorId(){return F(this,void 0,void 0,function*(){try{return jS()&&this.extractClientIdFromLink(window.location.href)||(yield this.storage.getItem("visitorId"))||on()}catch(t){return console.log("Could not get visitor ID from the current runtime environment storage. Using a random ID instead.",t),on()}})}getCurrentVisitorId(){return F(this,void 0,void 0,function*(){if(!this.visitorId){let t=yield this.determineVisitorId();yield this.setCurrentVisitorId(t)}return this.visitorId})}setCurrentVisitorId(t){return F(this,void 0,void 0,function*(){this.visitorId=t,yield this.storage.setItem("visitorId",t)})}setClientId(t,r){return F(this,void 0,void 0,function*(){if(ou(t))this.setCurrentVisitorId(t.toLowerCase());else{if(!r)throw Error("Cannot generate uuid client id without a specific namespace string.");this.setCurrentVisitorId(JS(t,JS(r,Iw)))}})}getParameters(t,...r){return F(this,void 0,void 0,function*(){return yield this.resolveParameters(t,...r)})}getPayload(t,...r){return F(this,void 0,void 0,function*(){let a=yield this.resolveParameters(t,...r);return yield this.resolvePayloadForParameters(t,a)})}get currentVisitorId(){return typeof(this.visitorId||this.storage.getItem("visitorId"))!="string"&&this.setCurrentVisitorId(on()),this.visitorId}set currentVisitorId(t){this.visitorId=t,this.storage.setItem("visitorId",t)}extractClientIdFromLink(t){if(Ps())return null;try{let r=new URL(t).searchParams.get(tr.cvo_cid);if(r==null)return null;let a=tr.fromString(r);return!a||!Xn()||!a.validate(document.referrer,this.acceptedLinkReferrers)?null:a.clientId}catch{}return null}resolveParameters(t,...r){return F(this,void 0,void 0,function*(){let{variableLengthArgumentsNames:a=[],addVisitorIdParameter:n=!1,usesMeasurementProtocol:o=!1,addClientIdParameter:i=!1}=this.eventTypeMapping[t]||{};return yield[f=>a.length>0?this.parseVariableArgumentsPayload(a,f):f[0],f=>F(this,void 0,void 0,function*(){return Object.assign(Object.assign({},f),{visitorId:n?yield this.getCurrentVisitorId():""})}),f=>F(this,void 0,void 0,function*(){return i?Object.assign(Object.assign({},f),{clientId:yield this.getCurrentVisitorId()}):f}),f=>o?this.ensureAnonymousUserWhenUsingApiKey(f):f,f=>this.beforeSendHooks.reduce((m,g)=>F(this,void 0,void 0,function*(){let S=yield m;return yield g(t,S)}),f)].reduce((f,m)=>F(this,void 0,void 0,function*(){let g=yield f;return yield m(g)}),Promise.resolve(r))})}resolvePayloadForParameters(t,r){return F(this,void 0,void 0,function*(){let{usesMeasurementProtocol:a=!1}=this.eventTypeMapping[t]||{};return yield[d=>this.setTrackingIdIfTrackingIdNotPresent(d),d=>this.removeEmptyPayloadValues(d,t),d=>this.validateParams(d,t),d=>a?mw(d):d,d=>a?this.removeUnknownParameters(d):d,d=>a?this.processCustomParameters(d):this.mapCustomParametersToCustomData(d)].reduce((d,p)=>F(this,void 0,void 0,function*(){let f=yield d;return yield p(f)}),Promise.resolve(r))})}makeEvent(t,...r){return F(this,void 0,void 0,function*(){let{newEventType:a=t}=this.eventTypeMapping[t]||{},n=yield this.resolveParameters(t,...r),o=yield this.resolvePayloadForParameters(t,n);return{eventType:a,payload:o,log:i=>F(this,void 0,void 0,function*(){return this.bufferedRequests.push({eventType:a,payload:Object.assign(Object.assign({},o),i)}),yield Promise.all(this.afterSendHooks.map(s=>s(t,Object.assign(Object.assign({},n),i)))),yield this.deferExecution(),yield this.sendFromBuffer()})}})}sendEvent(t,...r){return F(this,void 0,void 0,function*(){return(yield this.makeEvent(t,...r)).log({})})}deferExecution(){return new Promise(t=>setTimeout(t,0))}sendFromBuffer(){return F(this,void 0,void 0,function*(){let t=this.bufferedRequests.shift();if(t){let{eventType:r,payload:a}=t;return this.runtime.getClientDependingOnEventType(r).sendEvent(r,a)}})}clear(){this.storage.removeItem("visitorId"),new Fs().clear()}deleteHttpOnlyVisitorId(){this.runtime.client.deleteHttpCookieVisitorId()}makeSearchEvent(t){return F(this,void 0,void 0,function*(){return this.makeEvent(se.search,t)})}sendSearchEvent(t){var{searchQueryUid:r}=t,a=er(t,["searchQueryUid"]);return F(this,void 0,void 0,function*(){return(yield this.makeSearchEvent(a)).log({searchQueryUid:r})})}makeClickEvent(t){return F(this,void 0,void 0,function*(){return this.makeEvent(se.click,t)})}sendClickEvent(t){var{searchQueryUid:r}=t,a=er(t,["searchQueryUid"]);return F(this,void 0,void 0,function*(){return(yield this.makeClickEvent(a)).log({searchQueryUid:r})})}makeCustomEvent(t){return F(this,void 0,void 0,function*(){return this.makeEvent(se.custom,t)})}sendCustomEvent(t){var{lastSearchQueryUid:r}=t,a=er(t,["lastSearchQueryUid"]);return F(this,void 0,void 0,function*(){return(yield this.makeCustomEvent(a)).log({lastSearchQueryUid:r})})}makeViewEvent(t){return F(this,void 0,void 0,function*(){return this.makeEvent(se.view,t)})}sendViewEvent(t){return F(this,void 0,void 0,function*(){return(yield this.makeViewEvent(t)).log({})})}getVisit(){return F(this,void 0,void 0,function*(){let r=yield(yield fetch(`${this.baseUrl}/analytics/visit`)).json();return this.visitorId=r.visitorId,r})}getHealth(){return F(this,void 0,void 0,function*(){return yield(yield fetch(`${this.baseUrl}/analytics/monitoring/health`)).json()})}registerBeforeSendEventHook(t){this.beforeSendHooks.push(t)}registerAfterSendEventHook(t){this.afterSendHooks.push(t)}addEventTypeMapping(t,r){this.eventTypeMapping[t]=r}setAcceptedLinkReferrers(t){if(Array.isArray(t)&&t.every(r=>typeof r=="string"))this.acceptedLinkReferrers=t;else throw Error("Parameter should be an array of domain strings")}parseVariableArgumentsPayload(t,r){let a={};for(let n=0,o=r.length;n<o;n++){let i=r[n];if(typeof i=="string")a[t[n]]=i;else if(typeof i=="object")return Object.assign(Object.assign({},a),i)}return a}isKeyAllowedEmpty(t,r){return({[se.search]:["queryText"]}[t]||[]).indexOf(r)!==-1}removeEmptyPayloadValues(t,r){let a=n=>typeof n!="undefined"&&n!==null&&n!=="";return Object.keys(t).filter(n=>this.isKeyAllowedEmpty(r,n)||a(t[n])).reduce((n,o)=>Object.assign(Object.assign({},n),{[o]:t[o]}),{})}removeUnknownParameters(t){return Object.keys(t).filter(a=>{if(yw(a))return!0;console.log(a,"is not processed by coveoua")}).reduce((a,n)=>Object.assign(Object.assign({},a),{[n]:t[n]}),{})}processCustomParameters(t){let{custom:r}=t,a=er(t,["custom"]),n={};r&&iu(r)&&(n=this.lowercaseKeys(r));let o=Cw(a);return Object.assign(Object.assign({},n),o)}mapCustomParametersToCustomData(t){let{custom:r}=t,a=er(t,["custom"]);if(r&&iu(r)){let n=this.lowercaseKeys(r);return Object.assign(Object.assign({},a),{customData:Object.assign(Object.assign({},n),t.customData)})}else return t}lowercaseKeys(t){let r=Object.keys(t),a={};return r.forEach(n=>{a[n.toLowerCase()]=t[n]}),a}validateParams(t,r){let{anonymizeIp:a}=t,n=er(t,["anonymizeIp"]);return a!==void 0&&["0","false","undefined","null","{}","[]",""].indexOf(`${a}`.toLowerCase())==-1&&(n.anonymizeIp=1),(r==se.view||r==se.click||r==se.search||r==se.custom)&&(n.originLevel3=this.limit(n.originLevel3,128)),r==se.view&&(n.location=this.limit(n.location,128)),(r=="pageview"||r=="event")&&(n.referrer=this.limit(n.referrer,2048),n.location=this.limit(n.location,2048),n.page=this.limit(n.page,2048)),n}ensureAnonymousUserWhenUsingApiKey(t){let{userId:r}=t,a=er(t,["userId"]);return bw(this.options.token)&&!r?(a.userId="anonymous",a):t}setTrackingIdIfTrackingIdNotPresent(t){let{trackingId:r}=t,a=er(t,["trackingId"]);return r?t:(a.hasOwnProperty("custom")&&iu(a.custom)&&(a.custom.hasOwnProperty("context_website")||a.custom.hasOwnProperty("siteName"))&&(a.trackingId=a.custom.context_website||a.custom.siteName),a.hasOwnProperty("customData")&&iu(a.customData)&&(a.customData.hasOwnProperty("context_website")||a.customData.hasOwnProperty("siteName"))&&(a.trackingId=a.customData.context_website||a.customData.siteName),a)}limit(t,r){return typeof t!="string"?t:t.substring(0,r)}get baseUrl(){return ww(this.options.endpoint,this.options.version,this.options.isCustomEndpoint)}},$e;(function(e){e.contextChanged="contextChanged",e.expandToFullUI="expandToFullUI",e.openUserActions="openUserActions",e.showPrecedingSessions="showPrecedingSessions",e.showFollowingSessions="showFollowingSessions",e.clickViewedDocument="clickViewedDocument",e.clickPageView="clickPageView",e.createArticle="createArticle"})($e||($e={}));var v;(function(e){e.interfaceLoad="interfaceLoad",e.interfaceChange="interfaceChange",e.didyoumeanAutomatic="didyoumeanAutomatic",e.didyoumeanClick="didyoumeanClick",e.resultsSort="resultsSort",e.searchboxSubmit="searchboxSubmit",e.searchboxClear="searchboxClear",e.searchboxAsYouType="searchboxAsYouType",e.breadcrumbFacet="breadcrumbFacet",e.breadcrumbResetAll="breadcrumbResetAll",e.documentQuickview="documentQuickview",e.documentOpen="documentOpen",e.omniboxAnalytics="omniboxAnalytics",e.omniboxFromLink="omniboxFromLink",e.searchFromLink="searchFromLink",e.triggerNotify="notify",e.triggerExecute="execute",e.triggerQuery="query",e.undoTriggerQuery="undoQuery",e.triggerRedirect="redirect",e.pagerResize="pagerResize",e.pagerNumber="pagerNumber",e.pagerNext="pagerNext",e.pagerPrevious="pagerPrevious",e.pagerScrolling="pagerScrolling",e.staticFilterClearAll="staticFilterClearAll",e.staticFilterSelect="staticFilterSelect",e.staticFilterDeselect="staticFilterDeselect",e.facetClearAll="facetClearAll",e.facetSearch="facetSearch",e.facetSelect="facetSelect",e.facetSelectAll="facetSelectAll",e.facetDeselect="facetDeselect",e.facetExclude="facetExclude",e.facetUnexclude="facetUnexclude",e.facetUpdateSort="facetUpdateSort",e.facetShowMore="showMoreFacetResults",e.facetShowLess="showLessFacetResults",e.queryError="query",e.queryErrorBack="errorBack",e.queryErrorClear="errorClearQuery",e.queryErrorRetry="errorRetry",e.recommendation="recommendation",e.recommendationInterfaceLoad="recommendationInterfaceLoad",e.recommendationOpen="recommendationOpen",e.likeSmartSnippet="likeSmartSnippet",e.dislikeSmartSnippet="dislikeSmartSnippet",e.expandSmartSnippet="expandSmartSnippet",e.collapseSmartSnippet="collapseSmartSnippet",e.openSmartSnippetFeedbackModal="openSmartSnippetFeedbackModal",e.closeSmartSnippetFeedbackModal="closeSmartSnippetFeedbackModal",e.sendSmartSnippetReason="sendSmartSnippetReason",e.expandSmartSnippetSuggestion="expandSmartSnippetSuggestion",e.collapseSmartSnippetSuggestion="collapseSmartSnippetSuggestion",e.showMoreSmartSnippetSuggestion="showMoreSmartSnippetSuggestion",e.showLessSmartSnippetSuggestion="showLessSmartSnippetSuggestion",e.openSmartSnippetSource="openSmartSnippetSource",e.openSmartSnippetSuggestionSource="openSmartSnippetSuggestionSource",e.openSmartSnippetInlineLink="openSmartSnippetInlineLink",e.openSmartSnippetSuggestionInlineLink="openSmartSnippetSuggestionInlineLink",e.recentQueryClick="recentQueriesClick",e.clearRecentQueries="clearRecentQueries",e.recentResultClick="recentResultClick",e.clearRecentResults="clearRecentResults",e.noResultsBack="noResultsBack",e.showMoreFoldedResults="showMoreFoldedResults",e.showLessFoldedResults="showLessFoldedResults",e.copyToClipboard="copyToClipboard",e.caseSendEmail="Case.SendEmail",e.feedItemTextPost="FeedItem.TextPost",e.caseAttach="caseAttach",e.caseDetach="caseDetach",e.retryGeneratedAnswer="retryGeneratedAnswer",e.likeGeneratedAnswer="likeGeneratedAnswer",e.dislikeGeneratedAnswer="dislikeGeneratedAnswer",e.openGeneratedAnswerSource="openGeneratedAnswerSource",e.generatedAnswerStreamEnd="generatedAnswerStreamEnd",e.generatedAnswerSourceHover="generatedAnswerSourceHover",e.generatedAnswerCopyToClipboard="generatedAnswerCopyToClipboard",e.generatedAnswerHideAnswers="generatedAnswerHideAnswers",e.generatedAnswerShowAnswers="generatedAnswerShowAnswers",e.generatedAnswerFeedbackSubmit="generatedAnswerFeedbackSubmit",e.rephraseGeneratedAnswer="rephraseGeneratedAnswer"})(v||(v={}));var xf={[v.triggerNotify]:"queryPipelineTriggers",[v.triggerExecute]:"queryPipelineTriggers",[v.triggerQuery]:"queryPipelineTriggers",[v.triggerRedirect]:"queryPipelineTriggers",[v.queryError]:"errors",[v.queryErrorBack]:"errors",[v.queryErrorClear]:"errors",[v.queryErrorRetry]:"errors",[v.pagerNext]:"getMoreResults",[v.pagerPrevious]:"getMoreResults",[v.pagerNumber]:"getMoreResults",[v.pagerResize]:"getMoreResults",[v.pagerScrolling]:"getMoreResults",[v.facetSearch]:"facet",[v.facetShowLess]:"facet",[v.facetShowMore]:"facet",[v.recommendation]:"recommendation",[v.likeSmartSnippet]:"smartSnippet",[v.dislikeSmartSnippet]:"smartSnippet",[v.expandSmartSnippet]:"smartSnippet",[v.collapseSmartSnippet]:"smartSnippet",[v.openSmartSnippetFeedbackModal]:"smartSnippet",[v.closeSmartSnippetFeedbackModal]:"smartSnippet",[v.sendSmartSnippetReason]:"smartSnippet",[v.expandSmartSnippetSuggestion]:"smartSnippetSuggestions",[v.collapseSmartSnippetSuggestion]:"smartSnippetSuggestions",[v.showMoreSmartSnippetSuggestion]:"smartSnippetSuggestions",[v.showLessSmartSnippetSuggestion]:"smartSnippetSuggestions",[v.clearRecentQueries]:"recentQueries",[v.recentResultClick]:"recentlyClickedDocuments",[v.clearRecentResults]:"recentlyClickedDocuments",[v.showLessFoldedResults]:"folding",[v.caseDetach]:"case",[v.likeGeneratedAnswer]:"generatedAnswer",[v.dislikeGeneratedAnswer]:"generatedAnswer",[v.openGeneratedAnswerSource]:"generatedAnswer",[v.generatedAnswerStreamEnd]:"generatedAnswer",[v.generatedAnswerSourceHover]:"generatedAnswer",[v.generatedAnswerCopyToClipboard]:"generatedAnswer",[v.generatedAnswerHideAnswers]:"generatedAnswer",[v.generatedAnswerShowAnswers]:"generatedAnswer",[v.generatedAnswerFeedbackSubmit]:"generatedAnswer",[$e.expandToFullUI]:"interface",[$e.openUserActions]:"User Actions",[$e.showPrecedingSessions]:"User Actions",[$e.showFollowingSessions]:"User Actions",[$e.clickViewedDocument]:"User Actions",[$e.clickPageView]:"User Actions",[$e.createArticle]:"createArticle"},sn=class{constructor(){this.runtime=new dy,this.currentVisitorId=""}getPayload(){return Promise.resolve()}getParameters(){return Promise.resolve()}makeEvent(t){return Promise.resolve({eventType:t,payload:null,log:()=>Promise.resolve()})}sendEvent(){return Promise.resolve()}makeSearchEvent(){return this.makeEvent(se.search)}sendSearchEvent(){return Promise.resolve()}makeClickEvent(){return this.makeEvent(se.click)}sendClickEvent(){return Promise.resolve()}makeCustomEvent(){return this.makeEvent(se.custom)}sendCustomEvent(){return Promise.resolve()}makeViewEvent(){return this.makeEvent(se.view)}sendViewEvent(){return Promise.resolve()}getVisit(){return Promise.resolve({id:"",visitorId:""})}getHealth(){return Promise.resolve({status:""})}registerBeforeSendEventHook(){}registerAfterSendEventHook(){}addEventTypeMapping(){}get version(){return XS}};function Ew(e){let t="";return e.filter(r=>{let a=r!==t;return t=r,a})}function kw(e){return e.map(t=>t.replace(/;/g,""))}function my(e){let t=256,r=e.join(";");return r.length<=t?r:my(e.slice(1))}var gy=e=>{let t=kw(e),r=Ew(t);return my(r)};function hy(e){let t=typeof e.partialQueries=="string"?e.partialQueries:gy(e.partialQueries),r=typeof e.suggestions=="string"?e.suggestions:gy(e.suggestions);return Object.assign(Object.assign({},e),{partialQueries:t,suggestions:r})}var cn=class{constructor(t,r){this.opts=t,this.provider=r;let a=t.enableAnalytics===!1||Ps();this.coveoAnalyticsClient=a?new sn:new Qt(t)}disable(){this.coveoAnalyticsClient=new sn}enable(){this.coveoAnalyticsClient=new Qt(this.opts)}makeInterfaceLoad(){return this.makeSearchEvent(v.interfaceLoad)}logInterfaceLoad(){return F(this,void 0,void 0,function*(){return(yield this.makeInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendationInterfaceLoad(){return this.makeSearchEvent(v.recommendationInterfaceLoad)}logRecommendationInterfaceLoad(){return F(this,void 0,void 0,function*(){return(yield this.makeRecommendationInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendation(){return this.makeCustomEvent(v.recommendation)}logRecommendation(){return F(this,void 0,void 0,function*(){return(yield this.makeRecommendation()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendationOpen(t,r){return this.makeClickEvent(v.recommendationOpen,t,r)}logRecommendationOpen(t,r){return F(this,void 0,void 0,function*(){return(yield this.makeRecommendationOpen(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterClearAll(t){return this.makeSearchEvent(v.staticFilterClearAll,t)}logStaticFilterClearAll(t){return F(this,void 0,void 0,function*(){return(yield this.makeStaticFilterClearAll(t)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterSelect(t){return this.makeSearchEvent(v.staticFilterSelect,t)}logStaticFilterSelect(t){return F(this,void 0,void 0,function*(){return(yield this.makeStaticFilterSelect(t)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterDeselect(t){return this.makeSearchEvent(v.staticFilterDeselect,t)}logStaticFilterDeselect(t){return F(this,void 0,void 0,function*(){return(yield this.makeStaticFilterDeselect(t)).log({searchUID:this.provider.getSearchUID()})})}makeFetchMoreResults(){return this.makeCustomEvent(v.pagerScrolling,{type:"getMoreResults"})}logFetchMoreResults(){return F(this,void 0,void 0,function*(){return(yield this.makeFetchMoreResults()).log({searchUID:this.provider.getSearchUID()})})}makeInterfaceChange(t){return this.makeSearchEvent(v.interfaceChange,t)}logInterfaceChange(t){return F(this,void 0,void 0,function*(){return(yield this.makeInterfaceChange(t)).log({searchUID:this.provider.getSearchUID()})})}makeDidYouMeanAutomatic(){return this.makeSearchEvent(v.didyoumeanAutomatic)}logDidYouMeanAutomatic(){return F(this,void 0,void 0,function*(){return(yield this.makeDidYouMeanAutomatic()).log({searchUID:this.provider.getSearchUID()})})}makeDidYouMeanClick(){return this.makeSearchEvent(v.didyoumeanClick)}logDidYouMeanClick(){return F(this,void 0,void 0,function*(){return(yield this.makeDidYouMeanClick()).log({searchUID:this.provider.getSearchUID()})})}makeResultsSort(t){return this.makeSearchEvent(v.resultsSort,t)}logResultsSort(t){return F(this,void 0,void 0,function*(){return(yield this.makeResultsSort(t)).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxSubmit(){return this.makeSearchEvent(v.searchboxSubmit)}logSearchboxSubmit(){return F(this,void 0,void 0,function*(){return(yield this.makeSearchboxSubmit()).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxClear(){return this.makeSearchEvent(v.searchboxClear)}logSearchboxClear(){return F(this,void 0,void 0,function*(){return(yield this.makeSearchboxClear()).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxAsYouType(){return this.makeSearchEvent(v.searchboxAsYouType)}logSearchboxAsYouType(){return F(this,void 0,void 0,function*(){return(yield this.makeSearchboxAsYouType()).log({searchUID:this.provider.getSearchUID()})})}makeBreadcrumbFacet(t){return this.makeSearchEvent(v.breadcrumbFacet,t)}logBreadcrumbFacet(t){return F(this,void 0,void 0,function*(){return(yield this.makeBreadcrumbFacet(t)).log({searchUID:this.provider.getSearchUID()})})}makeBreadcrumbResetAll(){return this.makeSearchEvent(v.breadcrumbResetAll)}logBreadcrumbResetAll(){return F(this,void 0,void 0,function*(){return(yield this.makeBreadcrumbResetAll()).log({searchUID:this.provider.getSearchUID()})})}makeDocumentQuickview(t,r){return this.makeClickEvent(v.documentQuickview,t,r)}logDocumentQuickview(t,r){return F(this,void 0,void 0,function*(){return(yield this.makeDocumentQuickview(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeDocumentOpen(t,r){return this.makeClickEvent(v.documentOpen,t,r)}logDocumentOpen(t,r){return F(this,void 0,void 0,function*(){return(yield this.makeDocumentOpen(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeOmniboxAnalytics(t){return this.makeSearchEvent(v.omniboxAnalytics,hy(t))}logOmniboxAnalytics(t){return F(this,void 0,void 0,function*(){return(yield this.makeOmniboxAnalytics(t)).log({searchUID:this.provider.getSearchUID()})})}makeOmniboxFromLink(t){return this.makeSearchEvent(v.omniboxFromLink,hy(t))}logOmniboxFromLink(t){return F(this,void 0,void 0,function*(){return(yield this.makeOmniboxFromLink(t)).log({searchUID:this.provider.getSearchUID()})})}makeSearchFromLink(){return this.makeSearchEvent(v.searchFromLink)}logSearchFromLink(){return F(this,void 0,void 0,function*(){return(yield this.makeSearchFromLink()).log({searchUID:this.provider.getSearchUID()})})}makeTriggerNotify(t){return this.makeCustomEvent(v.triggerNotify,t)}logTriggerNotify(t){return F(this,void 0,void 0,function*(){return(yield this.makeTriggerNotify(t)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerExecute(t){return this.makeCustomEvent(v.triggerExecute,t)}logTriggerExecute(t){return F(this,void 0,void 0,function*(){return(yield this.makeTriggerExecute(t)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerQuery(){return this.makeCustomEvent(v.triggerQuery,{query:this.provider.getSearchEventRequestPayload().queryText},"queryPipelineTriggers")}logTriggerQuery(){return F(this,void 0,void 0,function*(){return(yield this.makeTriggerQuery()).log({searchUID:this.provider.getSearchUID()})})}makeUndoTriggerQuery(t){return this.makeSearchEvent(v.undoTriggerQuery,t)}logUndoTriggerQuery(t){return F(this,void 0,void 0,function*(){return(yield this.makeUndoTriggerQuery(t)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerRedirect(t){return this.makeCustomEvent(v.triggerRedirect,Object.assign(Object.assign({},t),{query:this.provider.getSearchEventRequestPayload().queryText}))}logTriggerRedirect(t){return F(this,void 0,void 0,function*(){return(yield this.makeTriggerRedirect(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerResize(t){return this.makeCustomEvent(v.pagerResize,t)}logPagerResize(t){return F(this,void 0,void 0,function*(){return(yield this.makePagerResize(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerNumber(t){return this.makeCustomEvent(v.pagerNumber,t)}logPagerNumber(t){return F(this,void 0,void 0,function*(){return(yield this.makePagerNumber(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerNext(t){return this.makeCustomEvent(v.pagerNext,t)}logPagerNext(t){return F(this,void 0,void 0,function*(){return(yield this.makePagerNext(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerPrevious(t){return this.makeCustomEvent(v.pagerPrevious,t)}logPagerPrevious(t){return F(this,void 0,void 0,function*(){return(yield this.makePagerPrevious(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerScrolling(){return this.makeCustomEvent(v.pagerScrolling)}logPagerScrolling(){return F(this,void 0,void 0,function*(){return(yield this.makePagerScrolling()).log({searchUID:this.provider.getSearchUID()})})}makeFacetClearAll(t){return this.makeSearchEvent(v.facetClearAll,t)}logFacetClearAll(t){return F(this,void 0,void 0,function*(){return(yield this.makeFacetClearAll(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSearch(t){return this.makeSearchEvent(v.facetSearch,t)}logFacetSearch(t){return F(this,void 0,void 0,function*(){return(yield this.makeFacetSearch(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSelect(t){return this.makeSearchEvent(v.facetSelect,t)}logFacetSelect(t){return F(this,void 0,void 0,function*(){return(yield this.makeFacetSelect(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetDeselect(t){return this.makeSearchEvent(v.facetDeselect,t)}logFacetDeselect(t){return F(this,void 0,void 0,function*(){return(yield this.makeFacetDeselect(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetExclude(t){return this.makeSearchEvent(v.facetExclude,t)}logFacetExclude(t){return F(this,void 0,void 0,function*(){return(yield this.makeFacetExclude(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetUnexclude(t){return this.makeSearchEvent(v.facetUnexclude,t)}logFacetUnexclude(t){return F(this,void 0,void 0,function*(){return(yield this.makeFacetUnexclude(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSelectAll(t){return this.makeSearchEvent(v.facetSelectAll,t)}logFacetSelectAll(t){return F(this,void 0,void 0,function*(){return(yield this.makeFacetSelectAll(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetUpdateSort(t){return this.makeSearchEvent(v.facetUpdateSort,t)}logFacetUpdateSort(t){return F(this,void 0,void 0,function*(){return(yield this.makeFacetUpdateSort(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetShowMore(t){return this.makeCustomEvent(v.facetShowMore,t)}logFacetShowMore(t){return F(this,void 0,void 0,function*(){return(yield this.makeFacetShowMore(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetShowLess(t){return this.makeCustomEvent(v.facetShowLess,t)}logFacetShowLess(t){return F(this,void 0,void 0,function*(){return(yield this.makeFacetShowLess(t)).log({searchUID:this.provider.getSearchUID()})})}makeQueryError(t){return this.makeCustomEvent(v.queryError,t)}logQueryError(t){return F(this,void 0,void 0,function*(){return(yield this.makeQueryError(t)).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorBack(){return F(this,void 0,void 0,function*(){let t=yield this.makeCustomEvent(v.queryErrorBack);return{description:t.description,log:()=>F(this,void 0,void 0,function*(){return yield t.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(v.queryErrorBack)})}})}logQueryErrorBack(){return F(this,void 0,void 0,function*(){return(yield this.makeQueryErrorBack()).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorRetry(){return F(this,void 0,void 0,function*(){let t=yield this.makeCustomEvent(v.queryErrorRetry);return{description:t.description,log:()=>F(this,void 0,void 0,function*(){return yield t.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(v.queryErrorRetry)})}})}logQueryErrorRetry(){return F(this,void 0,void 0,function*(){return(yield this.makeQueryErrorRetry()).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorClear(){return F(this,void 0,void 0,function*(){let t=yield this.makeCustomEvent(v.queryErrorClear);return{description:t.description,log:()=>F(this,void 0,void 0,function*(){return yield t.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(v.queryErrorClear)})}})}logQueryErrorClear(){return F(this,void 0,void 0,function*(){return(yield this.makeQueryErrorClear()).log({searchUID:this.provider.getSearchUID()})})}makeLikeSmartSnippet(){return this.makeCustomEvent(v.likeSmartSnippet)}logLikeSmartSnippet(){return F(this,void 0,void 0,function*(){return(yield this.makeLikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeDislikeSmartSnippet(){return this.makeCustomEvent(v.dislikeSmartSnippet)}logDislikeSmartSnippet(){return F(this,void 0,void 0,function*(){return(yield this.makeDislikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeExpandSmartSnippet(){return this.makeCustomEvent(v.expandSmartSnippet)}logExpandSmartSnippet(){return F(this,void 0,void 0,function*(){return(yield this.makeExpandSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeCollapseSmartSnippet(){return this.makeCustomEvent(v.collapseSmartSnippet)}logCollapseSmartSnippet(){return F(this,void 0,void 0,function*(){return(yield this.makeCollapseSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetFeedbackModal(){return this.makeCustomEvent(v.openSmartSnippetFeedbackModal)}logOpenSmartSnippetFeedbackModal(){return F(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})})}makeCloseSmartSnippetFeedbackModal(){return this.makeCustomEvent(v.closeSmartSnippetFeedbackModal)}logCloseSmartSnippetFeedbackModal(){return F(this,void 0,void 0,function*(){return(yield this.makeCloseSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})})}makeSmartSnippetFeedbackReason(t,r){return this.makeCustomEvent(v.sendSmartSnippetReason,{reason:t,details:r})}logSmartSnippetFeedbackReason(t,r){return F(this,void 0,void 0,function*(){return(yield this.makeSmartSnippetFeedbackReason(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeExpandSmartSnippetSuggestion(t){return this.makeCustomEvent(v.expandSmartSnippetSuggestion,"documentId"in t?t:{documentId:t})}logExpandSmartSnippetSuggestion(t){return F(this,void 0,void 0,function*(){return(yield this.makeExpandSmartSnippetSuggestion(t)).log({searchUID:this.provider.getSearchUID()})})}makeCollapseSmartSnippetSuggestion(t){return this.makeCustomEvent(v.collapseSmartSnippetSuggestion,"documentId"in t?t:{documentId:t})}logCollapseSmartSnippetSuggestion(t){return F(this,void 0,void 0,function*(){return(yield this.makeCollapseSmartSnippetSuggestion(t)).log({searchUID:this.provider.getSearchUID()})})}makeShowMoreSmartSnippetSuggestion(t){return this.makeCustomEvent(v.showMoreSmartSnippetSuggestion,t)}logShowMoreSmartSnippetSuggestion(t){return F(this,void 0,void 0,function*(){return(yield this.makeShowMoreSmartSnippetSuggestion(t)).log({searchUID:this.provider.getSearchUID()})})}makeShowLessSmartSnippetSuggestion(t){return this.makeCustomEvent(v.showLessSmartSnippetSuggestion,t)}logShowLessSmartSnippetSuggestion(t){return F(this,void 0,void 0,function*(){return(yield this.makeShowLessSmartSnippetSuggestion(t)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSource(t,r){return this.makeClickEvent(v.openSmartSnippetSource,t,r)}logOpenSmartSnippetSource(t,r){return F(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSource(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSuggestionSource(t,r){return this.makeClickEvent(v.openSmartSnippetSuggestionSource,t,{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},r)}makeCopyToClipboard(t,r){return this.makeClickEvent(v.copyToClipboard,t,r)}logCopyToClipboard(t,r){return F(this,void 0,void 0,function*(){return(yield this.makeCopyToClipboard(t,r)).log({searchUID:this.provider.getSearchUID()})})}logOpenSmartSnippetSuggestionSource(t,r){return F(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSuggestionSource(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetInlineLink(t,r){return this.makeClickEvent(v.openSmartSnippetInlineLink,t,{contentIDKey:r.contentIDKey,contentIDValue:r.contentIDValue},r)}logOpenSmartSnippetInlineLink(t,r){return F(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetInlineLink(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSuggestionInlineLink(t,r){return this.makeClickEvent(v.openSmartSnippetSuggestionInlineLink,t,{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},r)}logOpenSmartSnippetSuggestionInlineLink(t,r){return F(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSuggestionInlineLink(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeRecentQueryClick(){return this.makeSearchEvent(v.recentQueryClick)}logRecentQueryClick(){return F(this,void 0,void 0,function*(){return(yield this.makeRecentQueryClick()).log({searchUID:this.provider.getSearchUID()})})}makeClearRecentQueries(){return this.makeCustomEvent(v.clearRecentQueries)}logClearRecentQueries(){return F(this,void 0,void 0,function*(){return(yield this.makeClearRecentQueries()).log({searchUID:this.provider.getSearchUID()})})}makeRecentResultClick(t,r){return this.makeCustomEvent(v.recentResultClick,{info:t,identifier:r})}logRecentResultClick(t,r){return F(this,void 0,void 0,function*(){return(yield this.makeRecentResultClick(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeClearRecentResults(){return this.makeCustomEvent(v.clearRecentResults)}logClearRecentResults(){return F(this,void 0,void 0,function*(){return(yield this.makeClearRecentResults()).log({searchUID:this.provider.getSearchUID()})})}makeNoResultsBack(){return this.makeSearchEvent(v.noResultsBack)}logNoResultsBack(){return F(this,void 0,void 0,function*(){return(yield this.makeNoResultsBack()).log({searchUID:this.provider.getSearchUID()})})}makeShowMoreFoldedResults(t,r){return this.makeClickEvent(v.showMoreFoldedResults,t,r)}logShowMoreFoldedResults(t,r){return F(this,void 0,void 0,function*(){return(yield this.makeShowMoreFoldedResults(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeShowLessFoldedResults(){return this.makeCustomEvent(v.showLessFoldedResults)}logShowLessFoldedResults(){return F(this,void 0,void 0,function*(){return(yield this.makeShowLessFoldedResults()).log({searchUID:this.provider.getSearchUID()})})}makeEventDescription(t,r){var a;return{actionCause:r,customData:(a=t.payload)===null||a===void 0?void 0:a.customData}}makeCustomEvent(t,r,a=xf[t]){return F(this,void 0,void 0,function*(){this.coveoAnalyticsClient.getParameters;let n=Object.assign(Object.assign({},this.provider.getBaseMetadata()),r),o=Object.assign(Object.assign({},yield this.getBaseEventRequest(n)),{eventType:a,eventValue:t}),i=yield this.coveoAnalyticsClient.makeCustomEvent(o);return{description:this.makeEventDescription(i,t),log:({searchUID:s})=>i.log({lastSearchQueryUid:s})}})}logCustomEvent(t,r,a=xf[t]){return F(this,void 0,void 0,function*(){return(yield this.makeCustomEvent(t,r,a)).log({searchUID:this.provider.getSearchUID()})})}makeCustomEventWithType(t,r,a){return F(this,void 0,void 0,function*(){let n=Object.assign(Object.assign({},this.provider.getBaseMetadata()),a),o=Object.assign(Object.assign({},yield this.getBaseEventRequest(n)),{eventType:r,eventValue:t}),i=yield this.coveoAnalyticsClient.makeCustomEvent(o);return{description:this.makeEventDescription(i,t),log:({searchUID:s})=>i.log({lastSearchQueryUid:s})}})}logCustomEventWithType(t,r,a){return F(this,void 0,void 0,function*(){return(yield this.makeCustomEventWithType(t,r,a)).log({searchUID:this.provider.getSearchUID()})})}logSearchEvent(t,r){return F(this,void 0,void 0,function*(){return(yield this.makeSearchEvent(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeSearchEvent(t,r){return F(this,void 0,void 0,function*(){let a=yield this.getBaseSearchEventRequest(t,r),n=yield this.coveoAnalyticsClient.makeSearchEvent(a);return{description:this.makeEventDescription(n,t),log:({searchUID:o})=>n.log({searchQueryUid:o})}})}makeClickEvent(t,r,a,n){return F(this,void 0,void 0,function*(){let o=Object.assign(Object.assign(Object.assign({},r),yield this.getBaseEventRequest(Object.assign(Object.assign({},a),n))),{queryPipeline:this.provider.getPipeline(),actionCause:t}),i=yield this.coveoAnalyticsClient.makeClickEvent(o);return{description:this.makeEventDescription(i,t),log:({searchUID:s})=>i.log({searchQueryUid:s})}})}logClickEvent(t,r,a,n){return F(this,void 0,void 0,function*(){return(yield this.makeClickEvent(t,r,a,n)).log({searchUID:this.provider.getSearchUID()})})}getBaseSearchEventRequest(t,r){var a,n;return F(this,void 0,void 0,function*(){return Object.assign(Object.assign(Object.assign({},yield this.getBaseEventRequest(Object.assign(Object.assign({},r),(n=(a=this.provider).getGeneratedAnswerMetadata)===null||n===void 0?void 0:n.call(a)))),this.provider.getSearchEventRequestPayload()),{queryPipeline:this.provider.getPipeline(),actionCause:t})})}getBaseEventRequest(t){return F(this,void 0,void 0,function*(){let r=Object.assign(Object.assign({},this.provider.getBaseMetadata()),t);return Object.assign(Object.assign(Object.assign({},this.getOrigins()),this.getSplitTestRun()),{customData:r,language:this.provider.getLanguage(),facetState:this.provider.getFacetState?this.provider.getFacetState():[],anonymous:this.provider.getIsAnonymous(),clientId:yield this.getClientId()})})}getOrigins(){var t,r;return{originContext:(r=(t=this.provider).getOriginContext)===null||r===void 0?void 0:r.call(t),originLevel1:this.provider.getOriginLevel1(),originLevel2:this.provider.getOriginLevel2(),originLevel3:this.provider.getOriginLevel3()}}getClientId(){return this.coveoAnalyticsClient instanceof Qt?this.coveoAnalyticsClient.getCurrentVisitorId():void 0}getSplitTestRun(){let t=this.provider.getSplitTestRunName?this.provider.getSplitTestRunName():"",r=this.provider.getSplitTestRunVersion?this.provider.getSplitTestRunVersion():"";return Object.assign(Object.assign({},t&&{splitTestRunName:t}),r&&{splitTestRunVersion:r})}makeLikeGeneratedAnswer(t){return this.makeCustomEvent(v.likeGeneratedAnswer,t)}logLikeGeneratedAnswer(t){return F(this,void 0,void 0,function*(){return(yield this.makeLikeGeneratedAnswer(t)).log({searchUID:this.provider.getSearchUID()})})}makeDislikeGeneratedAnswer(t){return this.makeCustomEvent(v.dislikeGeneratedAnswer,t)}logDislikeGeneratedAnswer(t){return F(this,void 0,void 0,function*(){return(yield this.makeDislikeGeneratedAnswer(t)).log({searchUID:this.provider.getSearchUID()})})}makeOpenGeneratedAnswerSource(t){return this.makeCustomEvent(v.openGeneratedAnswerSource,t)}logOpenGeneratedAnswerSource(t){return F(this,void 0,void 0,function*(){return(yield this.makeOpenGeneratedAnswerSource(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerSourceHover(t){return this.makeCustomEvent(v.generatedAnswerSourceHover,t)}logGeneratedAnswerSourceHover(t){return F(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerSourceHover(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerCopyToClipboard(t){return this.makeCustomEvent(v.generatedAnswerCopyToClipboard,t)}logGeneratedAnswerCopyToClipboard(t){return F(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerCopyToClipboard(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerHideAnswers(t){return this.makeCustomEvent(v.generatedAnswerHideAnswers,t)}logGeneratedAnswerHideAnswers(t){return F(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerHideAnswers(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerShowAnswers(t){return this.makeCustomEvent(v.generatedAnswerShowAnswers,t)}logGeneratedAnswerShowAnswers(t){return F(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerShowAnswers(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerFeedbackSubmit(t){return this.makeCustomEvent(v.generatedAnswerFeedbackSubmit,t)}logGeneratedAnswerFeedbackSubmit(t){return F(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerFeedbackSubmit(t)).log({searchUID:this.provider.getSearchUID()})})}makeRephraseGeneratedAnswer(t){return this.makeSearchEvent(v.rephraseGeneratedAnswer,t)}logRephraseGeneratedAnswer(t){return F(this,void 0,void 0,function*(){return(yield this.makeRephraseGeneratedAnswer(t)).log({searchUID:this.provider.getSearchUID()})})}makeRetryGeneratedAnswer(){return this.makeSearchEvent(v.retryGeneratedAnswer)}logRetryGeneratedAnswer(){return F(this,void 0,void 0,function*(){return(yield this.makeRetryGeneratedAnswer()).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerStreamEnd(t){return this.makeCustomEvent(v.generatedAnswerStreamEnd,t)}logGeneratedAnswerStreamEnd(t){return F(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerStreamEnd(t)).log({searchUID:this.provider.getSearchUID()})})}},cu=Object.assign({},Rs),Sy=Object.keys(cu).map(e=>cu[e]),ws=class extends ey{constructor({client:t,uuidGenerator:r=on}){super({client:t,uuidGenerator:r});this.ticket={}}getApi(t){let r=super.getApi(t);if(r!==null)return r;switch(t){case"setTicket":return this.setTicket;default:return null}}addHooks(){this.addHooksForEvent(),this.addHooksForPageView(),this.addHooksForSVCEvents()}setTicket(t){this.ticket=t}clearPluginData(){this.ticket={}}addHooksForSVCEvents(){this.client.registerBeforeSendEventHook((t,...[r])=>Sy.indexOf(t)!==-1?this.addSVCDataToPayload(t,r):r),this.client.registerAfterSendEventHook((t,...[r])=>(Sy.indexOf(t)!==-1&&this.updateLocationInformation(t,r),r))}addHooksForPageView(){this.client.addEventTypeMapping(cu.pageview,{newEventType:se.collect,variableLengthArgumentsNames:["page"],addVisitorIdParameter:!0,usesMeasurementProtocol:!0})}addHooksForEvent(){this.client.addEventTypeMapping(cu.event,{newEventType:se.collect,variableLengthArgumentsNames:["eventCategory","eventAction","eventLabel","eventValue"],addVisitorIdParameter:!0,usesMeasurementProtocol:!0})}addSVCDataToPayload(t,r){var a;let n=Object.assign(Object.assign(Object.assign(Object.assign({},this.getLocationInformation(t,r)),this.getDefaultContextInformation(t)),this.action?{svcAction:this.action}:{}),Object.keys((a=this.actionData)!==null&&a!==void 0?a:{}).length>0?{svcActionData:this.actionData}:{}),o=this.getTicketPayload();return this.clearData(),Object.assign(Object.assign(Object.assign({},o),n),r)}getTicketPayload(){return MP(this.ticket)}};ws.Id="svc";var uu;(function(e){e.click="click",e.flowStart="flowStart"})(uu||(uu={}));var Bt;(function(e){e.enterInterface="ticket_create_start",e.fieldUpdate="ticket_field_update",e.fieldSuggestionClick="ticket_classification_click",e.suggestionClick="suggestion_click",e.suggestionRate="suggestion_rate",e.nextCaseStep="ticket_next_stage",e.caseCancelled="ticket_cancel",e.caseSolved="ticket_cancel",e.caseCreated="ticket_create"})(Bt||(Bt={}));var lu;(function(e){e.quit="Quit",e.solved="Solved"})(lu||(lu={}));var vf=class{constructor(t,r){var a;this.options=t,this.provider=r;let n=((a=t.enableAnalytics)!==null&&a!==void 0?a:!0)&&!Ps();this.coveoAnalyticsClient=n?new Qt(t):new sn,this.svc=new ws({client:this.coveoAnalyticsClient})}disable(){this.coveoAnalyticsClient=new sn,this.svc=new ws({client:this.coveoAnalyticsClient})}enable(){this.coveoAnalyticsClient=new Qt(this.options),this.svc=new ws({client:this.coveoAnalyticsClient})}logEnterInterface(t){return this.svc.setAction(Bt.enterInterface),this.svc.setTicket(t.ticket),this.sendFlowStartEvent()}logUpdateCaseField(t){return this.svc.setAction(Bt.fieldUpdate,{fieldName:t.fieldName}),this.svc.setTicket(t.ticket),this.sendClickEvent()}logSelectFieldSuggestion(t){return this.svc.setAction(Bt.fieldSuggestionClick,t.suggestion),this.svc.setTicket(t.ticket),this.sendClickEvent()}logSelectDocumentSuggestion(t){return this.svc.setAction(Bt.suggestionClick,t.suggestion),this.svc.setTicket(t.ticket),this.sendClickEvent()}logRateDocumentSuggestion(t){return this.svc.setAction(Bt.suggestionRate,Object.assign({rate:t.rating},t.suggestion)),this.svc.setTicket(t.ticket),this.sendClickEvent()}logMoveToNextCaseStep(t){return this.svc.setAction(Bt.nextCaseStep,{stage:t==null?void 0:t.stage}),this.svc.setTicket(t.ticket),this.sendClickEvent()}logCaseCancelled(t){return this.svc.setAction(Bt.caseCancelled,{reason:lu.quit}),this.svc.setTicket(t.ticket),this.sendClickEvent()}logCaseSolved(t){return this.svc.setAction(Bt.caseSolved,{reason:lu.solved}),this.svc.setTicket(t.ticket),this.sendClickEvent()}logCaseCreated(t){return this.svc.setAction(Bt.caseCreated),this.svc.setTicket(t.ticket),this.sendClickEvent()}sendFlowStartEvent(){return this.coveoAnalyticsClient.sendEvent("event","svc",uu.flowStart,this.provider?{searchHub:this.provider.getOriginLevel1()}:null)}sendClickEvent(){return this.coveoAnalyticsClient.sendEvent("event","svc",uu.click,this.provider?{searchHub:this.provider.getOriginLevel1()}:null)}},Ow=e=>{let t={};return e.caseContext&&Object.keys(e.caseContext).forEach(r=>{var a;let n=(a=e.caseContext)===null||a===void 0?void 0:a[r];if(n){let o=`context_${r}`;t[o]=n}}),t},G=(e,t=!0)=>{let{caseContext:r,caseId:a,caseNumber:n}=e,o=er(e,["caseContext","caseId","caseNumber"]),i=Ow(e);return Object.assign(Object.assign(Object.assign({CaseId:a,CaseNumber:n},o),!!i.context_Case_Subject&&{CaseSubject:i.context_Case_Subject}),t&&i)},Af=class{constructor(t,r){this.opts=t,this.provider=r;let a=t.enableAnalytics===!1||Ps();this.coveoAnalyticsClient=a?new sn:new Qt(t)}disable(){this.coveoAnalyticsClient=new sn}enable(){this.coveoAnalyticsClient=new Qt(this.opts)}logInterfaceLoad(t){if(t){let r=G(t);return this.logSearchEvent(v.interfaceLoad,r)}return this.logSearchEvent(v.interfaceLoad)}logInterfaceChange(t){let r=G(t);return this.logSearchEvent(v.interfaceChange,r)}logStaticFilterDeselect(t){let r=G(t);return this.logSearchEvent(v.staticFilterDeselect,r)}logFetchMoreResults(t){if(t){let r=G(t);return this.logCustomEvent(v.pagerScrolling,Object.assign(Object.assign({},r),{type:"getMoreResults"}))}return this.logCustomEvent(v.pagerScrolling,{type:"getMoreResults"})}logBreadcrumbFacet(t){let r=G(t);return this.logSearchEvent(v.breadcrumbFacet,r)}logBreadcrumbResetAll(t){if(t){let r=G(t);return this.logSearchEvent(v.breadcrumbResetAll,r)}return this.logSearchEvent(v.breadcrumbResetAll)}logFacetSelect(t){let r=G(t);return this.logSearchEvent(v.facetSelect,r)}logFacetExclude(t){let r=G(t);return this.logSearchEvent(v.facetExclude,r)}logFacetDeselect(t){let r=G(t);return this.logSearchEvent(v.facetDeselect,r)}logFacetUpdateSort(t){let r=G(t);return this.logSearchEvent(v.facetUpdateSort,r)}logFacetClearAll(t){let r=G(t);return this.logSearchEvent(v.facetClearAll,r)}logFacetShowMore(t){let r=G(t,!1);return this.logCustomEvent(v.facetShowMore,r)}logFacetShowLess(t){let r=G(t,!1);return this.logCustomEvent(v.facetShowLess,r)}logQueryError(t){let r=G(t,!1);return this.logCustomEvent(v.queryError,r)}logPagerNumber(t){let r=G(t,!1);return this.logCustomEvent(v.pagerNumber,r)}logPagerNext(t){let r=G(t,!1);return this.logCustomEvent(v.pagerNext,r)}logPagerPrevious(t){let r=G(t,!1);return this.logCustomEvent(v.pagerPrevious,r)}logDidYouMeanAutomatic(t){if(t){let r=G(t);return this.logSearchEvent(v.didyoumeanAutomatic,r)}return this.logSearchEvent(v.didyoumeanAutomatic)}logDidYouMeanClick(t){if(t){let r=G(t);return this.logSearchEvent(v.didyoumeanClick,r)}return this.logSearchEvent(v.didyoumeanClick)}logResultsSort(t){let r=G(t);return this.logSearchEvent(v.resultsSort,r)}logSearchboxSubmit(t){if(t){let r=G(t);return this.logSearchEvent(v.searchboxSubmit,r)}return this.logSearchEvent(v.searchboxSubmit)}logContextChanged(t){let r=G(t);return this.logSearchEvent($e.contextChanged,r)}logExpandToFullUI(t){let r=G(t);return this.logCustomEvent($e.expandToFullUI,r)}logOpenUserActions(t){let r=G(t,!1);return this.logCustomEvent($e.openUserActions,r)}logShowPrecedingSessions(t){let r=G(t,!1);return this.logCustomEvent($e.showPrecedingSessions,r)}logShowFollowingSessions(t){let r=G(t,!1);return this.logCustomEvent($e.showFollowingSessions,r)}logViewedDocumentClick(t,r){return this.logCustomEvent($e.clickViewedDocument,Object.assign(Object.assign({},G(r,!1)),{document:t}))}logPageViewClick(t,r){return this.logCustomEvent($e.clickPageView,Object.assign(Object.assign({},G(r,!1)),{pageView:t}))}logCreateArticle(t,r){return this.logCustomEvent($e.createArticle,r?Object.assign(Object.assign({},G(r,!1)),t):t)}logDocumentOpen(t,r,a){return this.logClickEvent(v.documentOpen,t,r,a?G(a,!1):void 0)}logCopyToClipboard(t,r,a){return this.logClickEvent(v.copyToClipboard,t,r,a?G(a,!1):void 0)}logCaseSendEmail(t,r,a){return this.logClickEvent(v.caseSendEmail,t,r,a?G(a,!1):void 0)}logFeedItemTextPost(t,r,a){return this.logClickEvent(v.feedItemTextPost,t,r,a?G(a,!1):void 0)}logDocumentQuickview(t,r,a){let n={documentTitle:t.documentTitle,documentURL:t.documentUrl};return this.logClickEvent(v.documentQuickview,t,r,a?Object.assign(Object.assign({},G(a,!1)),n):n)}logCaseAttach(t,r,a){let n={documentTitle:t.documentTitle,documentURL:t.documentUrl,resultUriHash:t.documentUriHash};return this.logClickEvent(v.caseAttach,t,r,a?Object.assign(Object.assign({},G(a,!1)),n):n)}logCaseDetach(t,r){return this.logCustomEvent(v.caseDetach,r?Object.assign(Object.assign({},G(r,!1)),{resultUriHash:t}):{resultUriHash:t})}logLikeSmartSnippet(t){return this.logCustomEvent(v.likeSmartSnippet,t?G(t,!1):void 0)}logDislikeSmartSnippet(t){return this.logCustomEvent(v.dislikeSmartSnippet,t?G(t,!1):void 0)}logExpandSmartSnippet(t){return this.logCustomEvent(v.expandSmartSnippet,t?G(t,!1):void 0)}logCollapseSmartSnippet(t){return this.logCustomEvent(v.collapseSmartSnippet,t?G(t,!1):void 0)}logOpenSmartSnippetFeedbackModal(t){return this.logCustomEvent(v.openSmartSnippetFeedbackModal,t?G(t,!1):void 0)}logCloseSmartSnippetFeedbackModal(t){return this.logCustomEvent(v.closeSmartSnippetFeedbackModal,t?G(t,!1):void 0)}logSmartSnippetFeedbackReason(t,r,a){return this.logCustomEvent(v.sendSmartSnippetReason,a?Object.assign(Object.assign({},G(a,!1)),{reason:t,details:r}):{reason:t,details:r})}logExpandSmartSnippetSuggestion(t,r){let a="documentId"in t?t:{documentId:t};return this.logCustomEvent(v.expandSmartSnippetSuggestion,r?Object.assign(Object.assign({},G(r,!1)),a):a)}logCollapseSmartSnippetSuggestion(t,r){let a="documentId"in t?t:{documentId:t};return this.logCustomEvent(v.collapseSmartSnippetSuggestion,r?Object.assign(Object.assign({},G(r,!1)),a):a)}logOpenSmartSnippetSource(t,r,a){return this.logClickEvent(v.openSmartSnippetSource,t,r,a?G(a,!1):void 0)}logOpenSmartSnippetSuggestionSource(t,r,a){return this.logClickEvent(v.openSmartSnippetSuggestionSource,t,{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},a?Object.assign(Object.assign({},G(a,!1)),r):r)}logOpenSmartSnippetInlineLink(t,r,a){return this.logClickEvent(v.openSmartSnippetInlineLink,t,{contentIDKey:r.contentIDKey,contentIDValue:r.contentIDValue},a?Object.assign(Object.assign({},G(a,!1)),r):r)}logOpenSmartSnippetSuggestionInlineLink(t,r,a){return this.logClickEvent(v.openSmartSnippetSuggestionInlineLink,t,{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},a?Object.assign(Object.assign({},G(a,!1)),r):r)}logLikeGeneratedAnswer(t,r){return this.logCustomEvent(v.likeGeneratedAnswer,r?Object.assign(Object.assign({},G(r,!1)),t):t)}logDislikeGeneratedAnswer(t,r){return this.logCustomEvent(v.dislikeGeneratedAnswer,r?Object.assign(Object.assign({},G(r,!1)),t):t)}logOpenGeneratedAnswerSource(t,r){return this.logCustomEvent(v.openGeneratedAnswerSource,r?Object.assign(Object.assign({},G(r,!1)),t):t)}logGeneratedAnswerSourceHover(t,r){return this.logCustomEvent(v.generatedAnswerSourceHover,r?Object.assign(Object.assign({},G(r,!1)),t):t)}logGeneratedAnswerCopyToClipboard(t,r){return this.logCustomEvent(v.generatedAnswerCopyToClipboard,r?Object.assign(Object.assign({},G(r,!1)),t):t)}logGeneratedAnswerHideAnswers(t,r){return this.logCustomEvent(v.generatedAnswerHideAnswers,r?Object.assign(Object.assign({},G(r,!1)),t):t)}logGeneratedAnswerShowAnswers(t,r){return this.logCustomEvent(v.generatedAnswerShowAnswers,r?Object.assign(Object.assign({},G(r,!1)),t):t)}logGeneratedAnswerFeedbackSubmit(t,r){return this.logCustomEvent(v.generatedAnswerFeedbackSubmit,r?Object.assign(Object.assign({},G(r,!1)),t):t)}logRephraseGeneratedAnswer(t,r){return this.logSearchEvent(v.rephraseGeneratedAnswer,r?Object.assign(Object.assign({},G(r,!1)),t):t)}logRetryGeneratedAnswer(t){return this.logSearchEvent(v.retryGeneratedAnswer,t?Object.assign({},G(t,!1)):{})}logGeneratedAnswerStreamEnd(t,r){return this.logCustomEvent(v.generatedAnswerStreamEnd,r?Object.assign(Object.assign({},G(r,!1)),t):t)}logCustomEvent(t,r){return F(this,void 0,void 0,function*(){let a=Object.assign(Object.assign({},this.provider.getBaseMetadata()),r),n=Object.assign(Object.assign({},yield this.getBaseCustomEventRequest(a)),{eventType:xf[t],eventValue:t});return this.coveoAnalyticsClient.sendCustomEvent(n)})}logSearchEvent(t,r){return F(this,void 0,void 0,function*(){return this.coveoAnalyticsClient.sendSearchEvent(yield this.getBaseSearchEventRequest(t,r))})}logClickEvent(t,r,a,n){return F(this,void 0,void 0,function*(){let o=Object.assign(Object.assign(Object.assign({},r),yield this.getBaseEventRequest(Object.assign(Object.assign({},a),n))),{searchQueryUid:this.provider.getSearchUID(),queryPipeline:this.provider.getPipeline(),actionCause:t});return this.coveoAnalyticsClient.sendClickEvent(o)})}logShowMoreFoldedResults(t,r,a){return F(this,void 0,void 0,function*(){return this.logClickEvent(v.showMoreFoldedResults,t,r,a?G(a,!1):void 0)})}logShowLessFoldedResults(t){return F(this,void 0,void 0,function*(){return this.logCustomEvent(v.showLessFoldedResults,t?G(t,!1):void 0)})}getBaseCustomEventRequest(t){return F(this,void 0,void 0,function*(){return Object.assign(Object.assign({},yield this.getBaseEventRequest(t)),{lastSearchQueryUid:this.provider.getSearchUID()})})}getBaseSearchEventRequest(t,r){var a,n;return F(this,void 0,void 0,function*(){return Object.assign(Object.assign(Object.assign({},yield this.getBaseEventRequest(Object.assign(Object.assign({},r),(n=(a=this.provider).getGeneratedAnswerMetadata)===null||n===void 0?void 0:n.call(a)))),this.provider.getSearchEventRequestPayload()),{searchQueryUid:this.provider.getSearchUID(),queryPipeline:this.provider.getPipeline(),actionCause:t})})}getBaseEventRequest(t){return F(this,void 0,void 0,function*(){let r=Object.assign(Object.assign({},this.provider.getBaseMetadata()),t);return Object.assign(Object.assign({},this.getOrigins()),{customData:r,language:this.provider.getLanguage(),facetState:this.provider.getFacetState?this.provider.getFacetState():[],anonymous:this.provider.getIsAnonymous(),clientId:yield this.getClientId()})})}getOrigins(){var t,r;return{originContext:(r=(t=this.provider).getOriginContext)===null||r===void 0?void 0:r.call(t),originLevel1:this.provider.getOriginLevel1(),originLevel2:this.provider.getOriginLevel2(),originLevel3:this.provider.getOriginLevel3()}}getClientId(){return this.coveoAnalyticsClient instanceof Qt?this.coveoAnalyticsClient.getCurrentVisitorId():void 0}};var rr=(e,t)=>{let r=a=>a.facetId===t;if("productListing"in e&&e.productListing&&"facets"in e.productListing&&"results"in e.productListing.facets)return e.productListing.facets.results.find(r);if("search"in e&&e.search)return e.search.response.facets.find(r)},bf=(e,t)=>{var r;return(r=e.facetSet[t])==null?void 0:r.request};function qw(e,t){return!!t&&t.facetId in e.facetSet}var Is=(e,t)=>{let r=rr(e,t);if(qw(e,r))return r},Tw=(e,t)=>{let r=Is(e,t);return r?r.values.filter(a=>a.state==="selected"):[]},yy=(e,t)=>{let r=Is(e,t);return r?r.values.filter(a=>a.state!=="idle"):[]},ar=e=>"productListing"in e?e.productListing.isLoading:e.search.isLoading;function Cy(e){if(!e)return{parents:[],values:[]};let t=[],r=e;for(;r.length&&r[0].children.length;)t=[...t,...r],r=r[0].children;let a=r.find(n=>n.state==="selected");return a&&(t=[...t,a],r=[]),{parents:t,values:r}}function gt(e){let{activeValue:t,ancestryMap:r}=Dw(e);return t?Vw(t,r):[]}function Dw(e){let t=[...e],r=new Map;for(;t.length>0;){let a=t.shift();if(a.state==="selected")return{activeValue:a,ancestryMap:r};if(r)for(let n of a.children)r.set(n,a);t.unshift(...a.children)}return{}}function Vw(e,t){let r=[];if(!e)return[];let a=e;do r.unshift(a),a=t.get(a);while(a);return r}function Mw(e,t){return!!t&&t.facetId in e.categoryFacetSet}var Ff=(e,t)=>{let r=rr(e,t);if(Mw(e,r))return r},Rf=(e,t)=>{var r;return(r=e.categoryFacetSet[t])==null?void 0:r.request},xy=(e,t)=>{var a;let r=Ff(e,t);return gt((a=r==null?void 0:r.values)!=null?a:[])},Pf=(e,t)=>{var a;let r=Rf(e,t);return gt((a=r==null?void 0:r.currentValues)!=null?a:[])};var to=(e,t)=>{let r=Fy(t,e),a=r?r.field:"",n=wf(a,e);return{facetId:e,facetField:a,facetTitle:n}};function ro(e,t){let{facetId:r,facetValue:a}=e,n=to(r,t),o=Ry(t,r);return{...n,facetValue:o==="hierarchical"?by(t,r):a}}function ct(e){var t,r,a,n,o;return{facetSet:(t=e.facetSet)!=null?t:Kt(),categoryFacetSet:(r=e.categoryFacetSet)!=null?r:Yt(),dateFacetSet:(a=e.dateFacetSet)!=null?a:Jt(),numericFacetSet:(n=e.numericFacetSet)!=null?n:Xt(),automaticFacetSet:(o=e.automaticFacetSet)!=null?o:ha()}}var du=e=>{let t=[];return Qw(e).forEach((r,a)=>{let n=Ry(e,r.facetId),o=$w(r,a+1);if(Nw(r)){if(!!!Pf(e,r.facetId).length)return;t.push({...o,...Uw(e,r.facetId),facetType:n,state:"selected"});return}r.currentValues.forEach((i,s)=>{if(i.state==="idle")return;let c=vy(i,s+1,n),u=Lw(r)?Ay(i):jw(i);t.push({...o,...c,...u})})}),Bw(e).forEach((r,a)=>{let n=_w(r,a+1);r.values.forEach((o,i)=>{if(o.state==="idle")return;let s=vy(o,i+1,"specific"),c=Ay(o);t.push({...n,...s,...c})})}),t},Lw=e=>e.type==="specific",Nw=e=>e.type==="hierarchical",Qw=e=>[...Object.values(e.facetSet),...Object.values(e.categoryFacetSet),...Object.values(e.dateFacetSet),...Object.values(e.numericFacetSet)].map(t=>t.request),Bw=e=>[...Object.values(e.automaticFacetSet.set)].map(t=>t.response),vy=(e,t,r)=>({state:e.state,valuePosition:t,facetType:r}),jw=e=>({displayValue:`${e.start}..${e.end}`,value:`${e.start}..${e.end}`,start:e.start,end:e.end,endInclusive:e.endInclusive}),Ay=e=>({displayValue:e.value,value:e.value}),by=(e,t)=>Pf(e,t).map(a=>a.value).join(";"),Uw=(e,t)=>{let r=1,a=by(e,t);return{value:a,valuePosition:r,displayValue:a}},_w=(e,t)=>({title:wf(e.field,e.field),field:e.field,id:e.field,facetPosition:t}),$w=(e,t)=>({title:wf(e.field,e.facetId),field:e.field,id:e.facetId,facetPosition:t}),wf=(e,t)=>`${e}_${t}`,Fy=(e,t)=>{var r,a,n,o,i;return((r=e.facetSet[t])==null?void 0:r.request)||((a=e.categoryFacetSet[t])==null?void 0:a.request)||((n=e.dateFacetSet[t])==null?void 0:n.request)||((o=e.numericFacetSet[t])==null?void 0:o.request)||((i=e.automaticFacetSet.set[t])==null?void 0:i.response)},Ry=(e,t)=>{let r=Fy(e,t);return r?r.type:"specific"};var un="2.52.0",Py=["@coveo/atomic","@coveo/quantic"];var Hw=e=>{let t=e.configuration.search.locale.split("-")[0];return!t||t.length!==2?"en":t},Gr=class{constructor(t){this.getState=t;this.state=t()}getLanguage(){return Hw(this.state)}getBaseMetadata(){let{context:t,configuration:r}=this.state,a=(t==null?void 0:t.contextValues)||{},n={};for(let[o,i]of Object.entries(a)){let s=`context_${o}`;n[s]=i}return r.analytics.analyticsMode==="legacy"&&(n.coveoHeadlessVersion=un),n}getOriginContext(){return this.state.configuration.analytics.originContext}getOriginLevel1(){return this.state.searchHub||Ge()}getOriginLevel2(){return this.state.configuration.analytics.originLevel2}getOriginLevel3(){return this.state.configuration.analytics.originLevel3}getIsAnonymous(){return this.state.configuration.analytics.anonymous}};var We=e=>new Qt(e).getCurrentVisitorId(),vt=new WS.HistoryStore,nr=(e,t)=>typeof t=="function"?(...r)=>{let a=ms(r[0]);try{return t.apply(t,r)}catch(n){return e.error(n,"Error in analytics preprocessRequest. Returning original request."),a}}:void 0,or=(e,t)=>(...r)=>{let a=ms(r[1]);try{return t.apply(t,r)}catch(n){return e.error(n,"Error in analytics hook. Returning original request."),a}};var pu=class extends Gr{constructor(){super(...arguments);this.getFacetRequest=t=>{var r,a,n,o,i,s,c,u,l,d;return((a=(r=this.state.facetSet)==null?void 0:r[t])==null?void 0:a.request)||((o=(n=this.state.categoryFacetSet)==null?void 0:n[t])==null?void 0:o.request)||((s=(i=this.state.dateFacetSet)==null?void 0:i[t])==null?void 0:s.request)||((u=(c=this.state.numericFacetSet)==null?void 0:c[t])==null?void 0:u.request)||((d=(l=this.state.automaticFacetSet)==null?void 0:l.set[t])==null?void 0:d.response)}}getFacetState(){return du(ct(this.getState()))}getPipeline(){var t;return this.state.pipeline||((t=this.state.search)==null?void 0:t.response.pipeline)||pu.fallbackPipelineName}getSearchEventRequestPayload(){return{queryText:this.queryText,responseTime:this.responseTime,results:this.resultURIs,numberOfResults:this.numberOfResults}}getSearchUID(){var r,a;let t=this.getState();return((r=t.search)==null?void 0:r.searchResponseId)||((a=t.search)==null?void 0:a.response.searchUid)||Te().response.searchUid}getSplitTestRunName(){var t;return(t=this.state.search)==null?void 0:t.response.splitTestRun}getSplitTestRunVersion(){var a;let t=!!this.getSplitTestRunName(),r=((a=this.state.search)==null?void 0:a.response.pipeline)||this.state.pipeline||pu.fallbackPipelineName;return t?r:void 0}getBaseMetadata(){var n,o,i;let t=this.getState(),r=super.getBaseMetadata(),a=(i=(o=(n=t.search)==null?void 0:n.response)==null?void 0:o.extendedResults)==null?void 0:i.generativeQuestionAnsweringId;return a&&(r.generativeQuestionAnsweringId=a),r}getFacetMetadata(t,r){var o;let a=this.getFacetRequest(t),n=(o=a==null?void 0:a.field)!=null?o:"";return{...this.getBaseMetadata(),facetId:t,facetField:n,facetValue:r,facetTitle:`${n}_${t}`}}getFacetClearAllMetadata(t){var n;let r=this.getFacetRequest(t),a=(n=r==null?void 0:r.field)!=null?n:"";return{...this.getBaseMetadata(),facetId:t,facetField:a,facetTitle:`${a}_${t}`}}getFacetUpdateSortMetadata(t,r){var o;let a=this.getFacetRequest(t),n=(o=a==null?void 0:a.field)!=null?o:"";return{...this.getBaseMetadata(),facetId:t,facetField:n,criteria:r,facetTitle:`${n}_${t}`}}getRangeBreadcrumbFacetMetadata(t,r){var o;let a=this.getFacetRequest(t),n=(o=a==null?void 0:a.field)!=null?o:"";return{...this.getBaseMetadata(),facetId:t,facetField:n,facetRangeEnd:r.end,facetRangeEndInclusive:r.endInclusive,facetRangeStart:r.start,facetTitle:`${n}_${t}`}}getResultSortMetadata(){var t;return{...this.getBaseMetadata(),resultsSortBy:(t=this.state.sortCriteria)!=null?t:tt()}}getStaticFilterToggleMetadata(t,r){return{...this.getBaseMetadata(),staticFilterId:t,staticFilterValue:r}}getStaticFilterClearAllMetadata(t){return{...this.getBaseMetadata(),staticFilterId:t}}getUndoTriggerQueryMetadata(t){return{...this.getBaseMetadata(),undoneQuery:t}}getCategoryBreadcrumbFacetMetadata(t,r){var o;let a=this.getFacetRequest(t),n=(o=a==null?void 0:a.field)!=null?o:"";return{...this.getBaseMetadata(),categoryFacetId:t,categoryFacetField:n,categoryFacetPath:r,categoryFacetTitle:`${n}_${t}`}}getOmniboxAnalyticsMetadata(t,r){let a=this.state.querySuggest&&this.state.querySuggest[t],n=a.completions.map(c=>c.expression),o=a.partialQueries.length-1,i=a.partialQueries[o]||"",s=a.responseId;return{...this.getBaseMetadata(),suggestionRanking:n.indexOf(r),partialQuery:i,partialQueries:a.partialQueries.length>0?a.partialQueries:"",suggestions:n.length>0?n:"",querySuggestResponseId:s}}getInterfaceChangeMetadata(){return{...this.getBaseMetadata(),interfaceChangeTo:this.state.configuration.analytics.originLevel2}}getOmniboxFromLinkMetadata(t){return{...this.getBaseMetadata(),...t}}getGeneratedAnswerMetadata(){var a;let t=this.getState(),r={};return((a=t.generatedAnswer)==null?void 0:a.isVisible)!==void 0&&(r.showGeneratedAnswer=t.generatedAnswer.isVisible),r}get resultURIs(){var t;return(t=this.results)==null?void 0:t.map(r=>({documentUri:r.uri,documentUriHash:r.raw.urihash}))}get results(){var t;return(t=this.state.search)==null?void 0:t.response.results}get queryText(){var t;return((t=this.state.query)==null?void 0:t.q)||xe().q}get responseTime(){var t;return((t=this.state.search)==null?void 0:t.duration)||Te().duration}get numberOfResults(){var t;return((t=this.state.search)==null?void 0:t.response.totalCountFiltered)||Te().response.totalCountFiltered}},ae=pu;ae.fallbackPipelineName="default";var wy=({logger:e,getState:t,analyticsClientMiddleware:r=(o,i)=>i,preprocessRequest:a,provider:n=new ae(t)})=>{let o=t(),i=o.configuration.accessToken,s=o.configuration.analytics.apiBaseUrl,c=o.configuration.analytics.runtimeEnvironment,u=o.configuration.analytics.enabled,l=new cn({token:i,endpoint:s,runtimeEnvironment:c,preprocessRequest:nr(e,a),beforeSendHooks:[or(e,r),(d,p)=>(e.info({...p,type:d,endpoint:s,token:i},"Analytics request"),p)]},n);return u||l.disable(),l},If=()=>{let t=vt.getHistory().reverse().find(r=>r.name==="PageView"&&r.value);return t?t.value:""};function Gw({config:e,environment:t,event:r,listenerManager:a}){let{url:n,token:o,mode:i}=e;i!=="disabled"&&(a.call(r),t.send(n,o,r))}var zw=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Ww(e){return typeof e=="string"&&zw.test(e)}function Yw(e){let t="visitorId";return{getClientId:()=>{let r=e.get(),a=r.storage,n=a.getItem(t),o=n&&Ww(n)?n:r.generateUUID();return a.setItem(t,o),o},clear:()=>{e.get().storage.removeItem(t)}}}var Iy="0.7.4";function Kw(e){let{trackingId:t}=e;return{trackingId:t,user:null}}function Jw(e){return(e.source||[]).concat([`relay@${Iy}`])}function Ey(e,t,r,a){let{getReferrer:n,getLocation:o,getUserAgent:i}=r,s=Kw(t),c=a.getClientId();return Object.freeze({type:e,config:s,ts:Date.now(),source:Jw(t),clientId:c,userAgent:i(),referrer:n(),location:o()})}function Xw(e,t,r,a,n){return{...t,meta:Ey(e,r,a,n)}}var Zw="*";function eI(){let e=[];function t({type:c,callback:u}){return e.findIndex(l=>l.type===c&&l.callback===u)}function r(c,u){return c.type==="*"||u===c.type}function a(c){return t(c)<0&&e.push(c),()=>s(c.type,c.callback)}function n(c){e.forEach(u=>{if(r(u,c.meta.type))try{u.callback(c)}catch(l){console.error(l)}})}function o(c){if(c===Zw)e.length=0;else for(let u=e.length-1;u>=0;u--)e[u].type===c&&e.splice(u,1)}function i(c){let u=t(c);u>=0&&e.splice(u,1)}function s(c,u){u?i({type:c,callback:u}):o(c)}return{add:a,call:n,remove:s}}function ky({url:e,token:t,trackingId:r,...a}){return Object.freeze({url:e,token:t,trackingId:r,...!!a.mode&&{mode:a.mode},...!!a.source&&{source:a.source}})}function tI(e){let t=ky(e);return{get:()=>t,update:r=>{t=ky({...t,...r})}}}function rI(){let e=typeof window!="undefined";return{sendMessage(t){e&&window.postMessage(t,"*")}}}var Ef=aI();function aI(){let e="coveo_",t=r=>{let a=r.split(".").slice(-2);return a.length==2?a.join("."):""};return{getItem(r){let a=`${e}${r}=`,n=document.cookie.split(";");for(let o of n){let i=o.replace(/^\s+/,"");if(i.lastIndexOf(a,0)===0)return i.substring(a.length,i.length)}return null},setItem(r,a,n){let o=t(window.location.hostname),i=`;expires=${new Date(new Date().getTime()+n).toUTCString()}`,s=o?`;domain=${o}`:"";document.cookie=`${e}${r}=${a}${i}${s};path=/;SameSite=Lax`},removeItem(r){this.setItem(r,"",-1)}}}function nI(){return{getItem(e){return Ef.getItem(e)||localStorage.getItem(e)},removeItem(e){Ef.removeItem(e),localStorage.removeItem(e)},setItem(e,t){let r=31556952e3;localStorage.setItem(e,t),Ef.setItem(e,t,r)}}}function oI(){let e=document.referrer;return e===""?null:e}function iI(){return{runtime:"browser",send:(e,t,r)=>{let a=navigator.sendBeacon(`${e}?access_token=${t}`,new Blob([JSON.stringify([r])],{type:"application/json"}));if(rI().sendMessage({kind:"EVENT_PROTOCOL",event:r,url:e,token:t}),!a)throw new Error("Failed to send the event(s) because the payload size exceeded the maximum allowed size (32 KB). Please contact support if the problem persists.")},getReferrer:()=>oI(),getLocation:()=>window.location.href,getUserAgent:()=>navigator.userAgent,generateUUID:()=>crypto.randomUUID(),storage:nI()}}function sI(){return{getItem(){return null},removeItem(){},setItem(){}}}function cI(){return{runtime:"null",send:()=>{},getReferrer:()=>null,getLocation:()=>null,getUserAgent:()=>null,generateUUID:()=>"",storage:sI()}}function uI(e){return e.get().mode!=="disabled"&&lI()?iI():cI()}function lI(){try{return typeof window=="object"}catch{return!1}}function dI(e){return{get:()=>Object.freeze(uI(e))}}function Oy(e){let t=tI(e),r=eI(),a=dI(t),n=Yw(a);return{emit:(o,i)=>{let s=t.get(),c=a.get(),u=Xw(o,i,s,c,n);return Gw({config:s,environment:c,event:u,listenerManager:r})},getMeta:o=>Ey(o,t.get(),a.get(),n),on:(o,i)=>r.add({type:o,callback:i}),off:(o,i)=>r.remove(o,i),updateConfig:o=>t.update(o),version:Iy,clearStorage:()=>{n.clear()}}}var fu=sa(e=>e.source,e=>[`@coveo/headless@${un}`].concat(Object.entries(e).map(([t,r])=>`${t}@${r}`)));var mu=sa(e=>e.configuration.accessToken,e=>e.configuration.analytics,e=>fu(e.configuration.analytics),(e,{trackingId:t,nextApiBaseUrl:r},a)=>Oy({url:r,token:e,trackingId:t,source:a}));var gu=class{constructor(t){this.state=t()}getSearchUID(){return null}getOriginLevel1(){return this.state.searchHub||Ge()}},qy=({logger:e,getState:t,analyticsClientMiddleware:r=(o,i)=>i,preprocessRequest:a,provider:n=new gu(t)})=>{let o=t(),i=o.configuration.accessToken,s=o.configuration.analytics.apiBaseUrl,c=o.configuration.analytics.runtimeEnvironment,u=o.configuration.analytics.enabled,l=new vf({enableAnalytics:u,token:i,endpoint:s,runtimeEnvironment:c,preprocessRequest:nr(e,a),beforeSendHooks:[or(e,r),(d,p)=>(e.info({...p,type:d,endpoint:s,token:i},"Analytics request"),p)]},n);return u||l.disable(),l};var ao=class extends Gr{constructor(){super(...arguments);this.initialState=vs()}getPipeline(){return""}getSearchEventRequestPayload(){return{queryText:"",responseTime:0,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getSearchUID(){var r;return((r=this.getState().productListing)==null?void 0:r.responseId)||this.initialState.responseId}mapResultsToAnalyticsDocument(){var t;return(t=this.state.productListing)==null?void 0:t.products.map(r=>({documentUri:r.documentUri,documentUriHash:r.documentUriHash,permanentid:r.permanentid}))}get numberOfResults(){return this.state.productListing.products.length}},Ty=({logger:e,getState:t,analyticsClientMiddleware:r=(o,i)=>i,preprocessRequest:a,provider:n=new ao(t)})=>{let o=t(),i=o.configuration.accessToken,s=o.configuration.analytics.apiBaseUrl,c=o.configuration.analytics.runtimeEnvironment,u=o.configuration.analytics.enabled,l=new cn({token:i,endpoint:s,runtimeEnvironment:c,preprocessRequest:nr(e,a),beforeSendHooks:[or(e,r),(d,p)=>(e.info({...p,type:d,endpoint:s,token:i},"Analytics request"),p)]},n);return u||l.disable(),l};var hu=class extends Gr{getSearchUID(){var r,a;let t=this.getState();return((r=t.search)==null?void 0:r.searchResponseId)||((a=t.search)==null?void 0:a.response.searchUid)||Te().response.searchUid}getPipeline(){var t;return this.state.pipeline||((t=this.state.search)==null?void 0:t.response.pipeline)||"default"}getSearchEventRequestPayload(){return{queryText:this.queryText,responseTime:this.responseTime,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getFacetState(){return du(ct(this.state))}getBaseMetadata(){var n,o,i;let t=this.getState(),r=super.getBaseMetadata(),a=(i=(o=(n=t.search)==null?void 0:n.response)==null?void 0:o.extendedResults)==null?void 0:i.generativeQuestionAnsweringId;return a&&(r.generativeQuestionAnsweringId=a),r}getGeneratedAnswerMetadata(){var r;let t=this.getState();return{...((r=t.generatedAnswer)==null?void 0:r.isVisible)!==void 0&&{showGeneratedAnswer:t.generatedAnswer.isVisible}}}get queryText(){var t;return((t=this.state.query)==null?void 0:t.q)||xe().q}get responseTime(){var t;return((t=this.state.search)==null?void 0:t.duration)||Te().duration}mapResultsToAnalyticsDocument(){var t;return(t=this.state.search)==null?void 0:t.response.results.map(r=>({documentUri:r.uri,documentUriHash:r.raw.urihash}))}get numberOfResults(){var t;return((t=this.state.search)==null?void 0:t.response.results.length)||Te().response.results.length}},Dy=({logger:e,getState:t,analyticsClientMiddleware:r=(o,i)=>i,preprocessRequest:a,provider:n=new hu(t)})=>{let o=t(),i=o.configuration.accessToken,s=o.configuration.analytics.apiBaseUrl,c=o.configuration.analytics.runtimeEnvironment,u=o.configuration.analytics.enabled,l=new Af({enableAnalytics:u,token:i,endpoint:s,runtimeEnvironment:c,preprocessRequest:nr(e,a),beforeSendHooks:[or(e,r),(d,p)=>(e.info({...p,type:d,endpoint:s,token:i},"Analytics request"),p)]},n);return u||l.disable(),l};var no=class extends Gr{constructor(){super(...arguments);this.initialState=vs()}getPipeline(){return""}getSearchEventRequestPayload(){return{queryText:"",responseTime:0,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getSearchUID(){var r;return((r=this.getState().productListing)==null?void 0:r.responseId)||this.initialState.responseId}mapResultsToAnalyticsDocument(){var t;return(t=this.state.productListing)==null?void 0:t.products.map(r=>({documentUri:r.documentUri,documentUriHash:r.documentUriHash,permanentid:r.permanentid}))}get numberOfResults(){return this.state.productListing.products.length}},Vy=({logger:e,getState:t,analyticsClientMiddleware:r=(o,i)=>i,preprocessRequest:a,provider:n=new no(t)})=>{let o=t(),i=o.configuration.accessToken,s=o.configuration.analytics.apiBaseUrl,c=o.configuration.analytics.runtimeEnvironment,u=o.configuration.analytics.enabled,l=new cn({token:i,endpoint:s,runtimeEnvironment:c,preprocessRequest:nr(e,a),beforeSendHooks:[or(e,r),(d,p)=>(e.info({...p,type:d,endpoint:s,token:i},"Analytics request"),p)]},n);return u||l.disable(),l};function Su(e){let t=My(e),r=[e,...t].filter(n=>n.parentResult).map(n=>n.parentResult);return Wh([e,...t,...r],n=>n.uniqueId)}function My(e){return e.childResults?e.childResults.flatMap(t=>[t,...My(t)]):[]}function Ly(e,t){return{...new ae(t).getBaseMetadata(),actionCause:e,type:e}}function pI(e){return Object.assign(e,{instantlyCallable:!0})}function fI(e,t){let r=o=>pI(W(e,o)),a=r(async(o,{getState:i,extra:s})=>{let{analyticsClientMiddleware:c,preprocessRequest:u,logger:l}=s;return await(await t({getState:i,analyticsClientMiddleware:c,preprocessRequest:u,logger:l})).log({state:i(),extra:s})});return Object.assign(a,{prepare:async({getState:o,analyticsClientMiddleware:i,preprocessRequest:s,logger:c})=>{let{description:u,log:l}=await t({getState:o,analyticsClientMiddleware:i,preprocessRequest:s,logger:c});return{description:u,action:r(async(d,{getState:p,extra:f})=>await l({state:p(),extra:f}))}}}),a}var Es=(e,t,r)=>{function a(...n){let o=n.length===1?{...n[0],__legacy__getBuilder:t(n[0].__legacy__getBuilder),analyticsConfigurator:e,providerClass:r}:{prefix:n[0],__legacy__getBuilder:t(n[1]),__legacy__provider:n[2],analyticsConfigurator:e,providerClass:r};return hI(o)}return a},mI=e=>e.configuration.analytics.analyticsMode==="legacy",gI=e=>e.configuration.analytics.analyticsMode==="next",hI=({prefix:e,__legacy__getBuilder:t,__legacy__provider:r,analyticsPayloadBuilder:a,analyticsType:n,analyticsConfigurator:o,providerClass:i})=>(r!=null||(r=s=>new i(s)),fI(e,async({getState:s,analyticsClientMiddleware:c,preprocessRequest:u,logger:l})=>{let d=[],p={log:async({state:y})=>{for(let x of d)await x(y)}},f=s(),m=o({getState:s,logger:l,analyticsClientMiddleware:c,preprocessRequest:u,provider:r(s)}),g=await t(m,s());p.description=g==null?void 0:g.description,d.push(async y=>{mI(y)&&await SI(g,r,y,l,m.coveoAnalyticsClient)});let{emit:S}=mu(f);return d.push(async y=>{if(gI(y)&&n&&a){let x=a(y);await FI(S,n,x)}}),p}));async function SI(e,t,r,a,n){t(()=>r);let o=await(e==null?void 0:e.log({searchUID:t(()=>r).getSearchUID()}));a.info({client:n,response:o},"Analytics response")}var Ny=e=>(t,r)=>Promise.resolve({description:{actionCause:"caseAssist"},log:async a=>{e(t,r)}}),E=Es(wy,e=>e,ae),h1=Es(qy,Ny,gu),S1=Es(Dy,Ny,hu),Qy=Es(Ty,e=>e,ao),By=Es(Vy,e=>e,no);var Oe=(e,t)=>{var o;let r=i=>{var s,c;return i+((c=(s=t.pagination)==null?void 0:s.firstResult)!=null?c:0)},a=-1,n=(o=t.search)==null?void 0:o.results;return a=Uy(e,n),a<0&&(a=bI(e,n)),a<0&&(a=0),yI(e,r(a),t)};function yI(e,t,r){let a=e.raw.collection;return{collectionName:typeof a=="string"?a:"default",documentAuthor:vI(e),documentPosition:t+1,documentTitle:e.title,documentUri:e.uri,documentUriHash:e.raw.urihash,documentUrl:e.clickUri,rankingModifier:e.rankingModifier||"",sourceName:AI(e),queryPipeline:r.pipeline||Lt()}}var Le=e=>(e.raw.permanentid||console.warn("Missing field permanentid on result. This might cause many issues with your Coveo deployment. See https://docs.coveo.com/en/1913 and https://docs.coveo.com/en/1640 for more information.",e),{contentIDKey:"permanentid",contentIDValue:e.raw.permanentid||""}),jy={urihash:new w,sourcetype:new w,permanentid:new w},oo={uniqueId:O,raw:new q({values:jy}),title:O,uri:O,clickUri:O,rankingModifier:new w({required:!1,emptyAllowed:!0})};function CI(e){return Object.assign({},...Object.keys(jy).map(t=>({[t]:e[t]})))}function xI(e){return Object.assign({},...Object.keys(oo).map(t=>({[t]:e[t]})),{raw:CI(e.raw)})}function vI(e){let t=e.raw.author;return te(t)?"unknown":Array.isArray(t)?t.join(";"):`${t}`}function AI(e){let t=e.raw.source;return te(t)?"unknown":t}var ut=e=>new Y(oo).validate(xI(e));function bI(e,t){for(let[r,a]of t.entries()){let n=Su(a);if(Uy(e,n)!==-1)return r}return-1}function Uy(e,t=[]){return t.findIndex(({uniqueId:r})=>r===e.uniqueId)}async function FI(e,t,r){await e(t,r)}var oe=(V=>(V.interfaceLoad="interfaceLoad",V.interfaceChange="interfaceChange",V.didyoumeanAutomatic="didyoumeanAutomatic",V.didyoumeanClick="didyoumeanClick",V.resultsSort="resultsSort",V.searchboxSubmit="searchboxSubmit",V.searchboxClear="searchboxClear",V.searchboxAsYouType="searchboxAsYouType",V.breadcrumbFacet="breadcrumbFacet",V.breadcrumbResetAll="breadcrumbResetAll",V.documentQuickview="documentQuickview",V.documentOpen="documentOpen",V.omniboxAnalytics="omniboxAnalytics",V.omniboxFromLink="omniboxFromLink",V.searchFromLink="searchFromLink",V.triggerNotify="notify",V.triggerExecute="execute",V.triggerQuery="query",V.undoTriggerQuery="undoQuery",V.triggerRedirect="redirect",V.pagerResize="pagerResize",V.pagerNumber="pagerNumber",V.pagerNext="pagerNext",V.pagerPrevious="pagerPrevious",V.pagerScrolling="pagerScrolling",V.staticFilterClearAll="staticFilterClearAll",V.staticFilterSelect="staticFilterSelect",V.staticFilterDeselect="staticFilterDeselect",V.facetClearAll="facetClearAll",V.facetSearch="facetSearch",V.facetSelect="facetSelect",V.facetSelectAll="facetSelectAll",V.facetDeselect="facetDeselect",V.facetExclude="facetExclude",V.facetUnexclude="facetUnexclude",V.facetUpdateSort="facetUpdateSort",V.facetShowMore="showMoreFacetResults",V.facetShowLess="showLessFacetResults",V.queryError="query",V.queryErrorBack="errorBack",V.queryErrorClear="errorClearQuery",V.queryErrorRetry="errorRetry",V.recommendation="recommendation",V.recommendationInterfaceLoad="recommendationInterfaceLoad",V.recommendationOpen="recommendationOpen",V.likeSmartSnippet="likeSmartSnippet",V.dislikeSmartSnippet="dislikeSmartSnippet",V.expandSmartSnippet="expandSmartSnippet",V.collapseSmartSnippet="collapseSmartSnippet",V.openSmartSnippetFeedbackModal="openSmartSnippetFeedbackModal",V.closeSmartSnippetFeedbackModal="closeSmartSnippetFeedbackModal",V.sendSmartSnippetReason="sendSmartSnippetReason",V.expandSmartSnippetSuggestion="expandSmartSnippetSuggestion",V.collapseSmartSnippetSuggestion="collapseSmartSnippetSuggestion",V.showMoreSmartSnippetSuggestion="showMoreSmartSnippetSuggestion",V.showLessSmartSnippetSuggestion="showLessSmartSnippetSuggestion",V.openSmartSnippetSource="openSmartSnippetSource",V.openSmartSnippetSuggestionSource="openSmartSnippetSuggestionSource",V.openSmartSnippetInlineLink="openSmartSnippetInlineLink",V.openSmartSnippetSuggestionInlineLink="openSmartSnippetSuggestionInlineLink",V.recentQueryClick="recentQueriesClick",V.clearRecentQueries="clearRecentQueries",V.recentResultClick="recentResultClick",V.clearRecentResults="clearRecentResults",V.noResultsBack="noResultsBack",V.showMoreFoldedResults="showMoreFoldedResults",V.showLessFoldedResults="showLessFoldedResults",V.copyToClipboard="copyToClipboard",V.caseSendEmail="Case.SendEmail",V.feedItemTextPost="FeedItem.TextPost",V.caseAttach="caseAttach",V.caseDetach="caseDetach",V.retryGeneratedAnswer="retryGeneratedAnswer",V.likeGeneratedAnswer="likeGeneratedAnswer",V.dislikeGeneratedAnswer="dislikeGeneratedAnswer",V.openGeneratedAnswerSource="openGeneratedAnswerSource",V.generatedAnswerStreamEnd="generatedAnswerStreamEnd",V.historyForward="historyForward",V.historyBackward="historyBackward",V))(oe||{});var kf=e=>A(e,{evt:O,type:de}),_y=e=>E("analytics/generic/search",t=>{kf(e);let{evt:r,meta:a}=e;return t.makeSearchEvent(r,a)}),$y=e=>E("analytics/generic/click",(t,r)=>(ut(e.result),kf(e),t.makeClickEvent(e.evt,Oe(e.result,r),Le(e.result),e.meta))),Hy=e=>E("analytics/generic/custom",t=>(kf(e),t.makeCustomEventWithType(e.evt,e.type,e.meta))),yu=()=>E("analytics/interface/load",e=>e.makeInterfaceLoad()),ya=()=>E("analytics/interface/change",(e,t)=>e.makeInterfaceChange({interfaceChangeTo:t.configuration.analytics.originLevel2})),Cu=()=>E("analytics/interface/searchFromLink",e=>e.makeSearchFromLink()),xu=e=>E("analytics/interface/omniboxFromLink",t=>t.makeOmniboxFromLink(e)),Gy=()=>({actionCause:oe.interfaceLoad,getEventExtraPayload:e=>new ae(()=>e).getBaseMetadata()}),io=()=>({actionCause:oe.interfaceChange,getEventExtraPayload:e=>new ae(()=>e).getInterfaceChangeMetadata()}),zy=()=>({actionCause:oe.searchFromLink,getEventExtraPayload:e=>new ae(()=>e).getBaseMetadata()}),Wy=e=>({actionCause:oe.omniboxFromLink,getEventExtraPayload:t=>new ae(()=>t).getOmniboxFromLinkMetadata(e)});var Of=()=>de,Yy=()=>O,ir=C("configuration/updateBasicConfiguration",e=>A(e,{accessToken:de,organizationId:de,platformUrl:de})),At=C("configuration/updateSearchConfiguration",e=>A(e,{apiBaseUrl:de,pipeline:new w({required:!1,emptyAllowed:!0}),searchHub:de,timezone:de,locale:de,authenticationProviders:new X({required:!1,each:O})})),RI={enabled:new K({default:!0}),originContext:Of(),originLevel2:Of(),originLevel3:Of(),apiBaseUrl:de,nextApiBaseUrl:de,runtimeEnvironment:new me,anonymous:new K({default:!1}),deviceId:de,userDisplayName:de,documentLocation:de,trackingId:de,analyticsMode:new w({constrainTo:["legacy","next"],required:!1,default:"legacy"}),source:new q({options:{required:!1},values:Py.reduce((e,t)=>(e[t]=Ih,e),{})})},Ca=C("configuration/updateAnalyticsConfiguration",e=>(qc()&&(e.enabled=!1),A(e,RI))),so=C("configuration/analytics/disable"),co=C("configuration/analytics/enable"),vu=C("configuration/analytics/originlevel2",e=>A(e,{originLevel2:Yy()})),Au=C("configuration/analytics/originlevel3",e=>A(e,{originLevel3:Yy()}));var bu={q:new w,enableQuerySyntax:new K,aq:new w,cq:new w,firstResult:new D({min:0}),numberOfResults:new D({min:0}),sortCriteria:new w,f:new q,fExcluded:new q,cf:new q,nf:new q,df:new q,debug:new K,sf:new q,tab:new w,af:new q};var ue=C("searchParameters/restore",e=>A(e,bu));var xa=C("debug/enable"),uo=C("debug/disable");var lo=T(Ct(),e=>{e.addCase(xa,()=>!0).addCase(uo,()=>!1).addCase(ue,(t,r)=>{var a;return(a=r.payload.debug)!=null?a:t})});var qf=C("history/undo"),Tf=C("history/redo"),ht=C("history/snapshot"),ks=W("history/back",async(e,{dispatch:t})=>{t(qf()),await t(ce())}),Fu=W("history/forward",async(e,{dispatch:t})=>{t(Tf()),await t(ce())}),ce=W("history/change",async(e,{getState:t})=>t().history.present);var po=C("pipeline/set",e=>A(e,new w({required:!0,emptyAllowed:!0})));var fo=T(Lt(),e=>{e.addCase(po,(t,r)=>r.payload).addCase(ce.fulfilled,(t,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.pipeline)!=null?n:t}).addCase(At,(t,r)=>r.payload.pipeline||t)});var mo=C("searchHub/set",e=>A(e,new w({required:!0,emptyAllowed:!0})));var go=T(Ge(),e=>{e.addCase(mo,(t,r)=>r.payload).addCase(ce.fulfilled,(t,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.searchHub)!=null?n:t}).addCase(At,(t,r)=>r.payload.searchHub||t)});var Fe=C("breadcrumb/deselectAll"),va=C("breadcrumb/deselectAllNonBreadcrumbs");var bt=C("facet/updateFacetAutoSelection",e=>A(e,{allow:new K({required:!0})}));var Ru=class extends ae{constructor(t){super(t);this.getState=t}get activeInstantResultQuery(){let t=this.getState().instantResults;for(let r in t)for(let a in t[r].cache)if(t[r].cache[a].isActive)return t[r].q;return null}get activeInstantResultCache(){let t=this.getState().instantResults;for(let r in t)for(let a in t[r].cache)if(t[r].cache[a].isActive)return t[r].cache[a];return null}get results(){var t;return(t=this.activeInstantResultCache)==null?void 0:t.results}get queryText(){var t;return(t=this.activeInstantResultQuery)!=null?t:xe().q}get responseTime(){var t,r;return(r=(t=this.activeInstantResultCache)==null?void 0:t.duration)!=null?r:Te().duration}get numberOfResults(){var t,r;return(r=(t=this.activeInstantResultCache)==null?void 0:t.totalCountFiltered)!=null?r:Te().response.totalCountFiltered}getSearchUID(){var r;return((r=this.activeInstantResultCache)==null?void 0:r.searchUid)||super.getSearchUID()}};var Ky=e=>E({prefix:"analytics/instantResult/open",__legacy__getBuilder:(t,r)=>(ut(e),t.makeDocumentOpen(Oe(e,r),Le(e))),__legacy__provider:t=>new Ru(t),analyticsType:"itemClick",analyticsPayloadBuilder:t=>{var n,o;let r=Oe(e,t),a=Le(e);return{searchUid:(o=(n=t.search)==null?void 0:n.response.searchUid)!=null?o:"",position:r.documentPosition,actionCause:"open",itemMetadata:{uniqueFieldName:a.contentIDKey,uniqueFieldValue:a.contentIDValue,title:r.documentTitle,author:r.documentAuthor,url:r.documentUrl}}}}),Jy=()=>E("analytics/instantResult/searchboxAsYouType",e=>e.makeSearchboxAsYouType(),e=>new Ru(e)),Xy=()=>({actionCause:oe.searchboxAsYouType,getEventExtraPayload:e=>new ae(()=>e).getBaseMetadata()});var Df={id:O},PI={...Df,q:ge},ho=C("instantResults/register",e=>A(e,Df)),sr=C("instantResults/updateQuery",e=>A(e,PI)),So=C("instantResults/clearExpired",e=>A(e,Df));var Pu=new D({required:!0,min:0}),yo=C("pagination/registerNumberOfResults",e=>A(e,Pu)),Co=C("pagination/updateNumberOfResults",e=>A(e,Pu)),xo=C("pagination/registerPage",e=>A(e,Pu)),Ft=C("pagination/updatePage",e=>A(e,Pu)),vo=C("pagination/nextPage"),Ao=C("pagination/previousPage");var Ye=C("query/updateQuery",e=>A(e,{q:new w,enableQuerySyntax:new K}));var bo=async(e,t)=>{let r=e.analyticsMode==="next";return{analytics:{clientId:await We(e),clientTimestamp:new Date().toISOString(),documentReferrer:e.originLevel3,originContext:e.originContext,...t&&{actionCause:t.actionCause,customData:t.customData},...e.userDisplayName&&{userDisplayName:e.userDisplayName},...e.documentLocation&&{documentLocation:e.documentLocation},...e.deviceId&&{deviceId:e.deviceId},...If()&&{pageId:If()},...r&&e.trackingId&&{trackingId:e.trackingId},capture:r,...r&&{source:fu(e)}}}};var Aa=async(e,t)=>{var r,a,n,o;return{accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,debug:e.debug,tab:e.configuration.analytics.originLevel2,referrer:e.configuration.analytics.originLevel3,timezone:e.configuration.search.timezone,...e.configuration.analytics.enabled&&{visitorId:await We(e.configuration.analytics),actionsHistory:vt.getHistory()},...((r=e.advancedSearchQueries)==null?void 0:r.aq)&&{aq:e.advancedSearchQueries.aq},...((a=e.advancedSearchQueries)==null?void 0:a.cq)&&{cq:e.advancedSearchQueries.cq},...((n=e.advancedSearchQueries)==null?void 0:n.lq)&&{lq:e.advancedSearchQueries.lq},...((o=e.advancedSearchQueries)==null?void 0:o.dq)&&{dq:e.advancedSearchQueries.dq},...e.context&&{context:e.context.contextValues},...e.fields&&!e.fields.fetchAllFields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.query&&{q:e.query.q,enableQuerySyntax:e.query.enableQuerySyntax},...e.searchHub&&{searchHub:e.searchHub},...e.sortCriteria&&{sortCriteria:e.sortCriteria},...e.configuration.analytics.enabled&&await bo(e.configuration.analytics,t),...e.excerptLength&&!te(e.excerptLength.length)&&{excerptLength:e.excerptLength.length},...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}}};var Vf=()=>E("search/logFetchMoreResults",e=>e.makeFetchMoreResults()),lt=e=>E("search/queryError",(t,r)=>{var a,n,o,i;return t.makeQueryError({query:((a=r.query)==null?void 0:a.q)||xe().q,aq:((n=r.advancedSearchQueries)==null?void 0:n.aq)||st().aq,cq:((o=r.advancedSearchQueries)==null?void 0:o.cq)||st().cq,dq:((i=r.advancedSearchQueries)==null?void 0:i.dq)||st().dq,errorType:e.type,errorMessage:e.message})});var Ts=Ie(wc()),aC=Ie(Zy());var wu=Ie(wc()),tC=Ie(eC());wu.default.extend(tC.default);var Os="YYYY/MM/DD@HH:mm:ss",wI="1401-01-01";function ln(e,t){let r=(0,wu.default)(e,t);return!r.isValid()&&!t?(0,wu.default)(e,Os):r}function qs(e){return e.format(Os)}function rC(e){return qs(ln(e))===e}function Iu(e,t){let r=ln(e,t);if(!r.isValid()){let a=". Please provide a date format string in the configuration options. See https://day.js.org/docs/en/parse/string-format for more information.",n=` with the format "${t}""`;throw new Error(`Could not parse the provided date "${e}"${t?n:a}`)}Bf(r)}function Bf(e){if(e.isBefore(wI))throw new Error(`Date is before year 1401, which is unsupported by the API: ${e}`)}Ts.default.extend(aC.default);var nC=["past","now","next"],oC=["minute","hour","day","week","month","quarter","year"],II=e=>{let t=e==="now";return{amount:new D({required:!t,min:1}),unit:new w({required:!t,constrainTo:oC}),period:new w({required:!0,constrainTo:nC})}};function dn(e){if(typeof e=="string"&&!cr(e))throw new Error(`The value "${e}" is not respecting the relative date format "period-amount-unit"`);let t=typeof e=="string"?jf(e):e;new Y(II(t.period)).validate(t);let r=sC(t),a=JSON.stringify(t);if(!r.isValid())throw new Error(`Date is invalid: ${a}`);Bf(r)}function iC(e){let{period:t,amount:r,unit:a}=e;switch(t){case"past":case"next":return`${t}-${r}-${a}`;case"now":return t}}function sC(e){let{period:t,amount:r,unit:a}=e;switch(t){case"past":return(0,Ts.default)().subtract(r,a);case"next":return(0,Ts.default)().add(r,a);case"now":return(0,Ts.default)()}}function Ds(e){return qs(sC(jf(e)))}function cC(e){return e.toLocaleLowerCase().split("-")}function cr(e){let[t,r,a]=cC(e);if(t==="now")return!0;if(!nC.includes(t)||!oC.includes(a))return!1;let n=parseInt(r);return!(isNaN(n)||n<=0)}function uC(e){return!!e&&typeof e=="object"&&"period"in e}function jf(e){let[t,r,a]=cC(e);return t==="now"?{period:"now"}:{period:t,amount:r?parseInt(r):void 0,unit:a||void 0}}function EI(e){return dn(e),jf(e)}function lC(e){return e.type==="dateRange"}function dC(e){return`start${e}`}function pC(e){return`end${e}`}var kI=()=>({dateFacetValueMap:{}});function OI(e,t,r){let a=e.start,n=e.end;return cr(a)&&(a=Ds(a),r.dateFacetValueMap[t][dC(a)]=e.start),cr(n)&&(n=Ds(n),r.dateFacetValueMap[t][pC(n)]=e.end),{...e,start:a,end:n}}function qI(e,t){if(lC(e)){let{facetId:r,currentValues:a}=e;return t.dateFacetValueMap[r]={},{...e,currentValues:a.map(n=>OI(n,r,t))}}return e}function Fo(e){var a;let t=kI();return{request:{...e,facets:(a=e.facets)==null?void 0:a.map(n=>qI(n,t))},mappings:t}}function TI(e,t,r){return{...e,start:r.dateFacetValueMap[t][dC(e.start)]||e.start,end:r.dateFacetValueMap[t][pC(e.end)]||e.end}}function DI(e,t){return e.facetId in t.dateFacetValueMap}function VI(e,t){return DI(e,t)?{...e,values:e.values.map(r=>TI(r,e.facetId,t))}:e}function Eu(e,t){var r;return"success"in e?{success:{...e.success,facets:(r=e.success.facets)==null?void 0:r.map(n=>VI(n,t))}}:e}function Ro(e,t){let r={};e.forEach(o=>r[o.facetId]=o);let a=[];t.forEach(o=>{o in r&&(a.push(r[o]),delete r[o])});let n=Object.values(r);return[...a,...n]}function zr(e){return Object.values(e).map(t=>t.request)}var pn=1,Vs=5e3;var qe=async(e,t)=>{var s;let r=UI(e),a=MI(e),n=LI(e),o=await Aa(e,t),i=()=>e.pagination?e.pagination.firstResult+e.pagination.numberOfResults>Vs?Vs-e.pagination.firstResult:e.pagination.numberOfResults:void 0;return Fo({...o,...e.didYouMean&&{queryCorrection:{enabled:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="next",options:{automaticallyCorrect:e.didYouMean.automaticallyCorrectQuery?"whenNoResults":"never"}},enableDidYouMean:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="legacy"},...r&&{cq:r},...a.length&&{facets:a},...e.pagination&&{numberOfResults:i(),firstResult:e.pagination.firstResult},...e.facetOptions&&{facetOptions:{freezeFacetOrder:e.facetOptions.freezeFacetOrder}},...((s=e.folding)==null?void 0:s.enabled)&&{filterField:e.folding.fields.collection,childField:e.folding.fields.parent,parentField:e.folding.fields.child,filterFieldRange:e.folding.filterFieldRange},...e.automaticFacetSet&&{generateAutomaticFacets:{desiredCount:e.automaticFacetSet.desiredCount,numberOfValues:e.automaticFacetSet.numberOfValues,currentFacets:n}},...e.generatedAnswer&&{pipelineRuleParameters:{mlGenerativeQuestionAnswering:{responseFormat:e.generatedAnswer.responseFormat,citationsFieldToInclude:e.generatedAnswer.fieldsToIncludeInCitations}}}})};function MI(e){var t;return Ro(QI(e),(t=e.facetOrder)!=null?t:[])}function LI(e){var r;let t=(r=e.automaticFacetSet)==null?void 0:r.set;return t?Object.values(t).map(a=>a.response).map(NI).filter(a=>a.currentValues.length>0):void 0}function NI(e){let{field:t,label:r,values:a}=e,n=a.filter(o=>o.state==="selected");return{field:t,label:r,currentValues:n}}function QI(e){return BI(e).filter(({facetId:t})=>{var r,a,n;return(n=(a=(r=e.facetOptions)==null?void 0:r.facets[t])==null?void 0:a.enabled)!=null?n:!0})}function BI(e){var t,r,a,n;return[...jI((t=e.facetSet)!=null?t:{}),...fC((r=e.numericFacetSet)!=null?r:{}),...fC((a=e.dateFacetSet)!=null?a:{}),...zr((n=e.categoryFacetSet)!=null?n:{})]}function jI(e){return zr(e).map(t=>t.sortCriteria==="alphanumericDescending"?{...t,sortCriteria:{type:"alphanumeric",order:"descending"}}:t)}function fC(e){return zr(e).map(t=>{let a=t.currentValues.some(({state:n})=>n!=="idle");return t.generateAutomaticRanges&&!a?{...t,currentValues:[]}:t})}function UI(e){var o;let t=((o=e.advancedSearchQueries)==null?void 0:o.cq.trim())||"",r=Object.values(e.tabSet||{}).find(i=>i.isActive),a=(r==null?void 0:r.expression.trim())||"",n=_I(e);return[t,a,...n].filter(i=>!!i).join(" AND ")}function _I(e){return Object.values(e.staticFilterSet||{}).map(r=>{let a=r.values.filter(o=>o.state==="selected"&&!!o.expression.trim()),n=a.map(o=>o.expression).join(" OR ");return a.length>1?`(${n})`:n})}var Po=C("didYouMean/enable"),ku=C("didYouMean/disable"),wo=C("didYouMean/automaticCorrections/disable"),Ou=C("didYouMean/automaticCorrections/enable"),Rt=C("didYouMean/correction",e=>A(e,O)),Io=C("didYouMean/automaticCorrections/mode",e=>A(e,new w({constrainTo:["next","legacy"],emptyAllowed:!1,required:!0})));var qu=()=>E("analytics/didyoumean/click",e=>e.makeDidYouMeanClick()),Uf=()=>E("analytics/didyoumean/automatic",e=>e.makeDidYouMeanAutomatic()),mC=()=>({actionCause:oe.didyoumeanClick,getEventExtraPayload:e=>new ae(()=>e).getBaseMetadata()}),gC=()=>({actionCause:oe.didyoumeanAutomatic,getEventExtraPayload:e=>new ae(()=>e).getBaseMetadata()});var $I=new q({values:{undoneQuery:ge},options:{required:!0}}),Tu=()=>E("analytics/trigger/query",(e,t)=>{var r;return((r=t.triggers)==null?void 0:r.queryModification.newQuery)?e.makeTriggerQuery():null}),Du=e=>E("analytics/trigger/query/undo",t=>(A(e,$I),t.makeUndoTriggerQuery(e))),Vu=()=>E("analytics/trigger/notify",(e,t)=>{var r;return((r=t.triggers)==null?void 0:r.notifications.length)?e.makeTriggerNotify({notifications:t.triggers.notifications}):null}),Mu=()=>E("analytics/trigger/redirect",(e,t)=>{var r;return((r=t.triggers)==null?void 0:r.redirectTo)?e.makeTriggerRedirect({redirectedTo:t.triggers.redirectTo}):null}),Lu=()=>E("analytics/trigger/execute",(e,t)=>{var r;return((r=t.triggers)==null?void 0:r.executions.length)?e.makeTriggerExecute({executions:t.triggers.executions}):null}),hC=e=>({actionCause:oe.undoTriggerQuery,getEventExtraPayload:t=>new ae(()=>t).getUndoTriggerQueryMetadata(e)});var ba=C("trigger/query/ignore",e=>A(e,new w({emptyAllowed:!0,required:!0}))),Eo=C("trigger/query/modification",e=>A(e,new q({values:{originalQuery:de,modification:de}})));var fn=class{constructor(t,r=a=>{this.dispatch(Ye({q:a}))}){this.config=t;this.onUpdateQueryForCorrection=r}async fetchFromAPI({mappings:t,request:r},a){var c;let n=new Date().getTime(),o=Eu(await this.extra.apiClient.search(r,a),t),i=new Date().getTime()-n,s=((c=this.getState().query)==null?void 0:c.q)||"";return{response:o,duration:i,queryExecuted:s,requestExecuted:r}}async process(t){var r,a,n;return(n=(a=(r=this.processQueryErrorOrContinue(t))!=null?r:await this.processQueryCorrectionsOrContinue(t))!=null?a:await this.processQueryTriggersOrContinue(t))!=null?n:this.processSuccessResponse(t)}processQueryErrorOrContinue(t){return ye(t.response)?(this.dispatch(lt(t.response.error)),this.rejectWithValue(t.response.error)):null}async processQueryCorrectionsOrContinue(t){let r=this.getState(),a=this.getSuccessResponse(t);if(!a||!r.didYouMean)return null;let{enableDidYouMean:n,automaticallyCorrectQuery:o}=r.didYouMean,{results:i,queryCorrections:s,queryCorrection:c}=a;if(!n||!o)return null;let u=i.length===0&&s&&s.length!==0,l=!te(c)&&!te(c.correctedQuery);if(!u&&!l)return null;let p=u?await this.processLegacyDidYouMeanAutoCorrection(t):this.processModernDidYouMeanAutoCorrection(t);return this.dispatch(ht(Nt(this.getState()))),p}async processLegacyDidYouMeanAutoCorrection(t){let r=this.getCurrentQuery(),a=this.getSuccessResponse(t);if(!a.queryCorrections)return null;let{correctedQuery:n}=a.queryCorrections[0],o=await this.automaticallyRetryQueryWithCorrection(n);return ye(o.response)?(this.dispatch(lt(o.response.error)),this.rejectWithValue(o.response.error)):(this.logOriginalAnalyticsQueryBeforeAutoCorrection(t),this.dispatch(ht(Nt(this.getState()))),{...o,response:{...o.response.success,queryCorrections:a.queryCorrections},automaticallyCorrected:!0,originalQuery:r,analyticsAction:Uf()})}processModernDidYouMeanAutoCorrection(t){let r=this.getSuccessResponse(t),{correctedQuery:a,originalQuery:n}=r.queryCorrection;return this.onUpdateQueryForCorrection(a),{...t,response:{...r},queryExecuted:a,automaticallyCorrected:!0,originalQuery:n,analyticsAction:Uf()}}logOriginalAnalyticsQueryBeforeAutoCorrection(t){let r=this.getState(),a=this.getSuccessResponse(t);this.analyticsAction&&this.analyticsAction()(this.dispatch,()=>this.getStateAfterResponse(t.queryExecuted,t.duration,r,a),this.extra)}async processQueryTriggersOrContinue(t){var s,c;let r=this.getSuccessResponse(t);if(!r)return null;let a=((s=r.triggers.find(u=>u.type==="query"))==null?void 0:s.content)||"";if(!a)return null;if(((c=this.getState().triggers)==null?void 0:c.queryModification.queryToIgnore)===a)return this.dispatch(ba("")),null;this.analyticsAction&&await this.dispatch(this.analyticsAction);let o=this.getCurrentQuery(),i=await this.automaticallyRetryQueryWithTriggerModification(a);return ye(i.response)?(this.dispatch(lt(i.response.error)),this.rejectWithValue(i.response.error)):(this.dispatch(ht(Nt(this.getState()))),{...i,response:{...i.response.success},automaticallyCorrected:!1,originalQuery:o,analyticsAction:Tu()})}getStateAfterResponse(t,r,a,n){var o,i;return{...a,query:{q:t,enableQuerySyntax:(i=(o=a.query)==null?void 0:o.enableQuerySyntax)!=null?i:xe().enableQuerySyntax},search:{...Te(),duration:r,response:n,results:n.results}}}processSuccessResponse(t){return this.dispatch(ht(Nt(this.getState()))),{...t,response:this.getSuccessResponse(t),automaticallyCorrected:!1,originalQuery:this.getCurrentQuery(),analyticsAction:this.analyticsAction}}getSuccessResponse(t){return Nc(t.response)?t.response.success:null}async automaticallyRetryQueryWithCorrection(t){this.onUpdateQueryForCorrection(t);let r=await this.fetchFromAPI(await qe(this.getState()),{origin:"mainSearch"});return this.dispatch(Rt(t)),r}async automaticallyRetryQueryWithTriggerModification(t){return this.dispatch(Eo({newQuery:t,originalQuery:this.getCurrentQuery()})),this.onUpdateQueryForCorrection(t),await this.fetchFromAPI(await qe(this.getState()),{origin:"mainSearch"})}getCurrentQuery(){var r;let t=this.getState();return((r=t.query)==null?void 0:r.q)!==void 0?t.query.q:""}get extra(){return this.config.extra}getState(){return this.config.getState()}get dispatch(){return this.config.dispatch}get analyticsAction(){return this.config.analyticsAction}get rejectWithValue(){return this.config.rejectWithValue}};var qH=W("search/prepareForSearchWithQuery",(e,t)=>{let{dispatch:r}=t;A(e,{q:new w,enableQuerySyntax:new K,clearFilters:new K}),e.clearFilters&&(r(Fe()),r(va())),r(bt({allow:!0})),r(Ye({q:e.q,enableQuerySyntax:e.enableQuerySyntax})),r(Ft(1))}),ko=W("search/executeSearch",async(e,t)=>{let r=t.getState();return await Qu(r,t,e)}),Oo=W("search/fetchPage",async(e,t)=>{let r=t.getState();return await $f(r,t,e)}),qo=W("search/fetchMoreResults",async(e,t)=>{let r=t.getState();return await Hf(t,r)}),Nu=W("search/fetchFacetValues",async(e,t)=>{let r=t.getState();return await WI(t,e,r)}),SC=W("search/fetchInstantResults",async(e,t)=>_f(e,t)),HI=async(e,t)=>{var a,n,o,i;let r=await qe(e,t);return r.request={...r.request,firstResult:((n=(a=e.pagination)==null?void 0:a.firstResult)!=null?n:0)+((i=(o=e.search)==null?void 0:o.results.length)!=null?i:0)},r},GI=async(e,t,r)=>{let a=await Aa(e);return Fo({...a,...e.didYouMean&&{enableDidYouMean:e.didYouMean.enableDidYouMean},numberOfResults:r,q:t})},zI=async(e,t)=>{let r=await qe(e,t);return r.request.numberOfResults=0,r},yC=e=>{var t;e.configuration.analytics.enabled&&vt.addElement({name:"Query",...((t=e.query)==null?void 0:t.q)&&{value:e.query.q},time:JSON.stringify(new Date)})};async function _f(e,t){A(e,{id:O,q:O,maxResultsPerQuery:new D({required:!0,min:1}),cacheTimeout:new D});let{q:r,maxResultsPerQuery:a}=e,n=t.getState(),o=new fn({...t,analyticsAction:Jy()},u=>{t.dispatch(sr({q:u,id:e.id}))}),i=await GI(n,r,a),s=await o.fetchFromAPI(i,{origin:"instantResults",disableAbortWarning:!0}),c=await o.process(s);return"response"in c?{results:c.response.results,searchUid:c.response.searchUid,analyticsAction:c.analyticsAction,totalCountFiltered:c.response.totalCountFiltered,duration:c.duration}:c}async function $f(e,t,r){yC(e);let{analyticsClientMiddleware:a,preprocessRequest:n,logger:o}=t.extra,{description:i}=await r.prepare({getState:()=>t.getState(),analyticsClientMiddleware:a,preprocessRequest:n,logger:o}),s=new fn({...t,analyticsAction:r}),c=await qe(e,i),u=await s.fetchFromAPI(c,{origin:"mainSearch"});return await s.process(u)}async function Hf(e,t){let{analyticsClientMiddleware:r,preprocessRequest:a,logger:n}=e.extra,{description:o}=await Vf().prepare({getState:()=>e.getState(),analyticsClientMiddleware:r,preprocessRequest:a,logger:n}),i=new fn({...e,analyticsAction:Vf()}),s=await HI(t,o),c=await i.fetchFromAPI(s,{origin:"mainSearch"});return await i.process(c)}async function WI(e,t,r){let{analyticsClientMiddleware:a,preprocessRequest:n,logger:o}=e.extra,{description:i}=await t.prepare({getState:()=>e.getState(),analyticsClientMiddleware:a,preprocessRequest:n,logger:o}),s=new fn({...e,analyticsAction:t}),c=await zI(r,i),u=await s.fetchFromAPI(c,{origin:"facetValues"});return await s.process(u)}async function Qu(e,t,r){yC(e);let{analyticsClientMiddleware:a,preprocessRequest:n,logger:o}=t.extra,{description:i}=await r.prepare({getState:()=>t.getState(),analyticsClientMiddleware:a,preprocessRequest:n,logger:o}),s=await qe(e,i),c=new fn({...t,analyticsAction:r}),u=await c.fetchFromAPI(s,{origin:"mainSearch"});return await c.process(u)}var mn=class{constructor(t,r=a=>{this.dispatch(Ye({q:a}))}){this.config=t;this.onUpdateQueryForCorrection=r}async fetchFromAPI({mappings:t,request:r},a){var c;let n=new Date().getTime(),o=Eu(await this.extra.apiClient.search(r,a),t),i=new Date().getTime()-n,s=((c=this.getState().query)==null?void 0:c.q)||"";return{response:o,duration:i,queryExecuted:s,requestExecuted:r}}async process(t){var r,a,n;return(n=(a=(r=this.processQueryErrorOrContinue(t))!=null?r:await this.processQueryCorrectionsOrContinue(t))!=null?a:await this.processQueryTriggersOrContinue(t))!=null?n:this.processSuccessResponse(t)}processQueryErrorOrContinue(t){return ye(t.response)?(this.dispatch(lt(t.response.error)),this.rejectWithValue(t.response.error)):null}async processQueryCorrectionsOrContinue(t){let r=this.getState(),a=this.getSuccessResponse(t);if(!a||!r.didYouMean)return null;let{enableDidYouMean:n,automaticallyCorrectQuery:o}=r.didYouMean,{results:i,queryCorrections:s,queryCorrection:c}=a;if(!n||!o)return null;let u=i.length===0&&s&&s.length!==0,l=!te(c)&&!te(c.correctedQuery);if(!u&&!l)return null;let p=u?await this.processLegacyDidYouMeanAutoCorrection(t):this.processModernDidYouMeanAutoCorrection(t);return this.dispatch(ht(Nt(this.getState()))),p}async processLegacyDidYouMeanAutoCorrection(t){let r=this.getCurrentQuery(),a=this.getSuccessResponse(t);if(!a.queryCorrections)return null;let{correctedQuery:n}=a.queryCorrections[0],o=await this.automaticallyRetryQueryWithCorrection(n);return ye(o.response)?(this.dispatch(lt(o.response.error)),this.rejectWithValue(o.response.error)):(this.dispatch(ht(Nt(this.getState()))),{...o,response:{...o.response.success,queryCorrections:a.queryCorrections},automaticallyCorrected:!0,originalQuery:r})}processModernDidYouMeanAutoCorrection(t){let r=this.getSuccessResponse(t),{correctedQuery:a,originalQuery:n}=r.queryCorrection;return this.onUpdateQueryForCorrection(a),{...t,response:{...r},queryExecuted:a,automaticallyCorrected:!0,originalQuery:n}}async processQueryTriggersOrContinue(t){var s,c;let r=this.getSuccessResponse(t);if(!r)return null;let a=((s=r.triggers.find(u=>u.type==="query"))==null?void 0:s.content)||"";if(!a)return null;if(((c=this.getState().triggers)==null?void 0:c.queryModification.queryToIgnore)===a)return this.dispatch(ba("")),null;let o=this.getCurrentQuery(),i=await this.automaticallyRetryQueryWithTriggerModification(a);return ye(i.response)?(this.dispatch(lt(i.response.error)),this.rejectWithValue(i.response.error)):(this.dispatch(ht(Nt(this.getState()))),{...i,response:{...i.response.success},automaticallyCorrected:!1,originalQuery:o})}processSuccessResponse(t){return this.dispatch(ht(Nt(this.getState()))),{...t,response:this.getSuccessResponse(t),automaticallyCorrected:!1,originalQuery:this.getCurrentQuery()}}getSuccessResponse(t){return Nc(t.response)?t.response.success:null}async automaticallyRetryQueryWithCorrection(t){this.onUpdateQueryForCorrection(t);let r=this.getState(),{actionCause:a,getEventExtraPayload:n}=gC(),o=await this.fetchFromAPI(await qe(r,{actionCause:a,customData:n(r)}),{origin:"mainSearch"});return this.dispatch(Rt(t)),o}async automaticallyRetryQueryWithTriggerModification(t){return this.dispatch(Eo({newQuery:t,originalQuery:this.getCurrentQuery()})),this.onUpdateQueryForCorrection(t),await this.fetchFromAPI(await qe(this.getState()),{origin:"mainSearch"})}getCurrentQuery(){var r;let t=this.getState();return((r=t.query)==null?void 0:r.q)!==void 0?t.query.q:""}get extra(){return this.config.extra}getState(){return this.config.getState()}get dispatch(){return this.config.dispatch}get rejectWithValue(){return this.config.rejectWithValue}};var Bu=W("search/prepareForSearchWithQuery",(e,t)=>{let{dispatch:r}=t;A(e,{q:new w,enableQuerySyntax:new K,clearFilters:new K}),e.clearFilters&&(r(Fe()),r(va())),r(bt({allow:!0})),r(Ye({q:e.q,enableQuerySyntax:e.enableQuerySyntax})),r(Ft(1))}),I=W("search/executeSearch",async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy"||!e.next)return Qu(r,t,e.legacy);CC(r);let a=Gf(e.next,r),n=await qe(r,a),o=new mn({...t,analyticsAction:a}),i=await o.fetchFromAPI(n,{origin:"mainSearch"});return await o.process(i)}),ur=W("search/fetchPage",async(e,t)=>{let r=t.getState();if(CC(r),r.configuration.analytics.analyticsMode==="legacy"||!e.next)return $f(r,t,e.legacy);let a=new mn({...t,analyticsAction:e.next}),n=await qe(r,e.next),o=await a.fetchFromAPI(n,{origin:"mainSearch"});return await a.process(o)}),Fa=W("search/fetchMoreResults",async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy")return Hf(t,r);let a=Ly(oe.pagerScrolling,t.getState),n=new mn({...t,analyticsAction:a}),o=await YI(r,a),i=await n.fetchFromAPI(o,{origin:"mainSearch"});return await n.process(i)}),lr=W("search/fetchFacetValues",async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy"||!e.next)return Qu(r,t,e.legacy);let a=Gf(e.next,r),n=new mn({...t,analyticsAction:a}),o=await JI(r,a),i=await n.fetchFromAPI(o,{origin:"facetValues"});return await n.process(i)}),To=W("search/fetchInstantResults",async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy")return _f(e,t);A(e,{id:O,q:O,maxResultsPerQuery:new D({required:!0,min:1}),cacheTimeout:new D});let{q:a,maxResultsPerQuery:n}=e,o=Gf(Xy(),r),i=await KI(r,a,n,o),s=new mn({...t,analyticsAction:o},l=>{t.dispatch(sr({q:l,id:e.id}))}),c=await s.fetchFromAPI(i,{origin:"instantResults",disableAbortWarning:!0}),u=await s.process(c);return"response"in u?{results:u.response.results,searchUid:u.response.searchUid,totalCountFiltered:u.response.totalCountFiltered,duration:u.duration}:u}),YI=async(e,t)=>{var a,n,o,i;let r=await qe(e,t);return r.request={...r.request,firstResult:((n=(a=e.pagination)==null?void 0:a.firstResult)!=null?n:0)+((i=(o=e.search)==null?void 0:o.results.length)!=null?i:0)},r},KI=async(e,t,r,a)=>{let n=await Aa(e,a);return Fo({...n,...e.didYouMean&&{enableDidYouMean:e.didYouMean.enableDidYouMean},numberOfResults:r,q:t})},JI=async(e,t)=>{let r=await qe(e,t);return r.request.numberOfResults=0,r},CC=e=>{var t;e.configuration.analytics.enabled&&vt.addElement({name:"Query",...((t=e.query)==null?void 0:t.q)&&{value:e.query.q},time:JSON.stringify(new Date)})},Gf=(e,t)=>({customData:e.getEventExtraPayload(t),actionCause:e.actionCause,type:e.actionCause});var Ra=(e,t)=>{let r=e;return te(r[t])?te(e.raw[t])?null:e.raw[t]:r[t]},XI=e=>t=>e.every(r=>!te(Ra(t,r))),ZI=e=>t=>e.every(r=>te(Ra(t,r))),eE=(e,t)=>r=>{let a=xC(e,r);return t.some(n=>a.some(o=>`${o}`.toLowerCase()===n.toLowerCase()))},tE=(e,t)=>r=>{let a=xC(e,r);return t.every(n=>a.every(o=>`${o}`.toLowerCase()!==n.toLowerCase()))},xC=(e,t)=>{let r=Ra(t,e);return Ec(r)?r:[r]},rE={getResultProperty:Ra,fieldsMustBeDefined:XI,fieldsMustNotBeDefined:ZI,fieldMustMatch:eE,fieldMustNotMatch:tE};function Ms(e){return e.search.response.searchUid!==""}function vC(e,t,r){return e.search.results.find(a=>Ra(a,t)===r)}function zf(e,t){var a;let r=(a=t.payload)!=null?a:null;r&&(e.response=Te().response,e.results=[],e.questionAnswer=Gn()),e.error=r,e.isLoading=!1}function Wf(e,t){e.error=null,e.response=t.payload.response,e.queryExecuted=t.payload.queryExecuted,e.duration=t.payload.duration,e.isLoading=!1}function aE(e,t){Wf(e,t),e.results=t.payload.response.results,e.searchResponseId=t.payload.response.searchUid,e.questionAnswer=t.payload.response.questionAnswer,e.extendedResults=t.payload.response.extendedResults}function Yf(e,t){e.isLoading=!0,e.requestId=t.meta.requestId}var J=T(Te(),e=>{e.addCase(ko.rejected,(t,r)=>zf(t,r)),e.addCase(qo.rejected,(t,r)=>zf(t,r)),e.addCase(Oo.rejected,(t,r)=>zf(t,r)),e.addCase(ko.fulfilled,(t,r)=>{aE(t,r)}),e.addCase(qo.fulfilled,(t,r)=>{Wf(t,r),t.results=[...t.results,...r.payload.response.results]}),e.addCase(Oo.fulfilled,(t,r)=>{Wf(t,r),t.results=r.payload.response.results}),e.addCase(Nu.fulfilled,(t,r)=>{t.response.facets=r.payload.response.facets,t.response.searchUid=r.payload.response.searchUid}),e.addCase(ko.pending,Yf),e.addCase(qo.pending,Yf),e.addCase(Oo.pending,Yf)});var AC=T(un,e=>e);var RC=Ie(FC());var Do=C("tab/register",e=>{let t=new q({values:{id:O,expression:ge}});return A(e,t)}),jt=C("tab/updateActiveTab",e=>A(e,O));function oE(e,t){if(cS(e))return e.replace(/^(https:\/\/)platform/,"$1analytics")+Jp;let a=uS(e,t);return a?gs(t,a.environment).analytics:e}var ju=T(it(),e=>e.addCase(ir,(t,r)=>{r.payload.accessToken&&(t.accessToken=r.payload.accessToken),r.payload.organizationId&&(t.organizationId=r.payload.organizationId),r.payload.platformUrl&&(t.platformUrl=r.payload.platformUrl,t.search.apiBaseUrl=`${r.payload.platformUrl}${Kp}`,t.analytics.apiBaseUrl=oE(r.payload.platformUrl,t.organizationId))}).addCase(At,(t,r)=>{r.payload.apiBaseUrl&&(t.search.apiBaseUrl=r.payload.apiBaseUrl),r.payload.locale&&(t.search.locale=r.payload.locale),r.payload.timezone&&(t.search.timezone=r.payload.timezone),r.payload.authenticationProviders&&(t.search.authenticationProviders=r.payload.authenticationProviders)}).addCase(Ca,(t,r)=>{te(r.payload.enabled)||(t.analytics.enabled=r.payload.enabled),te(r.payload.originContext)||(t.analytics.originContext=r.payload.originContext),te(r.payload.originLevel2)||(t.analytics.originLevel2=r.payload.originLevel2),te(r.payload.originLevel3)||(t.analytics.originLevel3=r.payload.originLevel3),te(r.payload.apiBaseUrl)||(t.analytics.apiBaseUrl=r.payload.apiBaseUrl),te(r.payload.nextApiBaseUrl)||(t.analytics.nextApiBaseUrl=r.payload.nextApiBaseUrl),te(r.payload.trackingId)||(t.analytics.trackingId=r.payload.trackingId),te(r.payload.analyticsMode)||(t.analytics.analyticsMode=r.payload.analyticsMode),te(r.payload.source)||(t.analytics.source=r.payload.source);let a=(0,RC.default)();a&&(t.analytics.analyticsMode="next",t.analytics.trackingId=a),te(r.payload.runtimeEnvironment)||(t.analytics.runtimeEnvironment=r.payload.runtimeEnvironment),te(r.payload.anonymous)||(t.analytics.anonymous=r.payload.anonymous),te(r.payload.deviceId)||(t.analytics.deviceId=r.payload.deviceId),te(r.payload.userDisplayName)||(t.analytics.userDisplayName=r.payload.userDisplayName),te(r.payload.documentLocation)||(t.analytics.documentLocation=r.payload.documentLocation)}).addCase(so,t=>{t.analytics.enabled=!1}).addCase(co,t=>{t.analytics.enabled=!0}).addCase(vu,(t,r)=>{t.analytics.originLevel2=r.payload.originLevel2}).addCase(Au,(t,r)=>{t.analytics.originLevel3=r.payload.originLevel3}).addCase(jt,(t,r)=>{t.analytics.originLevel2=r.payload}).addCase(ue,(t,r)=>{t.analytics.originLevel2=r.payload.tab||t.analytics.originLevel2}));var $=ju;function PC(e,t){let r={...e},a,n=o=>(i,s)=>{let c=o(i,s);return a?a(c,s):c};return{get combinedReducer(){let o=Yh(Object.entries(t).filter(([i])=>!(i in r)).map(([i,s])=>[i,()=>s]));return n((0,h.combineReducers)({...o,...r}))},containsAll(o){return Object.keys(o).every(s=>s in r)},add(o){Object.keys(o).filter(i=>!(i in r)).forEach(i=>r[i]=o[i])},addCrossReducer(o){a=o}}}function Uu(e,t,r){var a,n,o;t===void 0&&(t=50),r===void 0&&(r={});var i=(a=r.isImmediate)!=null&&a,s=(n=r.callback)!=null&&n,c=r.maxWait,u=Date.now(),l=[];function d(){if(c!==void 0){var f=Date.now()-u;if(f+t>=c)return c-f}return t}var p=function(){var f=[].slice.call(arguments),m=this;return new Promise(function(g,S){var y=i&&o===void 0;if(o!==void 0&&clearTimeout(o),o=setTimeout(function(){if(o=void 0,u=Date.now(),!i){var b=e.apply(m,f);s&&s(b),l.forEach(function(P){return(0,P.resolve)(b)}),l=[]}},d()),y){var x=e.apply(m,f);return s&&s(x),g(x)}l.push({resolve:g,reject:S})})};return p.cancel=function(f){o!==void 0&&clearTimeout(o),l.forEach(function(m){return(0,m.reject)(f)}),l=[]},p}function wC(e,t){let r=0,a=Uu(()=>r=0,500);return n=>o=>async i=>{if(!(typeof i=="function"))return o(i);let c=await o(i);if(!iE(c))return c;if(typeof t!="function")return e.warn("Unable to renew the expired token because a renew function was not provided. Please specify the #renewAccessToken option when initializing the engine."),c;if(r>=5)return e.warn("Attempted to renew the token but was not successful. Please check the #renewAccessToken function."),c;r++,a();let u=await sE(t);n.dispatch(ir({accessToken:u})),n.dispatch(i)}}function iE(e){var t;return((t=e==null?void 0:e.error)==null?void 0:t.name)===new fs().name}async function sE(e){try{return await e()}catch(t){return""}}function IC({reducer:e,preloadedState:t,middlewares:r=[],thunkExtraArguments:a,name:n}){return Cp({reducer:e,preloadedState:t,devTools:{stateSanitizer:o=>o.history?{...o,history:"<<OMIT>>"}:o,name:n,shouldHotReload:!1},middleware:o=>[...r,...o({thunk:{extraArgument:a}}),Rc(a.logger)]})}var cE={configuration:$,version:AC};function uE(e,t){var i,s;let r=((i=e.configuration.organizationEndpoints)==null?void 0:i.analytics)||void 0,{analyticsClientMiddleware:a,...n}=(s=e.configuration.analytics)!=null?s:{},o={...n,nextApiBaseUrl:`${r}/rest/organizations/${e.configuration.organizationId}/events/v1`,apiBaseUrl:r};return qc()?(t.info("Analytics disabled since doNotTrack is active."),{...o,enabled:!1}):o}function EC(e,t){var c;let r=lE(e,t),{accessToken:a,organizationId:n}=e.configuration,{organizationEndpoints:o}=e.configuration,i=(o==null?void 0:o.platform)||e.configuration.platformUrl;mE(e)&&r.logger.warn(`The \`platformUrl\` (${e.configuration.platformUrl}) option will be deprecated in the next major version. Consider using the \`organizationEndpoints\` option instead. See [Organization endpoints](https://docs.coveo.com/en/mcc80216).`),fE(e)?r.logger.warn("The `organizationEndpoints` options was not explicitly set in the Headless engine configuration. Coveo recommends setting this option, as it has resiliency benefits and simplifies the overall configuration for multi-region deployments. See [Organization endpoints](https://docs.coveo.com/en/mcc80216)."):gE(e)&&r.logger.warn(`There is a mismatch between the \`organizationId\` option (${e.configuration.organizationId}) and the organization configured in the \`organizationEndpoints\` option (${(c=e.configuration.organizationEndpoints)==null?void 0:c.platform}). This could lead to issues that are complex to troubleshoot. Please make sure both values match.`),r.dispatch(ir({accessToken:a,organizationId:n,platformUrl:i}));let s=uE(e,r.logger);return s&&r.dispatch(Ca(s)),r}function lE(e,t){var i;let{reducers:r}=e,a=PC({...cE,...r},(i=e.preloadedState)!=null?i:{});e.crossReducer&&a.addCrossReducer(e.crossReducer);let n=t.logger,o=dE(e,t,a);return{addReducers(s){a.containsAll(s)||(a.add(s),o.replaceReducer(a.combinedReducer))},dispatch:o.dispatch,subscribe:o.subscribe,enableAnalytics(){o.dispatch(co())},disableAnalytics(){o.dispatch(so())},get state(){return o.getState()},get relay(){return mu(this.state)},logger:n,store:o}}function dE(e,t,r){let{preloadedState:a,configuration:n}=e,o=n.name||"coveo-headless",i=pE(e,t.logger);return IC({preloadedState:a,reducer:r.combinedReducer,middlewares:i,thunkExtraArguments:t,name:o})}function pE(e,t){let{renewAccessToken:r}=e.configuration,a=wC(t,r);return[bc,a,Fc(t),Ac].concat(e.middlewares||[])}function fE(e){return Ee(e.configuration.organizationEndpoints)}function mE(e){var t;return!te(e.configuration.platformUrl)||te((t=e.configuration.organizationEndpoints)==null?void 0:t.platform)}function gE(e){let{platform:t}=e.configuration.organizationEndpoints;if(Ee(t))return!1;let r=Zp(t);return r&&r.organizationId!==e.configuration.organizationId}var kC=Ie(ls());function OC(e){return(0,kC.default)({name:"@coveo/headless",level:(e==null?void 0:e.level)||"warn",formatters:{log:e==null?void 0:e.logFormatter}})}function qC(e,t){let r=hE(e),a=nt,n=SE(e);return{analyticsClientMiddleware:r,validatePayload:a,preprocessRequest:n,logger:t}}function hE(e){let{analytics:t}=e,r=(a,n)=>n;return(t==null?void 0:t.analyticsClientMiddleware)||r}function SE(e){return e.preprocessRequest||Za}var TC=Ie(Wp());var Kf=(e,t,r,a,n,o)=>{let i=e[t];te(i)||te(n)||n!==i&&n!==a&&(o.warn(`Mismatch on access token (JWT Token) ${t} and engine configuration.`),o.warn(`To remove this warning, make sure that access token value [${i}] matches engine configuration value [${r}]`))},Jf=(e,t)=>!(te(e)||t===e),Ls=e=>{try{let t=typeof atob!="undefined"?atob:TC.atob,a=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),n=t(a);if(!n)return!1;let o=decodeURIComponent(n.split("").map(i=>"%"+("00"+i.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(o)}catch(t){return!1}},DC=(e,t)=>(Jf(e.searchHub,t.searchHub)&&(t.searchHub=e.searchHub),t),VC=(e,t,r,a)=>(Kf(e,"searchHub",t.searchHub,Ge(),r,a),DC(e,t)),MC=(e,t)=>(Jf(e.pipeline,t.pipeline)&&(t.pipeline=e.pipeline),t),LC=(e,t,r,a)=>(Kf(e,"pipeline",t.pipeline,Lt(),r,a),MC(e,t)),NC=(e,t)=>(Jf(e.userDisplayName,t.configuration.analytics.userDisplayName)&&(t.configuration.analytics.userDisplayName=e.userDisplayName),t),yE=(e,t,r,a)=>(Kf(e,"userDisplayName",t.configuration.analytics.userDisplayName,it().analytics.userDisplayName,r,a),NC(e,t)),QC=e=>T({},t=>{t.addCase(mo,(r,a)=>{let n=Ls(r.configuration.accessToken);return n?VC(n,r,a.payload,e):r}).addCase(po,(r,a)=>{let n=Ls(r.configuration.accessToken);return n?LC(n,r,a.payload,e):r}).addCase(ir,(r,a)=>{if(r.configuration.accessToken!==a.payload.accessToken)return r;let{accessToken:n}=a.payload;if(!n)return r;let o=Ls(n);return o?[MC,DC,NC].reduce((i,s)=>s(o,i),r):r}).addCase(At,(r,a)=>{var s;let n=Ls(r.configuration.accessToken);if(!n)return r;let o=VC(n,r,a.payload.searchHub,e);return LC(n,o,(s=a.payload)==null?void 0:s.pipeline,e)}).addCase(Ca,(r,a)=>{let n=Ls(r.configuration.accessToken);return n?yE(n,r,a.payload.userDisplayName,e):r})});var BC={organizationId:O,accessToken:O,platformUrl:new w({required:!1,emptyAllowed:!1}),name:new w({required:!1,emptyAllowed:!1}),analytics:new q({options:{required:!1},values:{enabled:new K({required:!1}),originContext:new w({required:!1}),originLevel2:new w({required:!1}),originLevel3:new w({required:!1}),analyticsMode:new w({constrainTo:["legacy","next"],required:!1})}})};function jC(){return{organizationId:"searchuisamples",accessToken:"xx564559b1-0045-48e1-953c-3addd1ee4457",organizationEndpoints:gs("searchuisamples")}}var UC=new Y({...BC,search:new q({options:{required:!1},values:{pipeline:new w({required:!1,emptyAllowed:!0}),searchHub:de,locale:de,timezone:de,authenticationProviders:new X({required:!1,each:O})}})});function _C(){return{...jC(),search:{searchHub:"default"}}}var CE={debug:lo,pipeline:fo,searchHub:go,search:J};function xE(e){var n;let t=e.configuration.search,r=((n=e.configuration.organizationEndpoints)==null?void 0:n.search)||void 0;return{...t,apiBaseUrl:r}}function vE(e){let t=OC(e.loggerOptions);AE(e.configuration,t);let r=bE(e.configuration,t),a=FE(t),n={...qC(e.configuration,t),apiClient:r,streamingClient:a},o={...e,reducers:CE,crossReducer:QC(t)},i=EC(o,n),s=xE(e);return s&&i.dispatch(At(s)),{...i,get state(){return i.state},executeFirstSearch(c=yu()){if(Ms(i.state))return;let u=I({legacy:c,next:Gy()});i.dispatch(u)},executeFirstSearchAfterStandaloneSearchBoxRedirect(c){let{cause:u,metadata:l}=c;if(Ms(i.state))return;let d=l&&u==="omniboxFromLink",p=I({legacy:d?xu(l):Cu(),next:d?Wy(l):zy()});i.dispatch(p)}}}function AE(e,t){try{UC.validate(e)}catch(r){throw t.error(r,"Search engine configuration error"),r}}function bE(e,t){let{search:r}=e;return new Ss({logger:t,preprocessRequest:e.preprocessRequest||Za,postprocessSearchResponseMiddleware:(r==null?void 0:r.preprocessSearchResponseMiddleware)||jc,postprocessFacetSearchResponseMiddleware:(r==null?void 0:r.preprocessFacetSearchResponseMiddleware)||Uc,postprocessQuerySuggestResponseMiddleware:(r==null?void 0:r.preprocessQuerySuggestResponseMiddleware)||_c})}function FE(e){return new lf({logger:e})}function M(e){let t,r=new Map,a=()=>r.size===0,n=o=>{try{let i=JSON.stringify(o),s=t!==i;return t=i,s}catch(i){return console.warn('Could not detect if state has changed, check the controller "get state method"',i),!0}};return{subscribe(o){o();let i=Symbol(),s;return a()&&(t=JSON.stringify(this.state),s=e.subscribe(()=>{n(this.state)&&r.forEach(c=>c())})),r.set(i,o),()=>{r.delete(i),a()&&s&&s()}},get state(){return{}}}}var $C=e=>{let t=/Document weights:\n((?:.)*?)\n+/g,r=/Terms weights:\n((?:.|\n)*)\n+/g,a=/Total weight: ([0-9]+)/g;if(!e)return null;let n=t.exec(e),o=r.exec(e),i=a.exec(e),s=PE(e),c=HC(n?n[1]:null),u=RE(o),l=i?Number(i[1]):null;return{documentWeights:c,termsWeight:u,totalWeight:l,qreWeights:s}},HC=e=>{let t=/(\w+(?:\s\w+)*): ([-0-9]+)/g,r=/^(\w+(?:\s\w+)*): ([-0-9]+)$/;if(!e)return null;let a=e.match(t);if(!a)return null;let n={};for(let o of a){let i=o.match(r);if(i){let s=i[1],c=i[2];n[s]=Number(c)}}return n},GC=(e,t)=>{let r=[],a;for(;(a=t.exec(e))!==null;)r.push(a);return r},RE=e=>{let t=/((?:[^:]+: [0-9]+, [0-9]+; )+)\n((?:\w+: [0-9]+; )+)/g,r=/([^:]+): ([0-9]+), ([0-9]+); /g;if(!e||!e[1])return null;let a=GC(e[1],t);if(!a)return null;let n={};for(let o of a){let i=GC(o[1],r),s={};for(let u of i)s[u[1]]={Correlation:Number(u[2]),"TF-IDF":Number(u[3])};let c=HC(o[2]);n[Object.keys(s).join(", ")]={terms:s,Weights:c}}return n},PE=e=>{let t=/(Expression:\s".*")\sScore:\s(?!0)([-0-9]+)\n+/g,r=t.exec(e),a=[];for(;r;)a.push({expression:r[1],score:parseInt(r[2],10)}),r=t.exec(e);return a};function zC(e){return e.search.response.results.map(r=>{let a=$C(r.rankingInfo);return{result:r,ranking:a}})}var Pa=C("fields/registerFieldsToInclude",e=>A(e,Pc)),Vo=C("fields/fetchall/enable"),gn=C("fields/fetchall/disable"),Mo=W("fields/fetchDescription",async(e,{extra:t,getState:r,rejectWithValue:a})=>{let n=r(),{accessToken:o,organizationId:i}=n.configuration,{apiBaseUrl:s}=n.configuration.search,c=await t.apiClient.fieldDescriptions({accessToken:o,organizationId:i,url:s});return ye(c)?a(c.error):c.success.fields});var Xf={collectionField:new w({emptyAllowed:!1,required:!1}),parentField:new w({emptyAllowed:!1,required:!1}),childField:new w({emptyAllowed:!1,required:!1}),numberOfFoldedResults:new D({min:0,required:!1})},wa=C("folding/register",e=>A(e,Xf)),Ia=W("folding/loadCollection",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:a}})=>{let n=t(),o=await Aa(n),i=await a.search({...o,q:wE(n),enableQuerySyntax:!0,cq:`@${n.folding.fields.collection}="${e}"`,filterField:n.folding.fields.collection,childField:n.folding.fields.parent,parentField:n.folding.fields.child,filterFieldRange:100},{origin:"foldingCollection"});return ye(i)?r(i.error):{collectionId:e,results:i.success.results,rootResult:n.folding.collections[e].result}});function wE(e){return e.query.q===""?"":e.query.enableQuerySyntax?`${e.query.q} OR @uri`:`( <@- ${e.query.q} -@> ) OR @uri`}var Ea=T(Wn(),e=>e.addCase(Pa,(t,r)=>{t.fieldsToInclude=[...new Set(t.fieldsToInclude.concat(r.payload))]}).addCase(Vo,t=>{t.fetchAllFields=!0}).addCase(gn,t=>{t.fetchAllFields=!1}).addCase(Mo.fulfilled,(t,{payload:r})=>{t.fieldsDescription=r}).addCase(wa,(t,{payload:r})=>{var n,o,i;let a=rn().fields;t.fieldsToInclude.push((n=r.collectionField)!=null?n:a.collection,(o=r.parentField)!=null?o:a.parent,(i=r.childField)!=null?i:a.child)}));var IE=new Y({enabled:new K({default:!1})});function EE(e,t={}){if(!kE(e))throw k;let r=M(e),{dispatch:a}=e,n=()=>e.state;ke(e,IE,t.initialState,"buildRelevanceInspector").enabled&&a(xa());let i=s=>{e.logger.warn(`Flag [ ${s} ] is now activated. This should *not* be used in any production environment as it negatively impact performance.`)};return{...r,get state(){let s=n(),c=s.debug;if(!s.debug)return{isEnabled:c};let{executionReport:u,basicExpression:l,advancedExpression:d,constantExpression:p,userIdentities:f,rankingExpressions:m}=s.search.response,{fieldsDescription:g,fetchAllFields:S}=s.fields;return{isEnabled:c,rankingInformation:zC(s),executionReport:u,expressions:{basicExpression:l,advancedExpression:d,constantExpression:p},userIdentities:f,rankingExpressions:m,fieldsDescription:g,fetchAllFields:S}},enable(){a(xa()),i("debug")},disable(){a(uo()),a(gn())},enableFetchAllFields(){a(Vo()),i("fetchAllFields")},disableFetchAllFields(){a(gn())},fetchFieldsDescription(){!this.state.isEnabled&&a(xa()),a(Mo()),i("fieldsDescription"),e.logger.warn(`For production environment, please specify the necessary fields either when instantiating a ResultList controller, or by dispatching a registerFieldsToInclude action.
        
        https://docs.coveo.com/en/headless/latest/reference/search/controllers/result-list/#resultlistoptions
        https://docs.coveo.com/en/headless/latest/reference/search/actions/field/#registerfieldstoinclude`)}}}function kE(e){return e.addReducers({debug:lo,search:J,configuration:$,fields:Ea}),!0}var OE=new X({each:O,required:!0}),WC=(e,t)=>(A(e,O),Un(t)?A(t,O):A(t,OE),{payload:{contextKey:e,contextValue:t}}),hn=C("context/set",e=>{for(let[t,r]of Object.entries(e))WC(t,r);return{payload:e}}),Sn=C("context/add",e=>WC(e.contextKey,e.contextValue)),yn=C("context/remove",e=>A(e,O));var _u=T(Wt(),e=>{e.addCase(hn,(t,r)=>{t.contextValues=r.payload}).addCase(Sn,(t,r)=>{t.contextValues[r.payload.contextKey]=r.payload.contextValue}).addCase(yn,(t,r)=>{delete t.contextValues[r.payload]}).addCase(ce.fulfilled,(t,r)=>{!r.payload||(t.contextValues=r.payload.context.contextValues)})});var qE=["caseId","caseNumber"],TE={caseId:"caseContext",caseNumber:"caseContext"},$u=class extends Error{constructor(t){super(`The key "${t}" is reserved for internal use. Use ${TE[t]} to set this value.}`)}};function Zf(e){return qE.includes(e)}var DE=new Y({values:new q({options:{required:!1}})});function YC(e,t={}){if(!LE(e))throw k;let r=M(e),{dispatch:a}=e,n=()=>e.state,o=ke(e,DE,t.initialState,"buildContext");return o.values&&a(hn(o.values)),{...r,get state(){return{values:n().context.contextValues}},set(i){a(hn(i))},...n().configuration.analytics.analyticsMode==="legacy"?VE(a):ME(a)}}var VE=e=>({add(t,r){e(Sn({contextKey:t,contextValue:r}))},remove(t){e(yn(t))}}),ME=e=>({add(t,r){if(Zf(t))throw new $u(t);e(Sn({contextKey:t,contextValue:r}))},remove(t){if(Zf(t))throw new $u(t);e(yn(t))}});function LE(e){return e.addReducers({context:_u}),!0}function NE(e,t){return YC(e,t)}var Lo=C("dictionaryFieldContext/set",e=>{let t=new q({options:{required:!0}}),r=A(e,t).error;if(r)return{payload:e,error:r};let a=Object.values(e),n=new X({each:ge}),o=A(a,n).error;return o?{payload:e,error:o}:{payload:e}}),No=C("dictionaryFieldContext/add",e=>{let t=new q({options:{required:!0},values:{field:ge,key:ge}});return A(e,t)}),Qo=C("dictionaryFieldContext/remove",e=>A(e,ge));var Hu=T(ga(),e=>{e.addCase(Lo,(t,r)=>{t.contextValues=r.payload}).addCase(No,(t,r)=>{let{field:a,key:n}=r.payload;t.contextValues[a]=n}).addCase(Qo,(t,r)=>{delete t.contextValues[r.payload]}).addCase(ce.fulfilled,(t,r)=>{!r.payload||(t.contextValues=r.payload.dictionaryFieldContext.contextValues)})});function QE(e){if(!BE(e))throw k;let t=M(e),{dispatch:r}=e,a=()=>e.state;return{...t,get state(){return{values:a().dictionaryFieldContext.contextValues}},set(n){r(Lo(n))},add(n,o){r(No({field:n,key:o}))},remove(n){r(Qo(n))}}}function BE(e){return e.addReducers({dictionaryFieldContext:Hu}),!0}var Gu=T(ys(),e=>{e.addCase(Po,t=>{t.enableDidYouMean=!0}).addCase(ku,t=>{t.enableDidYouMean=!1}).addCase(Ou,t=>{t.automaticallyCorrectQuery=!0}).addCase(wo,t=>{t.automaticallyCorrectQuery=!1}).addCase(I.pending,t=>{t.queryCorrection=Bc(),t.wasAutomaticallyCorrected=!1,t.wasCorrectedTo=""}).addCase(I.fulfilled,(t,r)=>{var o;let{queryCorrection:a,queryCorrections:n}=r.payload.response;if(t.queryCorrectionMode==="legacy"){let i=n&&n[0]?n[0]:Bc();t.queryCorrection=i}if(t.queryCorrectionMode==="next"){let i={...gS(),...a,correctedQuery:(a==null?void 0:a.correctedQuery)||((o=a==null?void 0:a.corrections[0])==null?void 0:o.correctedQuery)||""};t.queryCorrection=i,t.wasCorrectedTo=i.correctedQuery}t.wasAutomaticallyCorrected=r.payload.automaticallyCorrected,t.originalQuery=r.payload.originalQuery}).addCase(Rt,(t,r)=>{t.wasCorrectedTo=r.payload}).addCase(Io,(t,r)=>{t.queryCorrectionMode=r.payload})});function KC(e,t={}){var o,i;if(!jE(e))throw k;let r=M(e),{dispatch:a}=e;a(Po()),((o=t.options)==null?void 0:o.automaticallyCorrectQuery)===!1&&a(wo()),a(Io(((i=t.options)==null?void 0:i.queryCorrectionMode)||"legacy"));let n=()=>e.state;return{...r,get state(){let s=n();return{originalQuery:s.didYouMean.originalQuery,wasCorrectedTo:s.didYouMean.wasCorrectedTo,wasAutomaticallyCorrected:s.didYouMean.wasAutomaticallyCorrected,queryCorrection:s.didYouMean.queryCorrection,hasQueryCorrection:s.didYouMean.queryCorrection.correctedQuery!==""||s.didYouMean.wasCorrectedTo!==""}},applyCorrection(){a(Rt(this.state.queryCorrection.correctedQuery))}}}function jE(e){return e.addReducers({configuration:$,didYouMean:Gu}),!0}function UE(e,t={}){let r=KC(e,t),{dispatch:a}=e;return{...r,get state(){return r.state},applyCorrection(){r.applyCorrection(),a(I({legacy:qu(),next:mC()}))}}}var ee=O;var ie=C("facetOptions/update",(e={freezeFacetOrder:!0})=>A(e,{freezeFacetOrder:new K({required:!1})})),Ke=C("facetOptions/facet/enable",e=>A(e,ee)),ve=C("facetOptions/facet/disable",e=>A(e,ee));var Ns={facetId:ee,captions:new q({options:{required:!1}}),numberOfValues:new D({required:!1,min:1}),query:new w({required:!1,emptyAllowed:!0})};var _E={path:new X({required:!0,each:O}),displayValue:ge,rawValue:ge,count:new D({required:!0,min:0})},Bo=C("categoryFacet/selectSearchResult",e=>A(e,{facetId:ee,value:new q({values:_E})})),jo=C("categoryFacetSearch/register",e=>A(e,Ns));function Uo(e,t){var o;let{facetId:r,criterion:a}=t,n=(o=e[r])==null?void 0:o.request;!n||(n.sortCriteria=a)}function Qs(e){!e||(e.currentValues=e.currentValues.map(t=>({...t,state:"idle"})),e.preventAutoSelect=!0)}function zu(e,t){!e||(e.numberOfValues=t)}function Wu(e,t){let r=e[t];!r||(r.request.numberOfValues=r.initialNumberOfValues,r.request.currentValues=[],r.request.preventAutoSelect=!0)}function em(e,t,r){e.currentValues=$E(t,r),e.numberOfValues=t.length?1:r,e.preventAutoSelect=!0}function $E(e,t){if(!e.length)return[];let r=JC(e[0],t),a=r;for(let n of e.splice(1)){let o=JC(n,t);a.children.push(o),a=o}return a.state="selected",a.retrieveChildren=!0,[r]}function JC(e,t){return{value:e,retrieveCount:t,children:[],state:"idle",retrieveChildren:!1}}var HE={state:new me({required:!0}),numberOfResults:new D({required:!0,min:0}),value:new w({required:!0,emptyAllowed:!0}),path:new X({required:!0,each:O}),moreValuesAvailable:new K({required:!1})};function tm(e){e.children.forEach(t=>{tm(t)}),nt({state:e.state,numberOfResults:e.numberOfResults,value:e.value,path:e.path,moreValuesAvailable:e.moreValuesAvailable},HE)}var _o={facetId:ee,field:O,delimitingCharacter:new w({required:!1,emptyAllowed:!0}),filterFacetCount:new K({required:!1}),injectionDepth:new D({required:!1,min:0}),numberOfValues:new D({required:!1,min:1}),sortCriteria:new me({required:!1}),basePath:new X({required:!1,each:O}),filterByBasePath:new K({required:!1})},dr=C("categoryFacet/register",e=>A(e,_o)),ka=C("categoryFacet/toggleSelectValue",e=>{try{return nt(e.facetId,O),tm(e.selection),{payload:e,error:null}}catch(t){return{payload:e,error:Vt(t)}}}),pr=C("categoryFacet/deselectAll",e=>A(e,_o.facetId)),Cn=C("categoryFacet/updateNumberOfValues",e=>A(e,{facetId:_o.facetId,numberOfValues:_o.numberOfValues})),$o=C("categoryFacet/updateSortCriterion",e=>A(e,{facetId:_o.facetId,criterion:new me})),Yu=C("categoryFacet/updateBasePath",e=>A(e,{facetId:_o.facetId,basePath:new X({each:O})}));var fr=T(Yt(),e=>{e.addCase(dr,(t,r)=>{let a=r.payload,{facetId:n}=a;if(n in t)return;let o=zE(a),i=o.numberOfValues;t[n]={request:o,initialNumberOfValues:i}}).addCase(ce.fulfilled,(t,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.categoryFacetSet)!=null?n:t}).addCase(ue,(t,r)=>{let a=r.payload.cf||{};Object.keys(t).forEach(n=>{let o=t[n].request,i=a[n]||[];(i.length||o.currentValues.length)&&em(o,i,t[n].initialNumberOfValues)})}).addCase($o,(t,r)=>{var i;let{facetId:a,criterion:n}=r.payload,o=(i=t[a])==null?void 0:i.request;!o||(o.sortCriteria=n)}).addCase(Yu,(t,r)=>{var i;let{facetId:a,basePath:n}=r.payload,o=(i=t[a])==null?void 0:i.request;!o||(o.basePath=[...n])}).addCase(ka,(t,r)=>{var d;let{facetId:a,selection:n,retrieveCount:o}=r.payload,i=(d=t[a])==null?void 0:d.request;if(!i)return;let{path:s}=n,c=s.slice(0,s.length-1),u=GE(i,c,o);if(u.length){let p=u[0];p.retrieveChildren=!0,p.state="selected",p.children=[];return}let l=XC(n.value,o);l.state="selected",u.push(l),i.numberOfValues=1}).addCase(pr,(t,r)=>{let a=r.payload;Wu(t,a)}).addCase(Fe,t=>{Object.keys(t).forEach(r=>Wu(t,r))}).addCase(bt,(t,r)=>Object.keys(t).forEach(a=>{t[a].request.preventAutoSelect=!r.payload.allow})).addCase(Cn,(t,r)=>{var i;let{facetId:a,numberOfValues:n}=r.payload,o=(i=t[a])==null?void 0:i.request;if(!!o){if(!o.currentValues.length)return zu(o,n);WE(t,r.payload)}}).addCase(Bo,(t,r)=>{let{facetId:a,value:n}=r.payload,o=t[a];if(!o)return;let i=[...n.path,n.rawValue];em(o.request,i,o.initialNumberOfValues)}).addCase(lr.fulfilled,(t,r)=>{ZC(t,r.payload.response.facets)}).addCase(I.fulfilled,(t,r)=>{ZC(t,r.payload.response.facets)}).addCase(ve,(t,r)=>{Wu(t,r.payload)})}),Bs={delimitingCharacter:";",filterFacetCount:!0,injectionDepth:1e3,numberOfValues:5,sortCriteria:"occurrences",basePath:[],filterByBasePath:!0,resultsMustMatch:"atLeastOneValue"};function GE(e,t,r){let a=e.currentValues;for(let n of t){let o=a[0];(!o||n!==o.value)&&(o=XC(n,r),a.length=0,a.push(o)),o.retrieveChildren=!1,o.state="idle",a=o.children}return a}function zE(e){return{...Bs,currentValues:[],preventAutoSelect:!1,type:"hierarchical",...e}}function XC(e,t){return{value:e,state:"idle",children:[],retrieveChildren:!0,retrieveCount:t}}function ZC(e,t){t.forEach(r=>{var i;if(!YE(e,r))return;let a=r.facetId,n=(i=e[a])==null?void 0:i.request;if(!n)return;let o=KE(n,r);n.currentValues=o?[]:n.currentValues,n.preventAutoSelect=!1})}function WE(e,t){var o;let{facetId:r,numberOfValues:a}=t,n=(o=e[r])==null?void 0:o.request.currentValues[0];if(!!n){for(;n.children.length&&(n==null?void 0:n.state)!=="selected";)n=n.children[0];n.retrieveCount=a}}function YE(e,t){return t.facetId in e}function KE(e,t){let r=gt(e.currentValues),a=gt(t.values);return r.length!==a.length}function Ku(e,t,r){let{facetId:a}=t;if(e[a])return;let n=!1,o={...mr,...t},i=r();e[a]={options:o,isLoading:n,response:i,initialNumberOfValues:o.numberOfValues,requestId:""}}function Ju(e,t){let{facetId:r,...a}=t,n=e[r];!n||(n.options={...n.options,...a})}function js(e,t,r){let a=e[t];!a||(a.requestId=r,a.isLoading=!0)}function Us(e,t){let r=e[t];!r||(r.isLoading=!1)}function Xu(e,t,r){let{facetId:a,response:n}=t,o=e[a];!o||o.requestId===r&&(o.isLoading=!1,o.response=n)}function ex(e,t,r){let{facetId:a,response:n}=t,o=e[a];!o||o.requestId===r&&(o.isLoading=!1,"success"in n&&(o.response=n.success))}function _s(e,t,r){let{facetId:a}=t,n=e[a];!n||(n.requestId="",n.isLoading=!1,n.response=r(),n.options.numberOfValues=n.initialNumberOfValues,n.options.query=mr.query)}function xn(e,t){Object.keys(e).forEach(r=>_s(e,{facetId:r},t))}var mr={captions:{},numberOfValues:10,query:""};var tx=async(e,t,r)=>{let a=t.categoryFacetSearchSet[e].options,n=t.categoryFacetSet[e].request,{captions:o,query:i,numberOfValues:s}=a,{field:c,delimitingCharacter:u,basePath:l,filterFacetCount:d}=n,p=JE(n),f=p.length?[p]:[],m=`*${i}*`;return{url:t.configuration.search.apiBaseUrl,accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,...t.configuration.search.authenticationProviders.length&&{authentication:t.configuration.search.authenticationProviders.join(",")},basePath:l,captions:o,numberOfValues:s,query:m,field:c,delimitingCharacter:u,ignorePaths:f,filterFacetCount:d,type:"hierarchical",...r?{}:{searchContext:(await qe(t)).request}}},JE=e=>{let t=[],r=e.currentValues[0];for(;r;)t.push(r.value),r=r.children[0];return t};var rx=async(e,t,r)=>{let{captions:a,query:n,numberOfValues:o}=t.facetSearchSet[e].options,{field:i,currentValues:s,filterFacetCount:c}=t.facetSet[e].request,u=s.filter(d=>d.state!=="idle").map(d=>d.value),l=`*${n}*`;return{url:t.configuration.search.apiBaseUrl,accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,...t.configuration.search.authenticationProviders&&{authentication:t.configuration.search.authenticationProviders.join(",")},captions:a,numberOfValues:o,query:l,field:i,ignoreValues:u,filterFacetCount:c,type:"specific",...r?{}:{searchContext:(await qe(t)).request}}};var ax=e=>async(t,{getState:r,extra:{apiClient:a,validatePayload:n}})=>{let o=r(),i;n(t,O),XE(o,t)?i=await rx(t,o,e):i=await tx(t,o,e);let s=await a.facetSearch(i);return{facetId:t,response:s}},Je=W("facetSearch/executeSearch",ax(!1)),Oa=W("facetSearch/executeSearch",ax(!0)),Ho=C("facetSearch/clearResults",e=>A(e,{facetId:ee})),XE=(e,t)=>e.facetSearchSet!==void 0&&e.facetSet!==void 0&&e.facetSet[t]!==void 0;var nx={facetId:ee,value:new q({values:{displayValue:ge,rawValue:ge,count:new D({required:!0,min:0})}})},Zu=C("facetSearch/register",e=>A(e,Ns)),qa=C("facetSearch/update",e=>A(e,Ns)),vn=C("facetSearch/toggleSelectValue",e=>A(e,nx)),An=C("facetSearch/toggleExcludeValue",e=>A(e,nx));var Go=T(xs(),e=>{e.addCase(jo,(t,r)=>{let a=r.payload;Ku(t,a,rm)}).addCase(qa,(t,r)=>{Ju(t,r.payload)}).addCase(Je.pending,(t,r)=>{let a=r.meta.arg;js(t,a,r.meta.requestId)}).addCase(Je.rejected,(t,r)=>{let a=r.meta.arg;Us(t,a)}).addCase(Je.fulfilled,(t,r)=>{Xu(t,r.payload,r.meta.requestId)}).addCase(Ho,(t,{payload:{facetId:r}})=>{_s(t,{facetId:r},rm)}).addCase(I.fulfilled,t=>{xn(t,rm)})});function rm(){return{moreValuesAvailable:!1,values:[]}}var zo=e=>E("analytics/facet/showMore",(t,r)=>{A(e,ee);let a=to(e,ct(r));return t.makeFacetShowMore(a)}),Wo=e=>E("analytics/facet/showLess",(t,r)=>{A(e,ee);let a=to(e,ct(r));return t.makeFacetShowLess(a)}),gr=e=>E("analytics/facet/sortChange",(t,r)=>{A(e,{facetId:ee,criterion:new me({required:!0})});let{facetId:a,criterion:n}=e,o=ct(r),s={...to(a,o),criteria:n};return t.makeFacetUpdateSort(s)}),Ne=e=>E("analytics/facet/reset",(t,r)=>{A(e,ee);let a=ct(r),n=to(e,a);return t.makeFacetClearAll(n)}),Pe=e=>E("analytics/facet/select",(t,r)=>{A(e,{facetId:ee,facetValue:O});let a=ct(r),n=ro(e,a);return t.makeFacetSelect(n)}),St=e=>E("analytics/facet/exclude",(t,r)=>{A(e,{facetId:ee,facetValue:O});let a=ct(r),n=ro(e,a);return t.makeFacetExclude(n)}),Ut=e=>E("analytics/facet/deselect",(t,r)=>{A(e,{facetId:ee,facetValue:O});let a=ct(r),n=ro(e,a);return t.makeFacetDeselect(n)}),Wr=e=>E("analytics/facet/unexclude",(t,r)=>{A(e,{facetId:ee,facetValue:O});let a=ct(r),n=ro(e,a);return t.makeFacetUnexclude(n)}),Yo=e=>E("analytics/facet/breadcrumb",(t,r)=>{A(e,{facetId:ee,facetValue:O});let a=ro(e,ct(r));return t.makeBreadcrumbFacet(a)}),Ta=(e,t)=>({actionCause:oe.facetUpdateSort,getEventExtraPayload:r=>new ae(()=>r).getFacetUpdateSortMetadata(e,t)}),Xe=e=>({actionCause:oe.facetClearAll,getEventExtraPayload:t=>new ae(()=>t).getFacetClearAllMetadata(e)}),De=(e,t)=>({actionCause:oe.facetSelect,getEventExtraPayload:r=>new ae(()=>r).getFacetMetadata(e,t)}),hr=(e,t)=>({actionCause:oe.facetExclude,getEventExtraPayload:r=>new ae(()=>r).getFacetMetadata(e,t)}),Yr=(e,t)=>({actionCause:oe.facetDeselect,getEventExtraPayload:r=>new ae(()=>r).getFacetMetadata(e,t)}),am=(e,t)=>({actionCause:oe.facetUnexclude,getEventExtraPayload:r=>new ae(()=>r).getFacetMetadata(e,t)}),el=(e,t)=>({actionCause:oe.breadcrumbFacet,getEventExtraPayload:r=>new ae(()=>r).getFacetMetadata(e,t)});var Sr=(e,t)=>{var r,a;return(a=(r=e.facetOptions.facets[t])==null?void 0:r.enabled)!=null?a:!0};var yr=new w({regex:/^[a-zA-Z0-9-_]+$/}),Cr=new w({required:!0}),ox=new X({each:new w}),ix=new w,sx=new K,xr=new K,vr=new D({min:0}),_t=new D({min:1}),tl=new K({required:!0}),ZE=new q,ek=new w,tk={captions:ZE,numberOfValues:_t,query:ek},Ko=new q({values:tk}),rl=new q({options:{required:!1},values:{type:new w({constrainTo:["simple"],emptyAllowed:!1,required:!0}),values:new X({required:!0,max:25,each:new w({emptyAllowed:!1,required:!0})})}}),cx=new K,al=new X({min:1,max:25,required:!1,each:new w({emptyAllowed:!1,required:!0})});var bn={value:O,numberOfResults:new D({min:0}),state:O};var rk={facetId:ee,field:new w({required:!0,emptyAllowed:!0}),filterFacetCount:new K({required:!1}),injectionDepth:new D({required:!1,min:0}),numberOfValues:new D({required:!1,min:1}),sortCriteria:new me({required:!1}),resultsMustMatch:new me({required:!1}),allowedValues:rl,customSort:al},Ar=C("facet/register",e=>A(e,rk)),br=C("facet/toggleSelectValue",e=>A(e,{facetId:ee,selection:new q({values:bn})})),Fr=C("facet/toggleExcludeValue",e=>A(e,{facetId:ee,selection:new q({values:bn})})),Ae=C("facet/deselectAll",e=>A(e,ee)),Jo=C("facet/updateSortCriterion",e=>A(e,{facetId:ee,criterion:new me({required:!0})})),Fn=C("facet/updateNumberOfValues",e=>A(e,{facetId:ee,numberOfValues:new D({required:!0,min:1})})),Rn=C("facet/updateIsFieldExpanded",e=>A(e,{facetId:ee,isFieldExpanded:new K({required:!0})})),Kr=C("facet/updateFreezeCurrentValues",e=>A(e,{facetId:ee,freezeCurrentValues:new K({required:!0})}));function Pn(e){var o,i;let t=ux(e.start,e),r=ux(e.end,e),a=(o=e.endInclusive)!=null?o:!1,n=(i=e.state)!=null?i:"idle";return{start:t,end:r,endInclusive:a,state:n}}function ux(e,t){let{dateFormat:r}=t;return uC(e)?(dn(e),iC(e)):typeof e=="string"&&cr(e)?(dn(e),e):(Iu(e,r),qs(ln(e,r)))}var Xo=C("rangeFacet/updateSortCriterion",e=>A(e,{facetId:ee,criterion:new me({required:!0})}));var wn={state:O,start:new D({required:!0}),end:new D({required:!0}),endInclusive:new K({required:!0}),numberOfResults:new D({required:!0,min:0})},In={start:O,end:O,endInclusive:new K({required:!0}),state:O,numberOfResults:new D({required:!0,min:0})},En=e=>({facetId:ee,selection:typeof e.start=="string"?new q({values:In}):new q({values:wn})});var ak={start:O,end:O,endInclusive:new K({required:!0}),state:O},nk={facetId:ee,field:O,currentValues:new X({required:!1,each:new q({values:ak})}),generateAutomaticRanges:new K({required:!0}),filterFacetCount:new K({required:!1}),injectionDepth:new D({required:!1,min:0}),numberOfValues:new D({required:!1,min:1}),sortCriteria:new me({required:!1}),rangeAlgorithm:new me({required:!1})};function lx(e){return cr(e)?Ds(e):e}function nl(e){!e.currentValues||e.currentValues.forEach(t=>{let{start:r,end:a}=Pn(t);if(ln(lx(r)).isAfter(ln(lx(a))))throw new Error(`The start value is greater than the end value for the date range ${t.start} to ${t.end}`)})}var Rr=C("dateFacet/register",e=>{try{return nt(e,nk),nl(e),{payload:e,error:null}}catch(t){return{payload:e,error:Vt(t)}}}),Pr=C("dateFacet/toggleSelectValue",e=>A(e,{facetId:ee,selection:new q({values:In})})),wr=C("dateFacet/toggleExcludeValue",e=>A(e,{facetId:ee,selection:new q({values:In})})),Jr=C("dateFacet/updateFacetValues",e=>{try{return nt(e,{facetId:ee,values:new X({each:new q({values:In})})}),nl({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:Vt(t)}}}),ol=Xo,il=Ae;var ok={state:O,start:new D({required:!0}),end:new D({required:!0}),endInclusive:new K({required:!0})},ik={facetId:ee,field:O,currentValues:new X({required:!1,each:new q({values:ok})}),generateAutomaticRanges:new K({required:!0}),filterFacetCount:new K({required:!1}),injectionDepth:new D({required:!1,min:0}),numberOfValues:new D({required:!1,min:1}),sortCriteria:new me({required:!1}),rangeAlgorithm:new me({required:!1})};function sl(e){!e.currentValues||e.currentValues.forEach(({start:t,end:r})=>{if(t>r)throw new Error(`The start value is greater than the end value for the numeric range ${t} to ${r}`)})}var Ir=C("numericFacet/register",e=>{try{return A(e,ik),sl(e),{payload:e,error:null}}catch(t){return{payload:e,error:Vt(t)}}}),Er=C("numericFacet/toggleSelectValue",e=>A(e,{facetId:ee,selection:new q({values:wn})})),kr=C("numericFacet/toggleExcludeValue",e=>A(e,{facetId:ee,selection:new q({values:wn})})),Xr=C("numericFacet/updateFacetValues",e=>{try{return nt(e,{facetId:ee,values:new X({each:new q({values:wn})})}),sl({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:Vt(t)}}}),cl=Xo,ul=Ae;var Qe=T(fa(),e=>{e.addCase(ie,(t,r)=>({...t,...r.payload})).addCase(I.fulfilled,t=>{t.freezeFacetOrder=!1}).addCase(I.rejected,t=>{t.freezeFacetOrder=!1}).addCase(ce.fulfilled,(t,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.facetOptions)!=null?n:t}).addCase(dr,(t,r)=>{t.facets[r.payload.facetId]=zn()}).addCase(Ar,(t,r)=>{t.facets[r.payload.facetId]=zn()}).addCase(Rr,(t,r)=>{t.facets[r.payload.facetId]=zn()}).addCase(Ir,(t,r)=>{t.facets[r.payload.facetId]=zn()}).addCase(Ke,(t,r)=>{t.facets[r.payload].enabled=!0}).addCase(ve,(t,r)=>{t.facets[r.payload].enabled=!1}).addCase(ue,(t,r)=>{var a,n,o,i,s;[...Object.keys((a=r.payload.f)!=null?a:{}),...Object.keys((n=r.payload.fExcluded)!=null?n:{}),...Object.keys((o=r.payload.cf)!=null?o:{}),...Object.keys((i=r.payload.nf)!=null?i:{}),...Object.keys((s=r.payload.df)!=null?s:{})].forEach(c=>{c in t||(t.facets[c]=zn()),t.facets[c].enabled=!0})})});function dx(e,t){let{field:r,state:a}=e;if(!sk(e))return r;let n=`${r}_`,o=ck(n,a);return lk(r,t),`${n}${o}`}function sk(e){let{field:t,state:r}=e;return px(r).some(n=>n&&t in n)}function ck(e,t){let a=px(t).map(n=>Object.keys(n||{})).reduce((n,o)=>n.concat(o),[]);return uk(a,e)+1}function px(e){let{facetSet:t,numericFacetSet:r,dateFacetSet:a,categoryFacetSet:n}=e;return[t,r,a,n]}function uk(e,t){let r=0,n=e.map(o=>{let i=o.split(t)[1],s=parseInt(i,10);return Number.isNaN(s)?r:s}).sort().pop();return n!=null?n:r}function lk(e,t){let r=`A facet with field "${e}" already exists.
  To avoid unexpected behaviour, configure the #id option on the facet controller.`;t.warn(r)}function Ze(e,t){let{state:r,logger:a}=e,{field:n,facetId:o}=t;return o||dx({field:n,state:r},a)}var fx=["alphanumeric","occurrences"];var mx=new Y({field:Cr,basePath:ox,delimitingCharacter:ix,facetId:yr,facetSearch:Ko,filterByBasePath:sx,filterFacetCount:xr,injectionDepth:vr,numberOfValues:_t,sortCriteria:new w({constrainTo:fx})});function gx(e,t){if(!dk(e))throw k;let r=M(e),{dispatch:a}=e,n=Ze(e,t.options),o={...Bs,...Oc("facetSearch",t.options),field:t.options.field,facetId:n},i={facetSearch:{...mr,...t.options.facetSearch},...o};he(e,mx,i,"buildCategoryFacet");let s=()=>Rf(e.state,n),c=()=>Ff(e.state,n),u=()=>ar(e.state),l=()=>Sr(e.state,n);return a(dr(o)),{...r,toggleSelect(d){let p=i.numberOfValues;a(ka({facetId:n,selection:d,retrieveCount:p})),a(ie())},deselectAll(){a(pr(n)),a(ie())},sortBy(d){a($o({facetId:n,criterion:d})),a(ie())},isSortedBy(d){return s().sortCriteria===d},showMoreValues(){var g;let{numberOfValues:d}=i,{activeValue:p,valuesAsTrees:f}=this.state,m=((g=p==null?void 0:p.children.length)!=null?g:f.length)+d;a(Cn({facetId:n,numberOfValues:m})),a(ie())},showLessValues(){let{numberOfValues:d}=i;a(Cn({facetId:n,numberOfValues:d})),a(ie())},enable(){a(Ke(n))},disable(){a(ve(n))},get state(){var U,_,fe,Se;let d=s(),p=c(),f=u(),m=l(),g=(U=p==null?void 0:p.values)!=null?U:[],S=(_=g.some(j=>j.children.length>0))!=null?_:!1,{parents:y,values:x}=Cy(p==null?void 0:p.values),b=gt(g),P=b.length?b[b.length-1]:void 0,N=!!P,H=(Se=(fe=P==null?void 0:P.moreValuesAvailable)!=null?fe:p==null?void 0:p.moreValuesAvailable)!=null?Se:!1,Z=P?P.children.length>i.numberOfValues:g.length>i.numberOfValues;return{facetId:n,parents:y,selectedValueAncestry:b,values:x,isHierarchical:S,valuesAsTrees:g,activeValue:P,isLoading:f,hasActiveValues:N,canShowMoreValues:H,canShowLessValues:Z,sortCriteria:d.sortCriteria,enabled:m}}}}function dk(e){return e.addReducers({categoryFacetSet:fr,categoryFacetSearchSet:Go,facetOptions:Qe,configuration:$,search:J}),!0}function Zo(e,t){let r=e.dispatch,{options:a,getFacetSearch:n,executeFacetSearchActionCreator:o,executeFieldSuggestActionCreator:i}=t,{facetId:s}=a;return{updateText(c){r(qa({facetId:s,query:c,numberOfValues:n().initialNumberOfValues}))},showMoreResults(){let{initialNumberOfValues:c,options:u}=n();r(qa({facetId:s,numberOfValues:u.numberOfValues+c})),r(t.isForFieldSuggestions?i(s):o(s))},search(){r(t.isForFieldSuggestions?i(s):o(s))},clear(){r(Ho({facetId:s}))},updateCaptions(c){r(qa({facetId:s,captions:c}))},get state(){let{response:c,isLoading:u,options:l}=n(),{query:d}=l,p=c.values;return{...c,values:p,isLoading:u,query:d}}}}function hx(e,t){let{dispatch:r}=e,a={...mr,...t.options},{facetId:n}=a,o=()=>e.state.categoryFacetSearchSet[n];r(jo(a));let i=Zo(e,{options:a,getFacetSearch:o,isForFieldSuggestions:t.isForFieldSuggestions,executeFacetSearchActionCreator:Je,executeFieldSuggestActionCreator:Oa});return{...i,select(s){r(Bo({facetId:n,value:s}))},get state(){return i.state}}}function ll(e,t){let{dispatch:r}=e,a={...mr,...t.options},{facetId:n}=a,o=()=>e.state.categoryFacetSearchSet[n],i=hx(e,{options:{...a},isForFieldSuggestions:t.isForFieldSuggestions});r(jo(a));let s=Zo(e,{options:a,getFacetSearch:o,isForFieldSuggestions:t.isForFieldSuggestions,executeFacetSearchActionCreator:Je,executeFieldSuggestActionCreator:Oa});return{...s,...i,select:c=>{i.select(c),r(ie()),r(I({legacy:Pe({facetId:n,facetValue:c.rawValue}),next:De(n,c.rawValue)}))},get state(){return{...s.state,...i.state}}}}function pk(e,t){if(!fk(e))throw k;let r=gx(e,t),{dispatch:a}=e,n=()=>r.state.facetId,o=ll(e,{options:{facetId:n(),...t.options.facetSearch},isForFieldSuggestions:!1}),{state:i,...s}=o;return{...r,facetSearch:s,toggleSelect(c){r.toggleSelect(c),a(I({legacy:mk(n(),c),next:gk(n(),c)}))},deselectAll(){r.deselectAll(),a(I({legacy:Ne(n()),next:Xe(n())}))},sortBy(c){r.sortBy(c),a(I({legacy:gr({facetId:n(),criterion:c}),next:Ta(n(),c)}))},showMoreValues(){r.showMoreValues(),a(lr({legacy:zo(n())}))},showLessValues(){r.showLessValues(),a(lr({legacy:Wo(n())}))},get state(){return{...r.state,facetSearch:o.state}}}}function fk(e){return e.addReducers({categoryFacetSet:fr,categoryFacetSearchSet:Go,configuration:$,search:J}),!0}function mk(e,t){let r={facetId:e,facetValue:t.value};return t.state==="selected"?Ut(r):Pe(r)}function gk(e,t){return t.state==="selected"?Yr(e,t.value):De(e,t.value)}var nm={url:O,referrer:wh},om={userId:de,email:de,userIp:de,userAgent:de},im={trackingId:O,language:O,country:O,currency:O,user:new q({values:{...om}}),view:new q({options:{required:!0},values:{...nm}})},u6=new Y(im);var g6=C("commerce/setContext",e=>A(e,im)),h6=C("commerce/setUser",e=>te(e.userId)&&te(e.email)?{payload:e,error:Vt(new Ya("Either userId or email is required"))}:A(e,om)),Sx=C("commerce/setView",e=>A(e,nm));var ei=async e=>{let t=hk(e),{view:r,user:a,...n}=e.commerceContext;return{accessToken:e.configuration.accessToken,url:e.configuration.platformUrl,organizationId:e.configuration.organizationId,...n,clientId:await We(e.configuration.analytics),context:{user:a,view:r,cart:e.cart.cartItems.map(o=>e.cart.cart[o])},facets:t,...e.commercePagination&&{page:e.commercePagination.page},...e.commerceSort&&{sort:Sk(e.commerceSort.appliedSort)}}};function hk(e){return!e.facetOrder||!e.commerceFacetSet?[]:e.facetOrder.map(t=>e.commerceFacetSet[t].request).filter(t=>t.values.length>0)}function Sk(e){if(!!e)return e.by===Mt.Relevance?{sortCriteria:Mt.Relevance}:{sortCriteria:Mt.Fields,fields:e.fields.map(({name:t,direction:r})=>({field:t,direction:r}))}}var yx=async(e,t,r)=>{var S;let n=`*${t.facetSearchSet[e].options.query}*`,o=(S=t.query)==null?void 0:S.q,{url:i,accessToken:s,organizationId:c,trackingId:u,language:l,country:d,currency:p,clientId:f,context:m,...g}=await ei(t);return{url:i,accessToken:s,organizationId:c,facetId:e,facetQuery:n,trackingId:u,language:l,country:d,currency:p,clientId:f,context:m,...!r&&{...g,query:o}}};var Cx=e=>async(t,{getState:r,extra:{apiClient:a,validatePayload:n}})=>{let o=r();n(t,O);let i=await yx(t,o,e),s=await a.facetSearch(i);return{facetId:t,response:s}},dl=W("commerce/facetSearch/executeSearch",Cx(!1)),I6=W("commerce/facetSearch/executeSearch",Cx(!0));var pl=()=>Qy("analytics/commerce/productListing/load",e=>e.makeInterfaceLoad(),e=>new ao(e));var fl=W("commerce/productListing/fetch",async(e,{getState:t,dispatch:r,rejectWithValue:a,extra:n})=>{let o=t(),{apiClient:i}=n,s=await i.getProductListing(await ei(o));return ye(s)?(r(lt(s.error)),a(s.error)):{response:s.success,analyticsAction:pl()}});var ml=W("commerce/search/executeSearch",async(e,{getState:t,dispatch:r,rejectWithValue:a,extra:n})=>{var c;let o=t(),{apiClient:i}=n,s=await i.search({...await ei(o),query:(c=o.commerceQuery)==null?void 0:c.query});return ye(s)?(r(lt(s.error)),a(s.error)):{response:s.success,analyticsAction:pl()}});var ti=T(Xa(),e=>{e.addCase(Zu,(t,r)=>{let a=r.payload;Ku(t,a,ri)}).addCase(qa,(t,r)=>{Ju(t,r.payload)}).addCase(dl.pending,(t,r)=>{let a=r.meta.arg;js(t,a,r.meta.requestId)}).addCase(Je.pending,(t,r)=>{let a=r.meta.arg;js(t,a,r.meta.requestId)}).addCase(dl.rejected,(t,r)=>{let a=r.meta.arg;Us(t,a)}).addCase(Je.rejected,(t,r)=>{let a=r.meta.arg;Us(t,a)}).addCase(dl.fulfilled,(t,r)=>{ex(t,r.payload,r.meta.requestId)}).addCase(Je.fulfilled,(t,r)=>{Xu(t,r.payload,r.meta.requestId)}).addCase(Ho,(t,{payload:r})=>{_s(t,r,ri)}).addCase(I.fulfilled,t=>{xn(t,ri)}).addCase(fl.fulfilled,t=>xn(t,ri)).addCase(ml.fulfilled,t=>xn(t,ri)).addCase(Sx,t=>xn(t,ri))});function ri(){return{moreValuesAvailable:!1,values:[]}}var xx=()=>By("analytics/productListing/load",e=>e.makeInterfaceLoad(),e=>new no(e));var F5=C("productlisting/setUrl",e=>A(e,{url:new w({required:!0,url:!0})})),R5=C("productlisting/setAdditionalFields",e=>A(e,{additionalFields:new X({required:!0,each:new w({required:!0,emptyAllowed:!1})})})),Da=W("productlisting/fetch",async(e,{getState:t,dispatch:r,rejectWithValue:a,extra:n})=>{let o=t(),{apiClient:i}=n,s=await i.getProducts(await yk(o));return ye(s)?(r(lt(s.error)),a(s.error)):{response:s.success,analyticsAction:xx()}}),yk=async e=>{var a,n,o;let t=xk(e),r=await We(e.configuration.analytics);return{accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,platformUrl:e.configuration.platformUrl,url:(a=e.productListing)==null?void 0:a.url,...e.configuration.analytics.enabled&&r?{clientId:r}:{},...((n=e.productListing.additionalFields)==null?void 0:n.length)?{additionalFields:e.productListing.additionalFields}:{},...e.productListing.advancedParameters&&Ck(e.productListing.advancedParameters)?{advancedParameters:e.productListing.advancedParameters||{}}:{},...t.length&&{facets:{requests:t}},...e.pagination&&{pagination:{numberOfValues:e.pagination.numberOfResults,page:Math.ceil(e.pagination.firstResult/(e.pagination.numberOfResults||1))+1}},...(((o=e.sort)==null?void 0:o.by)||Mt.Relevance)!==Mt.Relevance&&{sort:e.sort},...e.context&&{userContext:e.context.contextValues}}};function Ck(e){return e.debug}function xk(e){var t;return Ro(vk(e),(t=e.facetOrder)!=null?t:[])}function vk(e){var t,r,a,n;return[...zr((t=e.facetSet)!=null?t:{}),...zr((r=e.numericFacetSet)!=null?r:{}),...zr((a=e.dateFacetSet)!=null?a:{}),...zr((n=e.categoryFacetSet)!=null?n:{})]}var Or=T(Kt(),e=>{e.addCase(Ar,(t,r)=>{let{facetId:a}=r.payload;a in t||(t[a]=hS(Ak(r.payload)))}).addCase(ce.fulfilled,(t,r)=>{if(!!r.payload&&Object.keys(r.payload.facetSet).length!==0)return r.payload.facetSet}).addCase(ue,(t,r)=>{let a=r.payload.f||{},n=r.payload.fExcluded||{};Object.keys(t).forEach(i=>{let{request:s}=t[i],c=a[i]||[],u=n[i]||[],l=c.length+u.length,d=s.currentValues.filter(p=>!c.includes(p.value)&&!u.includes(p.value));s.currentValues=[...c.map(vx),...u.map(Ax),...d.map(Fk)],s.preventAutoSelect=l>0,s.numberOfValues=Math.max(l,s.numberOfValues)})}).addCase(br,(t,r)=>{var c;let{facetId:a,selection:n}=r.payload,o=(c=t[a])==null?void 0:c.request;if(!o)return;o.preventAutoSelect=!0;let i=o.currentValues.find(u=>u.value===n.value);if(!i){gl(o,n);return}let s=i.state==="selected";i.state=s?"idle":"selected",o.freezeCurrentValues=!0}).addCase(Fr,(t,r)=>{var c;let{facetId:a,selection:n}=r.payload,o=(c=t[a])==null?void 0:c.request;if(!o)return;o.preventAutoSelect=!0;let i=o.currentValues.find(u=>u.value===n.value);if(!i){gl(o,n);return}let s=i.state==="excluded";i.state=s?"idle":"excluded",o.freezeCurrentValues=!0}).addCase(Kr,(t,r)=>{var i;let{facetId:a,freezeCurrentValues:n}=r.payload,o=(i=t[a])==null?void 0:i.request;!o||(o.freezeCurrentValues=n)}).addCase(Ae,(t,r)=>{var a;Qs((a=t[r.payload])==null?void 0:a.request)}).addCase(Fe,t=>{Object.values(t).filter(r=>r.hasBreadcrumbs).forEach(({request:r})=>Qs(r))}).addCase(va,t=>{Object.values(t).filter(r=>!r.hasBreadcrumbs).forEach(({request:r})=>Qs(r))}).addCase(bt,(t,r)=>Object.values(t).forEach(a=>{a.request.preventAutoSelect=!r.payload.allow})).addCase(Jo,(t,r)=>{Uo(t,r.payload)}).addCase(Fn,(t,r)=>{var o;let{facetId:a,numberOfValues:n}=r.payload;zu((o=t[a])==null?void 0:o.request,n)}).addCase(Rn,(t,r)=>{var i;let{facetId:a,isFieldExpanded:n}=r.payload,o=(i=t[a])==null?void 0:i.request;!o||(o.isFieldExpanded=n)}).addCase(I.fulfilled,(t,r)=>{r.payload.response.facets.forEach(n=>{var o;return sm((o=t[n.facetId])==null?void 0:o.request,n)})}).addCase(Da.fulfilled,(t,r)=>{var n,o;(((o=(n=r.payload.response)==null?void 0:n.facets)==null?void 0:o.results)||[]).forEach(i=>{var s;return sm((s=t[i.facetId])==null?void 0:s.request,i)})}).addCase(lr.fulfilled,(t,r)=>{r.payload.response.facets.forEach(n=>{var o;return sm((o=t[n.facetId])==null?void 0:o.request,n)})}).addCase(vn,(t,r)=>{var l;let{facetId:a,value:n}=r.payload,o=(l=t[a])==null?void 0:l.request;if(!o)return;let{rawValue:i}=n,{currentValues:s}=o,c=s.find(d=>d.value===i);if(c){c.state="selected";return}let u=vx(i);gl(o,u),o.freezeCurrentValues=!0,o.preventAutoSelect=!0}).addCase(An,(t,r)=>{var l;let{facetId:a,value:n}=r.payload,o=(l=t[a])==null?void 0:l.request;if(!o)return;let{rawValue:i}=n,{currentValues:s}=o,c=s.find(d=>d.value===i);if(c){c.state="excluded";return}let u=Ax(i);gl(o,u),o.freezeCurrentValues=!0,o.preventAutoSelect=!0}).addCase(ve,(t,r)=>{if(!(r.payload in t))return;let{request:a}=t[r.payload];Qs(a)})});function gl(e,t){let{currentValues:r}=e,a=r.findIndex(s=>s.state==="idle"),n=a===-1?r.length:a,o=r.slice(0,n),i=r.slice(n+1);e.currentValues=[...o,t,...i],e.numberOfValues=e.currentValues.length}function sm(e,t){!e||(e.currentValues=t.values.map(bk),e.freezeCurrentValues=!1,e.preventAutoSelect=!1)}var $s={filterFacetCount:!0,injectionDepth:1e3,numberOfValues:8,sortCriteria:"automatic",resultsMustMatch:"atLeastOneValue"};function Ak(e){return{...$s,type:"specific",currentValues:[],freezeCurrentValues:!1,isFieldExpanded:!1,preventAutoSelect:!1,...e}}function bk(e){let{value:t,state:r}=e;return{value:t,state:r}}function vx(e){return{value:e,state:"selected"}}function Ax(e){return{value:e,state:"excluded"}}function Fk(e){return{...e,state:"idle"}}var hl=e=>e.state==="selected",Sl=e=>e.state==="excluded",yl=(e,t)=>{let r={facetId:e,facetValue:t.value};return hl(t)?Ut(r):Pe(r)},Cl=(e,t)=>hl(t)?Yr(e,t.value):De(e,t.value),bx=(e,t)=>{let r={facetId:e,facetValue:t.value};return Sl(t)?Wr(r):St(r)},Fx=(e,t)=>Sl(t)?am(e,t.value):hr(e,t.value);function xl(e,t){let{dispatch:r}=e,{options:a,select:n,exclude:o,isForFieldSuggestions:i,executeFacetSearchActionCreator:s,executeFieldSuggestActionCreator:c}=t,{facetId:u}=a,l=()=>e.state.facetSearchSet[u];r(Zu(a));let d=Zo(e,{options:a,getFacetSearch:l,isForFieldSuggestions:i,executeFacetSearchActionCreator:s,executeFieldSuggestActionCreator:c});return{...d,select(p){r(vn({facetId:u,value:p})),n(p)},exclude(p){r(An({facetId:u,value:p})),o(p)},singleSelect(p){r(Ae(u)),r(vn({facetId:u,value:p})),n(p)},singleExclude(p){r(Ae(u)),r(An({facetId:u,value:p})),o(p)},get state(){let{values:p}=d.state;return{...d.state,values:p.map(({count:f,displayValue:m,rawValue:g})=>({count:f,displayValue:m,rawValue:g}))}}}}var Rx={facetId:ee,selection:new q({values:bn})},Px=W("facet/executeToggleSelect",({facetId:e,selection:t},r)=>{let{dispatch:a,extra:{validatePayload:n}}=r;n({facetId:e,selection:t},Rx),a(br({facetId:e,selection:t})),a(ie())}),wx=W("facet/executeToggleExclude",({facetId:e,selection:t},r)=>{let{dispatch:a,extra:{validatePayload:n}}=r;n({facetId:e,selection:t},Rx),a(Fr({facetId:e,selection:t})),a(ie())});var ai=["allValues","atLeastOneValue"];var vl=["score","alphanumeric","alphanumericDescending","occurrences","automatic"];var Ix=new Y({facetId:yr,field:Cr,filterFacetCount:xr,injectionDepth:vr,numberOfValues:_t,sortCriteria:new w({constrainTo:vl}),resultsMustMatch:new w({constrainTo:ai}),facetSearch:Ko});function Ex(e,t,r=Ix){if(!Rk(e))throw k;let{dispatch:a}=e,n=M(e),o=Ze(e,t.options),i={...$s,...Oc("facetSearch",t.options),field:t.options.field,facetId:o},s={facetSearch:{...mr,...t.options.facetSearch},...i};he(e,r,s,"buildFacet");let c=()=>bf(e.state,o),u=()=>Is(e.state,o),l=()=>ar(e.state),d=()=>Sr(e.state,o),p=()=>{let{currentValues:m}=c();return m.filter(g=>g.state!=="idle").length},f=()=>{let{currentValues:m}=c(),g=s.numberOfValues,S=!!m.find(y=>y.state==="idle");return g<m.length&&S};return a(Ar(i)),{...n,toggleSelect:m=>a(Px({facetId:s.facetId,selection:m})),toggleExclude:m=>a(wx({facetId:s.facetId,selection:m})),toggleSingleSelect:function(m){m.state==="idle"&&a(Ae(o)),this.toggleSelect(m)},toggleSingleExclude:function(m){m.state==="idle"&&a(Ae(o)),this.toggleExclude(m)},isValueSelected:hl,isValueExcluded:Sl,deselectAll(){a(Ae(o)),a(ie())},sortBy(m){a(Jo({facetId:o,criterion:m})),a(ie())},isSortedBy(m){return this.state.sortCriterion===m},showMoreValues(){let m=c().numberOfValues,g=s.numberOfValues,S=g-m%g,y=m+S;a(Fn({facetId:o,numberOfValues:y})),a(Rn({facetId:o,isFieldExpanded:!0})),a(ie())},showLessValues(){let m=s.numberOfValues,g=Math.max(m,p());a(Fn({facetId:o,numberOfValues:g})),a(Rn({facetId:o,isFieldExpanded:!1})),a(ie())},enable(){a(Ke(o))},disable(){a(ve(o))},get state(){let m=c(),g=u(),S=l(),y=d(),x;typeof m.sortCriteria=="object"?x=m.sortCriteria.order==="descending"?"alphanumericDescending":"alphanumeric":x=m.sortCriteria;let b=g?g.values:[],P=b.some(Z=>Z.state!=="idle"),N=g?g.moreValuesAvailable:!1,H=m.resultsMustMatch;return{label:g==null?void 0:g.label,facetId:o,values:b,sortCriterion:x,resultsMustMatch:H,isLoading:S,hasActiveValues:P,canShowMoreValues:N,canShowLessValues:f(),enabled:y}}}}function Rk(e){return e.addReducers({facetSet:Or,facetOptions:Qe,configuration:$,facetSearchSet:ti}),!0}var kx=new Y({facetId:yr,field:Cr,filterFacetCount:xr,injectionDepth:vr,numberOfValues:_t,sortCriteria:new w({constrainTo:vl}),resultsMustMatch:new w({constrainTo:ai}),facetSearch:Ko,allowedValues:rl,hasBreadcrumbs:cx,customSort:al});function Pk(e,t){if(!wk(e))throw k;let{dispatch:r}=e,a=Ex(e,{...t,options:{...t.options,...t.options.allowedValues&&{allowedValues:{type:"simple",values:t.options.allowedValues}}}},kx),n=()=>a.state.facetId,i=(()=>{let{facetSearch:u}=t.options;return xl(e,{options:{facetId:n(),...u},select:l=>{r(ie()),r(I({legacy:Pe({facetId:n(),facetValue:l.rawValue}),next:De(n(),l.rawValue)}))},exclude:l=>{r(ie()),r(I({legacy:St({facetId:n(),facetValue:l.rawValue}),next:hr(n(),l.rawValue)}))},isForFieldSuggestions:!1,executeFacetSearchActionCreator:Je,executeFieldSuggestActionCreator:Oa})})(),{state:s,...c}=i;return{...a,facetSearch:c,toggleSelect(u){a.toggleSelect(u),r(I({legacy:yl(n(),u),next:Cl(n(),u)}))},toggleExclude(u){a.toggleExclude(u),r(I({legacy:bx(n(),u),next:Fx(n(),u)}))},deselectAll(){a.deselectAll(),r(I({legacy:Ne(n()),next:Xe(n())}))},sortBy(u){a.sortBy(u),r(I({legacy:gr({facetId:n(),criterion:u}),next:Ta(n(),u)}))},isSortedBy(u){return this.state.sortCriterion===u},showMoreValues(){a.showMoreValues(),r(lr({legacy:zo(n())}))},showLessValues(){a.showLessValues(),r(lr({legacy:Wo(n())}))},get state(){return{...a.state,facetSearch:i.state}}}}function wk(e){return e.addReducers({facetSet:Or,configuration:$,facetSearchSet:ti,search:J}),!0}var Al=e=>e.state==="selected",cm=e=>e.state==="excluded",bl=(e,t)=>{let r=`${t.start}..${t.end}`,a={facetId:e,facetValue:r};return Al(t)?Ut(a):Pe(a)},Fl=(e,t)=>{let r=`${t.start}..${t.end}`;return Al(t)?Yr(e,r):De(e,r)},Ox=(e,t)=>{let r=`${t.start}..${t.end}`,a={facetId:e,facetValue:r};return cm(t)?Wr(a):St(a)};var Rl=C("rangeFacet/executeToggleSelect",e=>A(e,En(e.selection))),Pl=C("rangeFacet/executeToggleExclude",e=>A(e,En(e.selection)));var qx={facetId:ee,selection:new q({values:In})},Tx=W("dateFacet/executeToggleSelect",(e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,qx),t(Pr(e)),t(Rl(e)),t(ie())}),Dx=W("dateFacet/executeToggleExclude",(e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,qx),t(wr(e)),t(Pl(e)),t(ie())});var wl={filterFacetCount:!0,injectionDepth:1e3,numberOfValues:8,sortCriteria:"ascending",rangeAlgorithm:"even",resultsMustMatch:"atLeastOneValue"};function Il(e,t){let{request:r}=t,{facetId:a}=r;if(a in e)return;let n=Vx(r);r.numberOfValues=n,e[a]=t}function El(e,t,r){var n;let a=(n=e[t])==null?void 0:n.request;!a||(a.currentValues=r,a.numberOfValues=Vx(a))}function kl(e,t,r){var i;let a=(i=e[t])==null?void 0:i.request;if(!a)return;let n=Tl(a.currentValues,r);if(!n)return;let o=n.state==="selected";n.state=o?"idle":"selected",a.preventAutoSelect=!0}function Ol(e,t,r){var i;let a=(i=e[t])==null?void 0:i.request;if(!a)return;let n=Tl(a.currentValues,r);if(!n)return;let o=n.state==="excluded";n.state=o?"idle":"excluded",a.preventAutoSelect=!0}function Va(e,t){var a;let r=(a=e[t])==null?void 0:a.request;!r||r.currentValues.forEach(n=>n.state="idle")}function ql(e,t){Object.entries(e).forEach(([r,{request:a}])=>{let n=t[r]||[];a.currentValues.forEach(s=>{let c=!!Tl(n,s);return s.state=c?"selected":"idle",s});let o=n.filter(s=>!Tl(a.currentValues,s)),i=a.currentValues;i.push(...o),a.numberOfValues=Math.max(a.numberOfValues,i.length)})}function ni(e,t,r){t.forEach(a=>{var s;let n=a.facetId,o=(s=e[n])==null?void 0:s.request;if(!o)return;let i=r(a.values);o.currentValues=i,o.preventAutoSelect=!1})}function Tl(e,t){let{start:r,end:a}=t;return e.find(n=>n.start===r&&n.end===a)}function Vx(e){let{generateAutomaticRanges:t,currentValues:r,numberOfValues:a}=e;return t?Math.max(a,r.length):r.length}var qr=T(Jt(),e=>{e.addCase(Rr,(t,r)=>{let{payload:a}=r,n=Ik(a);Il(t,SS(n))}).addCase(ce.fulfilled,(t,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.dateFacetSet)!=null?n:t}).addCase(ue,(t,r)=>{let a=r.payload.df||{};ql(t,a)}).addCase(Pr,(t,r)=>{let{facetId:a,selection:n}=r.payload;kl(t,a,n)}).addCase(wr,(t,r)=>{let{facetId:a,selection:n}=r.payload;Ol(t,a,n)}).addCase(Jr,(t,r)=>{let{facetId:a,values:n}=r.payload;El(t,a,n)}).addCase(il,(t,r)=>{Va(t,r.payload)}).addCase(Fe,t=>{Object.keys(t).forEach(r=>{Va(t,r)})}).addCase(ol,(t,r)=>{Uo(t,r.payload)}).addCase(I.fulfilled,(t,r)=>{let a=r.payload.response.facets;ni(t,a,Mx)}).addCase(Da.fulfilled,(t,r)=>{var n,o;let a=((o=(n=r.payload.response)==null?void 0:n.facets)==null?void 0:o.results)||[];ni(t,a,Mx)}).addCase(ve,(t,r)=>{Va(t,r.payload)})});function Ik(e){return{...wl,currentValues:[],preventAutoSelect:!1,type:"dateRange",...e}}function Mx(e){return e.map(t=>{let{numberOfResults:r,...a}=t;return a})}function Dl(e,t){let{facetId:r,getRequest:a}=t,n=M(e),o=e.dispatch,i=()=>Sr(e.state,r);return{...n,isValueSelected:Al,isValueExcluded:cm,deselectAll(){o(Ae(r)),o(ie())},sortBy(s){o(Xo({facetId:r,criterion:s})),o(ie())},isSortedBy(s){return this.state.sortCriterion===s},enable(){o(Ke(r))},disable(){o(ve(r))},get state(){let s=a(),c=rr(e.state,r),u=s.sortCriteria,l=s.resultsMustMatch,d=c?c.values:[],p=ar(e.state),f=i(),m=d.some(g=>g.state!=="idle");return{facetId:r,values:d,sortCriterion:u,resultsMustMatch:l,hasActiveValues:m,isLoading:p,enabled:f}}}}function Vl(e,t){if(!e.generateAutomaticRanges&&e.currentValues===void 0){let r=`currentValues should be specified for ${t} when generateAutomaticRanges is false.`;throw new Error(r)}}var Ml=["idle","selected","excluded"];var Ll=["ascending","descending"],Nl=["even","equiprobable"];var Ek={start:new w,end:new w,endInclusive:new K,state:new w({constrainTo:Ml})},kk=new Y({facetId:yr,field:Cr,generateAutomaticRanges:tl,filterFacetCount:xr,injectionDepth:vr,numberOfValues:_t,currentValues:new X({each:new q({values:Ek})}),sortCriteria:new w({constrainTo:Ll}),rangeAlgorithm:new w({constrainTo:Nl})});function Ql(e,t){he(e,kk,t,"buildDateFacet"),nl(t)}function Lx(e,t){if(!Ok(e))throw k;Vl(t.options,"buildDateFacet");let r=e.dispatch,a=Ze(e,t.options),n={currentValues:[],...t.options,facetId:a};Ql(e,n),r(Rr(n));let o=Dl(e,{facetId:a,getRequest:()=>e.state.dateFacetSet[a].request});return{...o,toggleSelect:i=>r(Tx({facetId:a,selection:i})),toggleSingleSelect:function(i){i.state==="idle"&&r(Ae(a)),this.toggleSelect(i)},toggleExclude:i=>r(Dx({facetId:a,selection:i})),toggleSingleExclude:function(i){i.state==="idle"&&r(Ae(a)),this.toggleExclude(i)},get state(){return o.state}}}function Ok(e){return e.addReducers({configuration:$,search:J,dateFacetSet:qr,facetOptions:Qe}),!0}function qk(e,t){let r=Lx(e,t),a=e.dispatch,n=()=>r.state.facetId;return{...r,deselectAll(){r.deselectAll(),a(I({legacy:Ne(n()),next:Xe(n())}))},sortBy(o){r.sortBy(o),a(I({legacy:gr({facetId:n(),criterion:o}),next:Ta(n(),o)}))},toggleSelect:o=>{r.toggleSelect(o),a(I({legacy:bl(n(),o),next:Fl(n(),o)}))},toggleExclude:o=>{r.toggleExclude(o),a(I({legacy:Ox(n(),o)}))},get state(){return r.state}}}var Pt=T(Xt(),e=>{e.addCase(Ir,(t,r)=>{let{payload:a}=r,n=Tk(a);Il(t,yS(n))}).addCase(ce.fulfilled,(t,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.numericFacetSet)!=null?n:t}).addCase(ue,(t,r)=>{let a=r.payload.nf||{};ql(t,a)}).addCase(Er,(t,r)=>{let{facetId:a,selection:n}=r.payload;kl(t,a,n)}).addCase(kr,(t,r)=>{let{facetId:a,selection:n}=r.payload;Ol(t,a,n)}).addCase(Xr,(t,r)=>{let{facetId:a,values:n}=r.payload;El(t,a,n)}).addCase(ul,(t,r)=>{Va(t,r.payload)}).addCase(Fe,t=>{Object.keys(t).forEach(r=>{Va(t,r)})}).addCase(cl,(t,r)=>{Uo(t,r.payload)}).addCase(I.fulfilled,(t,r)=>{let a=r.payload.response.facets;ni(t,a,Nx)}).addCase(Da.fulfilled,(t,r)=>{var n,o;let a=((o=(n=r.payload.response)==null?void 0:n.facets)==null?void 0:o.results)||[];ni(t,a,Nx)}).addCase(ve,(t,r)=>{Va(t,r.payload)})});function Tk(e){return{...wl,currentValues:[],preventAutoSelect:!1,type:"numericalRange",...e}}function Nx(e){return e.map(t=>{let{numberOfResults:r,...a}=t;return a})}var Qx={facetId:ee,selection:new q({values:wn})},Bx=W("numericFacet/executeToggleSelect",(e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,Qx),t(Er(e)),t(Rl(e)),t(ie())}),K9=W("numericFacet/executeToggleExclude",(e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,Qx),t(kr(e)),t(Pl(e)),t(ie())});var Dk={start:new D,end:new D,endInclusive:new K,state:new w({constrainTo:Ml})},Vk=new Y({facetId:yr,field:Cr,generateAutomaticRanges:tl,filterFacetCount:xr,injectionDepth:vr,numberOfValues:_t,currentValues:new X({each:new q({values:Dk})}),sortCriteria:new w({constrainTo:Ll}),resultsMustMatch:new w({constrainTo:ai}),rangeAlgorithm:new w({constrainTo:Nl})});function Bl(e,t){he(e,Vk,t,"buildNumericFacet"),sl(t)}function Hs(e){return{endInclusive:!1,state:"idle",...e}}function jx(e,t){if(!Mk(e))throw k;Vl(t.options,"buildNumericFacet");let r=e.dispatch,a=Ze(e,t.options),n={currentValues:[],...t.options,facetId:a};Bl(e,n),r(Ir(n));let o=Dl(e,{facetId:a,getRequest:()=>e.state.numericFacetSet[a].request});return{...o,toggleSelect:i=>r(Bx({facetId:a,selection:i})),toggleSingleSelect(i){i.state==="idle"&&r(Ae(a)),this.toggleSelect(i)},get state(){return o.state}}}function Mk(e){return e.addReducers({numericFacetSet:Pt,facetOptions:Qe,configuration:$,search:J}),!0}function Lk(e,t){if(!Nk(e))throw k;let r=jx(e,t),a=e.dispatch,n=()=>r.state.facetId;return{...r,deselectAll(){r.deselectAll(),a(I({legacy:Ne(n()),next:Xe(n())}))},sortBy(o){r.sortBy(o),a(I({legacy:gr({facetId:n(),criterion:o}),next:Ta(n(),o)}))},toggleSelect:o=>{r.toggleSelect(o),a(I({legacy:bl(n(),o),next:Fl(n(),o)}))},get state(){return{...r.state}}}}function Nk(e){return e.addReducers({numericFacetSet:Pt,configuration:$,search:J}),!0}function Qk(e,t){return!!t&&t.facetId in e.numericFacetSet}var Ux=(e,t)=>{let r=rr(e,t);if(Qk(e,r))return r},_x=(e,t)=>(Ux(e,t)||{values:[]}).values.filter(a=>a.state!=="idle"),$x=(e,t)=>(Ux(e,t)||{values:[]}).values.filter(a=>a.state==="selected");function Hx(e,t){var c;if(!Bk(e))throw k;let r=M(e),{dispatch:a}=e,n=()=>e.state,o=Ze(e,t.options),i={...t.options,currentValues:((c=t.initialState)==null?void 0:c.range)?[{...t.initialState.range,endInclusive:!0,state:"selected"}]:[],generateAutomaticRanges:!1,facetId:o};Bl(e,i),a(Ir(i));let s=()=>Sr(e.state,o);return{...r,clear:()=>{a(Xr({facetId:o,values:[]})),a(ie())},setRange:u=>{let l={...u,state:"selected",numberOfResults:0,endInclusive:!0},d=Xr({facetId:o,values:[l]});return d.error?!1:(a(d),a(ie()),!0)},enable(){a(Ke(o))},disable(){a(ve(o))},get state(){let u=ar(n()),l=s(),d=$x(n(),o),p=d.length?d[0]:void 0;return{facetId:o,isLoading:u,range:p,enabled:l}}}}function Bk(e){return e.addReducers({numericFacetSet:Pt,facetOptions:Qe,configuration:$,search:J}),!0}function jk(e,t){if(!Uk(e))throw k;let r=Hx(e,t),{dispatch:a}=e,n=()=>r.state.facetId;return{...r,clear:()=>{r.clear(),a(I({legacy:Ne(n()),next:Xe(n())}))},setRange:o=>{let i=r.setRange(o);return i&&a(I({legacy:Pe({facetId:n(),facetValue:`${o.start}..${o.end}`}),next:De(n(),`${o.start}..${o.end}`)})),i},get state(){return{...r.state}}}}function Uk(e){return e.addReducers({numericFacetSet:Pt,configuration:$,search:J}),!0}function _k(e,t){return!!t&&t.facetId in e.dateFacetSet}var Gx=(e,t)=>{let r=rr(e,t);if(_k(e,r))return r},zx=(e,t)=>(Gx(e,t)||{values:[]}).values.filter(a=>a.state==="selected"),Wx=(e,t)=>(Gx(e,t)||{values:[]}).values.filter(a=>a.state!=="idle");function Yx(e,t){var c;if(!$k(e))throw k;let r=M(e),{dispatch:a}=e,n=()=>e.state,o=Ze(e,t.options),i={...t.options,currentValues:((c=t.initialState)==null?void 0:c.range)?[{...t.initialState.range,endInclusive:!0,state:"selected"}]:[],generateAutomaticRanges:!1,facetId:o};Ql(e,i),a(Rr(i));let s=()=>Sr(e.state,o);return{...r,clear:()=>{a(Jr({facetId:o,values:[]})),a(ie())},setRange:u=>{let l={...u,state:"selected",numberOfResults:0,endInclusive:!0},d=Jr({facetId:o,values:[l]});return d.error?!1:(a(d),a(ie()),!0)},enable(){a(Ke(o))},disable(){a(ve(o))},get state(){let u=ar(n()),l=s(),d=zx(n(),o),p=d.length?d[0]:void 0;return{facetId:o,isLoading:u,range:p,enabled:l}}}}function $k(e){return e.addReducers({dateFacetSet:qr,facetOptions:Qe,configuration:$,search:J}),!0}function Hk(e,t){if(!Gk(e))throw k;let r=Yx(e,t),{dispatch:a}=e,n=()=>r.state.facetId;return{...r,clear:()=>{r.clear(),a(I({legacy:Ne(n()),next:Xe(n())}))},setRange:o=>{let i=r.setRange(o);return i&&a(I({legacy:Pe({facetId:n(),facetValue:`${o.start}..${o.end}`}),next:De(n(),`${o.start}..${o.end}`)})),i},get state(){return{...r.state}}}}function Gk(e){return e.addReducers({dateFacetSet:qr,configuration:$,search:J}),!0}var jl=T(da(),e=>{e.addCase(I.fulfilled,um).addCase(fl.fulfilled,um).addCase(ml.fulfilled,um).addCase(ce.fulfilled,(t,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.facetOrder)!=null?n:t})});function um(e,t){return t.payload.response.facets.map(r=>r.facetId)}var Ul=()=>E("history/analytics/forward",e=>e.makeSearchEvent("historyForward")),_l=()=>E("history/analytics/backward",e=>e.makeSearchEvent("historyBackward")),$l=()=>E("history/analytics/noresultsback",e=>e.makeNoResultsBack()),Kx=()=>({actionCause:oe.historyForward,getEventExtraPayload:e=>new ae(()=>e).getBaseMetadata()}),Jx=()=>({actionCause:oe.historyBackward,getEventExtraPayload:e=>new ae(()=>e).getBaseMetadata()}),Xx=()=>({actionCause:oe.noResultsBack,getEventExtraPayload:e=>new ae(()=>e).getBaseMetadata()});var zk=Object.getOwnPropertyNames,Wk=Object.getOwnPropertySymbols,Yk=Object.prototype.hasOwnProperty;function Zx(e,t){return function(a,n,o){return e(a,n,o)&&t(a,n,o)}}function Hl(e){return function(r,a,n){if(!r||!a||typeof r!="object"||typeof a!="object")return e(r,a,n);var o=n.cache,i=o.get(r),s=o.get(a);if(i&&s)return i===a&&s===r;o.set(r,a),o.set(a,r);var c=e(r,a,n);return o.delete(r),o.delete(a),c}}function ev(e){return zk(e).concat(Wk(e))}var tv=Object.hasOwn||function(e,t){return Yk.call(e,t)};function oi(e,t){return e||t?e===t:e===t||e!==e&&t!==t}var rv="_owner",av=Object.getOwnPropertyDescriptor,nv=Object.keys;function Kk(e,t,r){var a=e.length;if(t.length!==a)return!1;for(;a-- >0;)if(!r.equals(e[a],t[a],a,a,e,t,r))return!1;return!0}function Jk(e,t){return oi(e.getTime(),t.getTime())}function ov(e,t,r){if(e.size!==t.size)return!1;for(var a={},n=e.entries(),o=0,i,s;(i=n.next())&&!i.done;){for(var c=t.entries(),u=!1,l=0;(s=c.next())&&!s.done;){var d=i.value,p=d[0],f=d[1],m=s.value,g=m[0],S=m[1];!u&&!a[l]&&(u=r.equals(p,g,o,l,e,t,r)&&r.equals(f,S,p,g,e,t,r))&&(a[l]=!0),l++}if(!u)return!1;o++}return!0}function Xk(e,t,r){var a=nv(e),n=a.length;if(nv(t).length!==n)return!1;for(var o;n-- >0;)if(o=a[n],o===rv&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof||!tv(t,o)||!r.equals(e[o],t[o],o,o,e,t,r))return!1;return!0}function Gs(e,t,r){var a=ev(e),n=a.length;if(ev(t).length!==n)return!1;for(var o,i,s;n-- >0;)if(o=a[n],o===rv&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof||!tv(t,o)||!r.equals(e[o],t[o],o,o,e,t,r)||(i=av(e,o),s=av(t,o),(i||s)&&(!i||!s||i.configurable!==s.configurable||i.enumerable!==s.enumerable||i.writable!==s.writable)))return!1;return!0}function Zk(e,t){return oi(e.valueOf(),t.valueOf())}function eO(e,t){return e.source===t.source&&e.flags===t.flags}function iv(e,t,r){if(e.size!==t.size)return!1;for(var a={},n=e.values(),o,i;(o=n.next())&&!o.done;){for(var s=t.values(),c=!1,u=0;(i=s.next())&&!i.done;)!c&&!a[u]&&(c=r.equals(o.value,i.value,o.value,i.value,e,t,r))&&(a[u]=!0),u++;if(!c)return!1}return!0}function tO(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}var rO="[object Arguments]",aO="[object Boolean]",nO="[object Date]",oO="[object Map]",iO="[object Number]",sO="[object Object]",cO="[object RegExp]",uO="[object Set]",lO="[object String]",dO=Array.isArray,sv=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,cv=Object.assign,pO=Object.prototype.toString.call.bind(Object.prototype.toString);function fO(e){var t=e.areArraysEqual,r=e.areDatesEqual,a=e.areMapsEqual,n=e.areObjectsEqual,o=e.arePrimitiveWrappersEqual,i=e.areRegExpsEqual,s=e.areSetsEqual,c=e.areTypedArraysEqual;return function(l,d,p){if(l===d)return!0;if(l==null||d==null||typeof l!="object"||typeof d!="object")return l!==l&&d!==d;var f=l.constructor;if(f!==d.constructor)return!1;if(f===Object)return n(l,d,p);if(dO(l))return t(l,d,p);if(sv!=null&&sv(l))return c(l,d,p);if(f===Date)return r(l,d,p);if(f===RegExp)return i(l,d,p);if(f===Map)return a(l,d,p);if(f===Set)return s(l,d,p);var m=pO(l);return m===nO?r(l,d,p):m===cO?i(l,d,p):m===oO?a(l,d,p):m===uO?s(l,d,p):m===sO?typeof l.then!="function"&&typeof d.then!="function"&&n(l,d,p):m===rO?n(l,d,p):m===aO||m===iO||m===lO?o(l,d,p):!1}}function mO(e){var t=e.circular,r=e.createCustomConfig,a=e.strict,n={areArraysEqual:a?Gs:Kk,areDatesEqual:Jk,areMapsEqual:a?Zx(ov,Gs):ov,areObjectsEqual:a?Gs:Xk,arePrimitiveWrappersEqual:Zk,areRegExpsEqual:eO,areSetsEqual:a?Zx(iv,Gs):iv,areTypedArraysEqual:a?Gs:tO};if(r&&(n=cv({},n,r(n))),t){var o=Hl(n.areArraysEqual),i=Hl(n.areMapsEqual),s=Hl(n.areObjectsEqual),c=Hl(n.areSetsEqual);n=cv({},n,{areArraysEqual:o,areMapsEqual:i,areObjectsEqual:s,areSetsEqual:c})}return n}function gO(e){return function(t,r,a,n,o,i,s){return e(t,r,s)}}function hO(e){var t=e.circular,r=e.comparator,a=e.createState,n=e.equals,o=e.strict;if(a)return function(c,u){var l=a(),d=l.cache,p=d===void 0?t?new WeakMap:void 0:d,f=l.meta;return r(c,u,{cache:p,equals:n,meta:f,strict:o})};if(t)return function(c,u){return r(c,u,{cache:new WeakMap,equals:n,meta:void 0,strict:o})};var i={cache:void 0,equals:n,meta:void 0,strict:o};return function(c,u){return r(c,u,i)}}var dZ=Tr(),pZ=Tr({strict:!0}),fZ=Tr({circular:!0}),mZ=Tr({circular:!0,strict:!0}),gZ=Tr({createInternalComparator:function(){return oi}}),hZ=Tr({strict:!0,createInternalComparator:function(){return oi}}),SZ=Tr({circular:!0,createInternalComparator:function(){return oi}}),yZ=Tr({circular:!0,createInternalComparator:function(){return oi},strict:!0});function Tr(e){e===void 0&&(e={});var t=e.circular,r=t===void 0?!1:t,a=e.createInternalComparator,n=e.createState,o=e.strict,i=o===void 0?!1:o,s=mO(e),c=fO(s),u=a?a(c):gO(c);return hO({circular:r,comparator:c,createState:n,equals:u,strict:i})}function kn(e,t,r=(a,n)=>a===n){return e.length===t.length&&e.findIndex((a,n)=>!r(t[n],a))===-1}function SO(e,t){return e.length!==t.length?!1:e.every(r=>t.findIndex(a=>zs(r,a))!==-1)}var zs=Tr({createCustomConfig:e=>({...e,areArraysEqual:SO})});var yO=T(Wc(),e=>{e.addCase(ht,(t,r)=>CO(t,r.payload)?void 0:r.payload)}),CO=(e,t)=>xO(e.context,t.context)&&vO(e.dictionaryFieldContext,t.dictionaryFieldContext)&&IO(e.advancedSearchQueries,t.advancedSearchQueries)&&AO(e.tabSet,t.tabSet)&&bO(e.staticFilterSet,t.staticFilterSet)&&lm(e.facetSet,t.facetSet)&&lm(e.dateFacetSet,t.dateFacetSet)&&lm(e.numericFacetSet,t.numericFacetSet)&&RO(e.automaticFacetSet,t.automaticFacetSet)&&FO(e.categoryFacetSet,t.categoryFacetSet)&&PO(e.pagination,t.pagination)&&wO(e.query,t.query)&&EO(e,t)&&kO(e.pipeline,t.pipeline)&&OO(e.searchHub,t.searchHub)&&qO(e.facetOrder,t.facetOrder)&&TO(e.debug,t.debug),xO=(e,t)=>JSON.stringify(e.contextValues)===JSON.stringify(t.contextValues),vO=(e,t)=>JSON.stringify(e.contextValues)===JSON.stringify(t.contextValues),AO=(e,t)=>{let r=uv(e),a=uv(t);return(r==null?void 0:r.id)===(a==null?void 0:a.id)},uv=e=>Object.values(e).find(t=>t.isActive),bO=(e,t)=>{for(let[r,a]of Object.entries(t)){if(!e[r])return!1;let n=lv(e[r]),o=lv(a);if(JSON.stringify(n)!==JSON.stringify(o))return!1}return!0},lv=e=>e.values.filter(t=>t.state!=="idle"),lm=(e,t)=>{for(let[r,a]of Object.entries(t)){if(!e[r])return!1;let n=e[r].request.currentValues.filter(i=>i.state!=="idle"),o=a.request.currentValues.filter(i=>i.state!=="idle");if(JSON.stringify(n)!==JSON.stringify(o))return!1}return!0},FO=(e,t)=>{var r;for(let[a,n]of Object.entries(t)){if(!e[a])return!1;let o=gt((r=e[a])==null?void 0:r.request.currentValues).map(({value:s})=>s),i=gt(n==null?void 0:n.request.currentValues).map(({value:s})=>s);if(JSON.stringify(o)!==JSON.stringify(i))return!1}return!0},RO=(e,t)=>{for(let[r,a]of Object.entries(t.set)){if(!e.set[r])return!1;let n=e.set[r].response.values.filter(i=>i.state!=="idle"),o=a.response.values.filter(i=>i.state!=="idle");if(JSON.stringify(n)!==JSON.stringify(o))return!1}return!0},PO=(e,t)=>e.firstResult===t.firstResult&&e.numberOfResults===t.numberOfResults,wO=(e,t)=>JSON.stringify(e)===JSON.stringify(t),IO=(e,t)=>JSON.stringify(e)===JSON.stringify(t),EO=(e,t)=>e.sortCriteria===t.sortCriteria,kO=(e,t)=>e===t,OO=(e,t)=>e===t,qO=(e,t)=>kn(e,t),TO=(e,t)=>e===t,Gl=bS({actionTypes:{redo:Tf.type,undo:qf.type,snapshot:ht.type},reducer:yO});function DO(e){if(!VO(e))throw k;let t=M(e),{dispatch:r}=e,a=()=>e.state,n=o=>o.past.length>0&&!te(o.present);return{...t,subscribe(o){o();let i=JSON.stringify(a().history.present),s=()=>{let c=JSON.stringify(a().history.present);i!==c&&(i=c,o())};return e.subscribe(()=>s())},get state(){return a().history},async back(){!n(this.state)||(await r(ks()),r(I({legacy:_l(),next:Jx()})))},async forward(){!this.state.future.length||!this.state.present||(await r(Fu()),r(I({legacy:Ul(),next:Kx()})))},async backOnNoResults(){!n(this.state)||(await r(ks()),r(I({legacy:$l(),next:Xx()})))}}}function VO(e){return e.addReducers({history:Gl,configuration:$,facetOrder:jl}),!0}var MO=new D({min:PS,default:zc,required:!1}),LO=new D({min:FS,max:RS,default:Gc,required:!1}),NO={desiredCount:LO,numberOfValues:MO},zl=C("automaticFacet/setOptions",e=>A(e,NO)),Wl=C("automaticFacet/deselectAll",e=>A(e,ee)),QO=O,Ma=C("automaticFacet/toggleSelectValue",e=>A(e,{field:QO,selection:new q({values:bn})}));var Dr=T(Ue(),e=>{e.addCase(yo,(t,r)=>{let a=dm(t),n=r.payload;t.defaultNumberOfResults=t.numberOfResults=n,t.firstResult=Ws(a,n)}).addCase(Co,(t,r)=>{t.numberOfResults=r.payload,t.firstResult=0}).addCase(jt,t=>{t.firstResult=0}).addCase(xo,(t,r)=>{let a=r.payload;t.firstResult=Ws(a,t.numberOfResults)}).addCase(Ft,(t,r)=>{let a=r.payload;t.firstResult=Ws(a,t.numberOfResults)}).addCase(Ao,t=>{let r=dm(t),a=Math.max(r-1,pn);t.firstResult=Ws(a,t.numberOfResults)}).addCase(vo,t=>{let r=dm(t),a=BO(t),n=Math.min(r+1,a);t.firstResult=Ws(n,t.numberOfResults)}).addCase(ce.fulfilled,(t,r)=>{r.payload&&(t.numberOfResults=r.payload.pagination.numberOfResults,t.firstResult=r.payload.pagination.firstResult)}).addCase(ue,(t,r)=>{var a,n;t.firstResult=(a=r.payload.firstResult)!=null?a:t.firstResult,t.numberOfResults=(n=r.payload.numberOfResults)!=null?n:t.defaultNumberOfResults}).addCase(I.fulfilled,(t,r)=>{let{response:a}=r.payload;t.totalCountFiltered=a.totalCountFiltered}).addCase(Da.fulfilled,(t,r)=>{let{response:a}=r.payload;t.totalCountFiltered=a.pagination.totalCount}).addCase(Ae,t=>{et(t)}).addCase(wr,t=>{et(t)}).addCase(Fr,t=>{et(t)}).addCase(kr,t=>{et(t)}).addCase(An,t=>{et(t)}).addCase(br,t=>{et(t)}).addCase(pr,t=>{et(t)}).addCase(ka,t=>{et(t)}).addCase(Bo,t=>{et(t)}).addCase(Pr,t=>{et(t)}).addCase(Er,t=>{et(t)}).addCase(Fe,t=>{et(t)}).addCase(Jr,t=>{et(t)}).addCase(Xr,t=>{et(t)}).addCase(vn,t=>{et(t)}).addCase(Ma,t=>{et(t)})});function et(e){e.firstResult=Ue().firstResult}function dm(e){let{firstResult:t,numberOfResults:r}=e;return pm(t,r)}function BO(e){let{totalCountFiltered:t,numberOfResults:r}=e;return fm(t,r)}function Ws(e,t){return(e-1)*t}function pm(e,t){return Math.round(e/t)+1}function fm(e,t){let r=Math.min(e,Vs);return Math.ceil(r/t)}function jO(e){return e.pagination.firstResult}function dv(e){return e.pagination.numberOfResults}function UO(e){return e.pagination.totalCountFiltered}var La=e=>{let t=jO(e),r=dv(e);return pm(t,r)},Yl=e=>{let t=UO(e),r=dv(e);return fm(t,r)},mm=(e,t)=>{let r=La(e),a=Yl(e),n=_O(r,t);return n=$O(n),n=HO(n,a),GO(n)};function _O(e,t){let r=t%2==0,a=Math.floor(t/2),n=r?a-1:a,o=e-a,i=e+n;return{start:o,end:i}}function $O(e){let t=Math.max(pn-e.start,0),r=e.start+t,a=e.end+t;return{start:r,end:a}}function HO(e,t){let r=Math.max(e.end-t,0),a=Math.max(e.start-r,pn),n=e.end-r;return{start:a,end:n}}function GO(e){let t=[];for(let r=e.start;r<=e.end;++r)t.push(r);return t}var ii=()=>E("analytics/pager/resize",(e,t)=>{var r;return e.makePagerResize({currentResultsPerPage:((r=t.pagination)==null?void 0:r.numberOfResults)||Ue().numberOfResults})}),si=()=>E("analytics/pager/number",(e,t)=>e.makePagerNumber({pagerNumber:La(t)})),Kl=()=>E("analytics/pager/next",(e,t)=>e.makePagerNext({pagerNumber:La(t)})),Jl=()=>E("analytics/pager/previous",(e,t)=>e.makePagerPrevious({pagerNumber:La(t)}));var zO=new Y({numberOfPages:new D({default:5,min:0})}),WO=new Y({page:new D({min:1})});function pv(e,t={}){if(!YO(e))throw k;let r=M(e),{dispatch:a}=e,n=he(e,zO,t.options,"buildPager"),i=ke(e,WO,t.initialState,"buildPager").page;i&&a(xo(i));let s=()=>La(e.state),c=()=>{let{numberOfPages:l}=n;return mm(e.state,l)},u=()=>Yl(e.state);return{...r,get state(){let l=s(),d=u(),p=l>pn&&d>0,f=l<d;return{currentPage:l,currentPages:c(),maxPage:d,hasPreviousPage:p,hasNextPage:f}},selectPage(l){a(Ft(l))},nextPage(){a(vo())},previousPage(){a(Ao())},isCurrentPage(l){return l===this.state.currentPage}}}function YO(e){return e.addReducers({configuration:$,pagination:Dr}),!0}function KO(e,t={}){let{dispatch:r}=e,a=pv(e,t);return{...a,get state(){return a.state},selectPage(n){a.selectPage(n),r(ur({legacy:si()}))},nextPage(){a.nextPage(),r(ur({legacy:Kl()}))},previousPage(){a.previousPage(),r(ur({legacy:Jl()}))}}}function fv(e){if(!JO(e))throw k;let t=M(e),r=()=>e.state;return{...t,get state(){return{hasError:r().search.error!==null,error:r().search.error}}}}function JO(e){return e.addReducers({search:J}),!0}function XO(e){return fv(e)}function ci(e){if(!ZO(e))throw k;let t=M(e),r=()=>e.state;return{...t,get state(){let a=r();return{hasError:a.search.error!==null,isLoading:a.search.isLoading,hasResults:!!a.search.results.length,firstSearchExecuted:Ms(a)}}}}function ZO(e){return e.addReducers({search:J}),!0}function mv(e){if(!eq(e))throw k;let t=M(e),r=ci(e),a=()=>e.state,n=()=>{let o=a().search.duration/1e3;return Math.round((o+Number.EPSILON)*100)/100};return{...t,get state(){return{...r.state,durationInMilliseconds:a().search.duration,durationInSeconds:n(),firstResult:a().pagination.firstResult+1,hasDuration:a().search.duration!==0,hasQuery:a().search.queryExecuted!=="",lastResult:a().pagination.firstResult+a().search.results.length,query:a().search.queryExecuted,total:a().pagination.totalCountFiltered}}}}function eq(e){return e.addReducers({search:J,pagination:Dr}),!0}function tq(e){return mv(e)}var rq=new Y({fieldsToInclude:new X({required:!1,each:new w({required:!0,emptyAllowed:!1})})});function Xl(e,t){if(!aq(e))throw k;let r=M(e),a=ci(e),{dispatch:n}=e,o=()=>e.state,i=he(e,rq,t==null?void 0:t.options,"buildCoreResultList");i.fieldsToInclude&&n(Pa(i.fieldsToInclude));let s=()=>e.state.search.results.length<e.state.search.response.totalCountFiltered,c=0,u=0,l=5,d=200,p=!1;return{...r,get state(){let m=o();return{...a.state,results:m.search.results,moreResultsAvailable:s(),searchResponseId:m.search.searchResponseId}},fetchMoreResults:async()=>{if(e.state.search.isLoading)return;if(!s()){e.logger.info("No more results are available for the result list to fetch.");return}if(Date.now()-c<d){if(u++,u>=l){c=Date.now(),!p&&e.logger.error(`The result list method "fetchMoreResults" execution prevented because it has been triggered consecutively ${l} times, with little delay. Please verify the conditions under which the function is called.`),p=!0;return}}else u=0;p=!1,(t==null?void 0:t.fetchMoreResultsActionCreator)&&(await n(t==null?void 0:t.fetchMoreResultsActionCreator()),c=Date.now())}}}function aq(e){return e.addReducers({search:J,configuration:$,fields:Ea}),!0}function nq(e,t){return Xl(e,{...t,fetchMoreResultsActionCreator:Fa})}var oq={results:new X({required:!0,each:new q({values:oo})}),maxLength:new D({required:!0,min:1,default:10})},ui=C("recentResults/registerRecentResults",e=>A(e,oq)),wt=C("recentResults/pushRecentResult",e=>(ut(e),{payload:e})),li=C("recentResults/clearRecentResults");var Zl=e=>E({prefix:"analytics/result/open",__legacy__getBuilder:(t,r)=>(ut(e),t.makeDocumentOpen(Oe(e,r),Le(e))),analyticsType:"itemClick",analyticsPayloadBuilder:t=>{var n,o;let r=Oe(e,t),a=Le(e);return{searchUid:(o=(n=t.search)==null?void 0:n.response.searchUid)!=null?o:"",position:r.documentPosition,itemMetadata:{uniqueFieldName:a.contentIDKey,uniqueFieldValue:a.contentIDValue,title:r.documentTitle,author:r.documentAuthor,url:r.documentUrl}}}});function dt(e,t,r){if(!iq(e))throw k;let a=1e3,n={selectionDelay:a,debounceWait:a,...t.options},o;return{select:Uu(r,n.debounceWait,{isImmediate:!0}),beginDelayedSelect(){o=setTimeout(r,n.selectionDelay)},cancelPendingSelect(){o&&clearTimeout(o)}}}function iq(e){return e.addReducers({configuration:$}),!0}function sq(e,t){let r=!1,a=()=>{r||(r=!0,e.dispatch(Zl(t.options.result)))};return dt(e,t,()=>{a(),e.dispatch(wt(t.options.result))})}function cq(e,t){let r=!1,a=()=>{r||(r=!0,e.dispatch(Ky(t.options.result)))};return dt(e,t,()=>{a(),e.dispatch(wt(t.options.result))})}var uq=new Y({numberOfResults:new D({min:0})});function gv(e,t={}){if(!lq(e))throw k;let r=M(e),{dispatch:a}=e,n=()=>e.state,i=ke(e,uq,t.initialState,"buildResultsPerPage").numberOfResults;return i!==void 0&&a(yo(i)),{...r,get state(){return{numberOfResults:n().pagination.numberOfResults}},set(s){a(Co(s))},isSetTo(s){return s===this.state.numberOfResults}}}function lq(e){return e.addReducers({pagination:Dr,configuration:$}),!0}function dq(e,t={}){if(!pq(e))throw k;let r=gv(e,t),{dispatch:a}=e;return{...r,get state(){return{...r.state}},set(n){r.set(n),a(ur({legacy:ii()}))}}}function pq(e){return e.addReducers({pagination:Dr,configuration:$}),!0}var On={id:O},di=C("querySuggest/register",e=>A(e,{...On,count:new D({min:0})})),hv=C("querySuggest/unregister",e=>A(e,On)),Vr=C("querySuggest/selectSuggestion",e=>A(e,{...On,expression:ge})),Na=C("querySuggest/clear",e=>A(e,On)),Qa=W("querySuggest/fetch",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:a,validatePayload:n}})=>{n(e,On);let o=e.id,i=await fq(o,t()),s=await a.querySuggest(i);return ye(s)?r(s.error):{id:o,q:i.q,...s.success}}),fq=async(e,t)=>({accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,url:t.configuration.search.apiBaseUrl,count:t.querySuggest[e].count,q:t.querySet[e],locale:t.configuration.search.locale,timezone:t.configuration.search.timezone,actionsHistory:t.configuration.analytics.enabled?vt.getHistory():[],...t.context&&{context:t.context.contextValues},...t.pipeline&&{pipeline:t.pipeline},...t.searchHub&&{searchHub:t.searchHub},...t.configuration.analytics.enabled&&{visitorId:await We(t.configuration.analytics),...t.configuration.analytics.enabled&&await bo(t.configuration.analytics)},...t.configuration.search.authenticationProviders.length&&{authentication:t.configuration.search.authenticationProviders.join(",")}});var Ba=()=>E("analytics/searchbox/submit",e=>e.makeSearchboxSubmit()),ed=()=>({actionCause:oe.searchboxSubmit,getEventExtraPayload:e=>new ae(()=>e).getBaseMetadata()});var Sv={id:O,query:ge},pi=C("querySet/register",e=>A(e,Sv)),qn=C("querySet/update",e=>A(e,Sv));var fi=T(pa(),e=>{e.addCase(pi,(t,r)=>{let{id:a,query:n}=r.payload;a in t||(t[a]=n)}).addCase(qn,(t,r)=>{let{id:a,query:n}=r.payload;gm(t,a,n)}).addCase(Vr,(t,r)=>{let{id:a,expression:n}=r.payload;gm(t,a,n)}).addCase(I.fulfilled,(t,r)=>{let{queryExecuted:a}=r.payload;yv(t,a)}).addCase(ue,(t,r)=>{te(r.payload.q)||yv(t,r.payload.q)}).addCase(ce.fulfilled,(t,r)=>{if(!!r.payload)for(let[a,n]of Object.entries(r.payload.querySet))gm(t,a,n)})});function yv(e,t){Object.keys(e).forEach(r=>e[r]=t)}var gm=(e,t,r)=>{t in e&&(e[t]=r)};var td=e=>E("analytics/querySuggest",(t,r)=>{let a=hm(r,e);return t.makeOmniboxAnalytics(a)}),Cv=(e,t)=>({actionCause:oe.omniboxAnalytics,getEventExtraPayload:r=>new ae(()=>r).getOmniboxAnalyticsMetadata(e,t)});function hm(e,t){let{id:r,suggestion:a}=t,n=e.querySuggest&&e.querySuggest[r];if(!n)throw new Error(`Unable to determine the query suggest analytics metadata to send because no query suggest with id "${r}" was found. Please check the sent #id.`);let o=n.completions.map(u=>u.expression),i=n.partialQueries.length-1,s=n.partialQueries[i]||"",c=n.responseId;return{suggestionRanking:o.indexOf(a),partialQuery:s,partialQueries:n.partialQueries,suggestions:o,querySuggestResponseId:c}}var rd=W("commerce/querySuggest/fetch",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:a,validatePayload:n}})=>{n(e,On);let o=t(),i=await mq(e.id,o),s=await a.querySuggest(i);return ye(s)?r(s.error):{id:e.id,query:i.query,...s.success}}),mq=async(e,t)=>{let{view:r,user:a,...n}=t.commerceContext;return{accessToken:t.configuration.accessToken,url:t.configuration.platformUrl,organizationId:t.configuration.organizationId,query:t.querySet[e],...n,clientId:await We(t.configuration.analytics),context:{user:a,view:r,cart:t.cart.cartItems.map(o=>t.cart.cart[o])}}};var mi=T(Mc(),e=>e.addCase(di,(t,r)=>{let a=r.payload.id;a in t||(t[a]=gq(r.payload))}).addCase(hv,(t,r)=>{delete t[r.payload.id]}).addCase(Qa.pending,xv).addCase(Qa.fulfilled,(t,r)=>{let a=t[r.meta.arg.id];if(!a||r.meta.requestId!==a.currentRequestId)return;let{q:n}=r.payload;n&&a.partialQueries.push(n.replace(/;/,encodeURIComponent(";"))),a.responseId=r.payload.responseId,a.completions=r.payload.completions,a.isLoading=!1,a.error=null}).addCase(Qa.rejected,vv).addCase(rd.pending,xv).addCase(rd.fulfilled,(t,r)=>{let a=t[r.meta.arg.id];if(!a||r.meta.requestId!==a.currentRequestId)return;let{query:n}=r.payload;n&&a.partialQueries.push(n.replace(/;/,encodeURIComponent(";"))),a.responseId=r.payload.responseId,a.completions=r.payload.completions.map(o=>({expression:o.expression,highlighted:o.highlighted,score:0,executableConfidence:0})),a.isLoading=!1,a.error=null}).addCase(rd.rejected,vv).addCase(Na,(t,r)=>{let a=t[r.payload.id];!a||(a.responseId="",a.completions=[],a.partialQueries=[])}));function gq(e){return{id:"",completions:[],responseId:"",count:5,currentRequestId:"",error:null,partialQueries:[],isLoading:!1,...e}}function xv(e,t){let r=e[t.meta.arg.id];!r||(r.currentRequestId=t.meta.requestId,r.isLoading=!0)}function vv(e,t){let r=e[t.meta.arg.id];!r||(r.error=t.payload||null,r.isLoading=!1)}var It=T(xe(),e=>e.addCase(Ye,(t,r)=>({...t,...r.payload})).addCase(Rt,(t,r)=>{t.q=r.payload}).addCase(Vr,(t,r)=>{t.q=r.payload.expression}).addCase(ce.fulfilled,(t,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.query)!=null?n:t}).addCase(ue,(t,r)=>{var a,n;t.q=(a=r.payload.q)!=null?a:t.q,t.enableQuerySyntax=(n=r.payload.enableQuerySyntax)!=null?n:t.enableQuerySyntax}));var ad={enableQuerySyntax:!1,numberOfSuggestions:5,clearFilters:!0},Sm={open:new w,close:new w},ym={id:O,numberOfSuggestions:new D({min:0}),enableQuerySyntax:new K,highlightOptions:new q({values:{notMatchDelimiters:new q({values:Sm}),exactMatchDelimiters:new q({values:Sm}),correctionDelimiters:new q({values:Sm})}}),clearFilters:new K},Av=new Y(ym);function bv(e,t){var u,l;if(!Sq(e))throw k;let r=M(e),{dispatch:a}=e,n=()=>e.state,o=((u=t.options)==null?void 0:u.id)||la("search_box"),i={id:o,highlightOptions:{...(l=t.options)==null?void 0:l.highlightOptions},...ad,...t.options};he(e,Av,i,"buildSearchBox"),a(pi({id:o,query:e.state.query.q})),i.numberOfSuggestions&&a(di({id:o,count:i.numberOfSuggestions}));let s=()=>e.state.querySet[i.id],c=async d=>{let{enableQuerySyntax:p,clearFilters:f}=i;a(Bu({q:s(),enableQuerySyntax:p,clearFilters:f})),t.isNextAnalyticsReady?a(t.executeSearchActionCreator(d)):a(t.executeSearchActionCreator(d.legacy))};return{...r,updateText(d){a(qn({id:o,query:d})),this.showSuggestions()},clear(){a(qn({id:o,query:""})),a(Na({id:o}))},showSuggestions(){i.numberOfSuggestions&&a(t.fetchQuerySuggestionsActionCreator({id:o}))},selectSuggestion(d){a(Vr({id:o,expression:d})),c({legacy:td({id:o,suggestion:d}),next:Cv(o,d)}).then(()=>{a(Na({id:o}))})},submit(d=Ba(),p){c({legacy:d,next:p}),a(Na({id:o}))},get state(){let d=n(),p=d.querySuggest[i.id],f=hq(p,i.highlightOptions),m=p?p.isLoading:!1;return{value:s(),suggestions:f,isLoading:d.search.isLoading,isLoadingSuggestions:m}}}}function hq(e,t){return e?e.completions.map(r=>({highlightedValue:of(r.highlighted,t),rawValue:r.expression})):[]}function Sq(e){return e.addReducers({query:It,querySuggest:mi,configuration:$,querySet:fi,search:J}),!0}function Cm(e,t={}){let r=bv(e,{...t,executeSearchActionCreator:I,fetchQuerySuggestionsActionCreator:Qa,isNextAnalyticsReady:!0});return{...r,submit(){r.submit(Ba(),ed())},get state(){return r.state}}}var nd=T(Yc(),e=>{e.addCase(ho,(t,r)=>{let{id:a}=r.payload;t[a]||(t[a]={q:"",cache:{}})}),e.addCase(sr,(t,r)=>{let{q:a,id:n}=r.payload;!a||(t[n].q=a)}),e.addCase(So,(t,r)=>{let{id:a}=r.payload;Object.entries(t[a].cache).forEach(([n,o])=>{Kc(o)&&delete t[a].cache[n]})}),e.addCase(To.pending,(t,r)=>{for(let n in t)for(let o in t[n].cache)t[n].cache[o].isActive=!1;if(!od(t,r.meta)){yq(t,r.meta);return}let a=od(t,r.meta);a.isLoading=!0,a.isActive=!0,a.error=null}),e.addCase(To.fulfilled,(t,r)=>{let{results:a,searchUid:n,totalCountFiltered:o,duration:i}=r.payload,{cacheTimeout:s}=r.meta.arg,c=od(t,r.meta);c.isActive=!0,c.searchUid=n,c.isLoading=!1,c.error=null,c.results=a,c.expiresAt=s?s+Date.now():0,c.totalCountFiltered=o,c.duration=i}),e.addCase(To.rejected,(t,r)=>{let a=od(t,r.meta);a.error=r.error||null,a.isLoading=!1,a.isActive=!1})}),yq=(e,t)=>{let{q:r,id:a}=t.arg;e[a].cache[r]={isLoading:!0,error:null,results:[],expiresAt:0,isActive:!0,searchUid:"",totalCountFiltered:0,duration:0}},od=(e,t)=>{let{q:r,id:a}=t.arg;return e[a].cache[r]||null};var Cq={searchBoxId:de,maxResultsPerQuery:new D({required:!0,min:1}),cacheTimeout:new D},Fv=new Y(Cq);function xq(e,t){if(!vq(e))throw k;let r=M(e),{dispatch:a}=e,n=()=>e.state,o={searchBoxId:t.options.searchBoxId||la("instant-results-"),cacheTimeout:t.options.cacheTimeout||6e4,maxResultsPerQuery:t.options.maxResultsPerQuery};he(e,Fv,o,"buildInstantResults");let i=o.searchBoxId;a(ho({id:i}));let s=()=>n().instantResults[i],c=d=>s().cache[d],u=()=>s().q,l=()=>{let d=c(u());return d?d.isLoading?[]:d.results:[]};return{...r,updateQuery(d){if(!d)return;let p=c(d);(!p||!p.isLoading&&(p.error||Kc(p)))&&a(To({id:i,q:d,maxResultsPerQuery:o.maxResultsPerQuery,cacheTimeout:o.cacheTimeout})),a(sr({id:i,q:d}))},clearExpired(){a(So({id:i}))},get state(){let d=u(),p=c(d);return{q:d,isLoading:(p==null?void 0:p.isLoading)||!1,error:(p==null?void 0:p.error)||null,results:l()}}}}function vq(e){return e.addReducers({instantResults:nd}),!0}var gi=()=>E("analytics/sort/results",(e,t)=>e.makeResultsSort({resultsSortBy:t.sortCriteria||tt()})),id=()=>({actionCause:oe.resultsSort,getEventExtraPayload:e=>new ae(()=>e).getResultSortMetadata()});var Rv={by:new Dt({enum:Zt,required:!0})},hi=C("sortCriteria/register",e=>Pv(e)),Si=C("sortCriteria/update",e=>Pv(e)),Pv=e=>_n(e)?(e.forEach(t=>A(t,Rv)),{payload:e}):A(e,Rv);var sd=T(tt(),e=>{e.addCase(hi,(t,r)=>Hr(r.payload)).addCase(Si,(t,r)=>Hr(r.payload)).addCase(ce.fulfilled,(t,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.sortCriteria)!=null?n:t}).addCase(ue,(t,r)=>{var a;return(a=r.payload.sortCriteria)!=null?a:t})});function Aq(e,t){if(!t)return;let r=new Y({criterion:new X({each:xS})}),a=bq(t),n={...t,criterion:a};ke(e,r,n,"buildSort")}function bq(e){return e.criterion?_n(e.criterion)?e.criterion:[e.criterion]:[]}function wv(e,t){var i;if(!Fq(e))throw k;let r=M(e),{dispatch:a}=e,n=()=>e.state;Aq(e,t.initialState);let o=(i=t.initialState)==null?void 0:i.criterion;return o&&a(hi(o)),{...r,sortBy(s){a(Si(s)),a(Ft(1))},isSortedBy(s){return this.state.sortCriteria===Hr(s)},get state(){return{sortCriteria:n().sortCriteria}}}}function Fq(e){return e.addReducers({configuration:$,sortCriteria:sd}),!0}function Rq(e,t={}){let{dispatch:r}=e,a=wv(e,t),n=()=>r(I({legacy:gi(),next:id()}));return{...a,get state(){return a.state},sortBy(o){a.sortBy(o),n()}}}var Tn=O,cd=new q({options:{required:!0},values:{caption:ge,expression:ge,state:new w({constrainTo:["idle","selected","excluded"]})}}),ud=new X({required:!0,each:cd});var yi=C("staticFilter/register",e=>A(e,{id:Tn,values:ud})),Zr=C("staticFilter/toggleSelect",e=>A(e,{id:Tn,value:cd})),ea=C("staticFilter/toggleExclude",e=>A(e,{id:Tn,value:cd})),ja=C("staticFilter/deselectAllFilterValues",e=>A(e,Tn)),ld=e=>E("analytics/staticFilter/select",t=>t.makeStaticFilterSelect(e)),Ci=e=>E("analytics/staticFilter/deselect",t=>t.makeStaticFilterDeselect(e)),dd=e=>E("analytics/staticFilter/clearAll",t=>t.makeStaticFilterClearAll(e)),Iv=(e,t)=>({actionCause:oe.staticFilterSelect,getEventExtraPayload:r=>new ae(()=>r).getStaticFilterToggleMetadata(e,t)}),pd=(e,t)=>({actionCause:oe.staticFilterDeselect,getEventExtraPayload:r=>new ae(()=>r).getStaticFilterToggleMetadata(e,t)}),Ev=e=>({actionCause:oe.staticFilterClearAll,getEventExtraPayload:t=>new ae(()=>t).getStaticFilterClearAllMetadata(e)});var fd=T(an(),e=>e.addCase(yi,(t,r)=>{let a=r.payload,{id:n}=a;n in t||(t[n]=a)}).addCase(Zr,(t,r)=>{let{id:a,value:n}=r.payload,o=t[a];if(!o)return;let i=o.values.find(c=>c.caption===n.caption);if(!i)return;let s=i.state==="selected";i.state=s?"idle":"selected"}).addCase(ea,(t,r)=>{let{id:a,value:n}=r.payload,o=t[a];if(!o)return;let i=o.values.find(c=>c.caption===n.caption);if(!i)return;let s=i.state==="excluded";i.state=s?"idle":"excluded"}).addCase(ja,(t,r)=>{let a=r.payload,n=t[a];!n||n.values.forEach(o=>o.state="idle")}).addCase(Fe,t=>{Object.values(t).forEach(r=>{r.values.forEach(a=>a.state="idle")})}).addCase(ue,(t,r)=>{let a=r.payload.sf||{};Object.entries(t).forEach(([n,o])=>{let i=a[n]||[];o.values.forEach(s=>{s.state=i.includes(s.caption)?"selected":"idle"})})}));function kv(e){return{state:"idle",...e}}var Pq=new Y({id:Tn,values:ud});function wq(e,t){if(!Iq(e))throw k;he(e,Pq,t.options,"buildStaticFilter");let r=M(e),{dispatch:a}=e,n=()=>e.state,{id:o}=t.options;return a(yi(t.options)),{...r,toggleSelect(i){a(Zr({id:o,value:i})),a(I({legacy:md(o,i),next:gd(o,i)}))},toggleSingleSelect(i){i.state==="idle"&&a(ja(o)),a(Zr({id:o,value:i})),a(I({legacy:md(o,i),next:gd(o,i)}))},toggleExclude(i){a(ea({id:o,value:i})),a(I({legacy:md(o,i),next:gd(o,i)}))},toggleSingleExclude(i){i.state==="idle"&&a(ja(o)),a(ea({id:o,value:i})),a(I({legacy:md(o,i),next:gd(o,i)}))},deselectAll(){a(ja(o)),a(I({legacy:dd({staticFilterId:o}),next:Ev(o)}))},isValueSelected(i){return i.state==="selected"},isValueExcluded(i){return i.state==="excluded"},get state(){var c;let i=((c=n().staticFilterSet[o])==null?void 0:c.values)||[],s=i.some(u=>u.state!=="idle");return{id:o,values:i,hasActiveValues:s}}}}function Iq(e){return e.addReducers({staticFilterSet:fd}),!0}function md(e,t){let{caption:r,expression:a,state:n}=t;return(n==="idle"?ld:Ci)({staticFilterId:e,staticFilterValue:{caption:r,expression:a}})}function gd(e,t){return t.state==="selected"?Iv(e,t):pd(e,t)}var hd=T(nn(),e=>{e.addCase(Do,(t,r)=>{let a=r.payload,{id:n}=a;n in t||(t[n]={...a,isActive:!1})}).addCase(jt,(t,r)=>{let a=r.payload;Ov(t,a)}).addCase(ue,(t,r)=>{let a=r.payload.tab||"";Ov(t,a)}).addCase(ce.fulfilled,(t,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.tabSet)!=null?n:t})});function Ov(e,t){t in e&&Object.keys(e).forEach(a=>{e[a].isActive=a===t})}var Eq=new Y({expression:ge,id:O}),kq=new Y({isActive:new K});function qv(e,t){if(qq(t.options.id),!Oq(e))throw k;let r=M(e),{dispatch:a}=e;he(e,Eq,t.options,"buildTab");let n=ke(e,kq,t.initialState,"buildTab"),{id:o,expression:i}=t.options;return a(Do({id:o,expression:i})),n.isActive&&a(jt(o)),{...r,select(){a(jt(o))},get state(){var c;return{isActive:(c=e.state.tabSet[o])==null?void 0:c.isActive}}}}function Oq(e){return e.addReducers({configuration:$,tabSet:hd}),!0}function qq(e){let t=it().analytics.originLevel2;if(e===t)throw new Error(`The #id option on the Tab controller cannot use the reserved value "${t}". Please specify a different value.`)}function Tq(e,t){let{dispatch:r}=e,a=qv(e,t),n=()=>r(I({legacy:ya(),next:io()}));return{...a,get state(){return a.state},select(){a.select(),n()}}}function Tv(e){if(!Dq(e))throw k;let t=M(e),r=()=>e.state;return{...t,sort(a){return Ro(a,this.state.facetIds)},get state(){return{facetIds:r().search.response.facets.map(o=>o.facetId)}}}}function Dq(e){return e.addReducers({search:J,facetOptions:Qe}),!0}function Vq(e){return Tv(e)}var Mq={categoryFacetId:ee,categoryFacetPath:new X({required:!0,each:O})},Lq=(e,{categoryFacetId:t,categoryFacetPath:r})=>{let a=e.categoryFacetSet[t],n=a==null?void 0:a.request.field,o=`${n}_${t}`;return{categoryFacetId:t,categoryFacetPath:r,categoryFacetField:n,categoryFacetTitle:o}},Sd=e=>E("analytics/categoryFacet/breadcrumb",(t,r)=>(A(e,Mq),t.makeBreadcrumbFacet(Lq(r,e)))),Dv=(e,t)=>({actionCause:oe.breadcrumbFacet,getEventExtraPayload:r=>new ae(()=>r).getCategoryBreadcrumbFacetMetadata(e,t)});var yd=()=>E("analytics/facet/deselectAllBreadcrumbs",e=>e.makeBreadcrumbResetAll()),Vv=()=>({actionCause:oe.breadcrumbResetAll,getEventExtraPayload:e=>new ae(()=>e).getBaseMetadata()});var Cd=(e,{facetId:t,selection:r})=>{let n=(e.dateFacetSet[t]||e.numericFacetSet[t]).request.field,o=`${n}_${t}`;return{facetId:t,facetField:n,facetTitle:o,facetRangeEndInclusive:r.endInclusive,facetRangeEnd:`${r.end}`,facetRangeStart:`${r.start}`}},xd=(e,t)=>({actionCause:oe.breadcrumbFacet,getEventExtraPayload:r=>new ae(()=>r).getRangeBreadcrumbFacetMetadata(e,t)});var Ys=e=>E("analytics/dateFacet/breadcrumb",(t,r)=>{A(e,En(e.selection));let a=Cd(r,e);return t.makeBreadcrumbFacet(a)}),xm=(e,t)=>xd(e,t);var Ks=e=>E("analytics/numericFacet/breadcrumb",(t,r)=>{A(e,En(e.selection));let a=Cd(r,e);return t.makeBreadcrumbFacet(a)}),vm=(e,t)=>xd(e,t);var vd=e=>Object.keys(e.facetSet).map(t=>{let r=e.facetValuesSelector(e.engine.state,t).map(a=>({value:a,deselect:()=>{a.state==="selected"?e.executeToggleSelect({facetId:t,selection:a}):a.state==="excluded"&&e.executeToggleExclude({facetId:t,selection:a})}}));return{facetId:t,field:e.facetSet[t].request.field,values:r}}).filter(t=>t.values.length);function Mv(e){let t=M(e),{dispatch:r}=e;return{...t,get state(){return{facetBreadcrumbs:[],categoryFacetBreadcrumbs:[],numericFacetBreadcrumbs:[],dateFacetBreadcrumbs:[],staticFilterBreadcrumbs:[],hasBreadcrumbs:!1}},deselectAll:()=>{r(Fe())},deselectBreadcrumb(a){a.deselect()}}}function Nq(e){if(!Qq(e))throw k;let t=Mv(e),{dispatch:r}=e,a=()=>e.state,n=()=>{let S={engine:e,facetSet:a().facetSet,executeToggleSelect:({facetId:y,selection:x})=>{r(br({facetId:y,selection:x})),r(Kr({facetId:y,freezeCurrentValues:!1})),r(I({legacy:Yo({facetId:y,facetValue:x.value}),next:el(y,x.value)}))},executeToggleExclude:({facetId:y,selection:x})=>{r(Fr({facetId:y,selection:x})),r(Kr({facetId:y,freezeCurrentValues:!1})),r(I({legacy:Yo({facetId:y,facetValue:x.value}),next:el(y,x.value)}))},facetValuesSelector:yy};return vd(S)},o=()=>{let S={engine:e,facetSet:a().numericFacetSet,executeToggleSelect:y=>{r(Er(y)),r(I({legacy:Ks(y),next:vm(y.facetId,y.selection)}))},executeToggleExclude:y=>{r(kr(y)),r(I({legacy:Ks(y),next:vm(y.facetId,y.selection)}))},facetValuesSelector:_x};return vd(S)},i=()=>{let S={engine:e,facetSet:a().dateFacetSet,executeToggleSelect:y=>{r(Pr(y)),r(I({legacy:Ys(y),next:xm(y.facetId,y.selection)}))},executeToggleExclude:y=>{r(wr(y)),r(I({legacy:Ys(y),next:xm(y.facetId,y.selection)}))},facetValuesSelector:Wx};return vd(S)},s=()=>Object.keys(a().categoryFacetSet).map(c).filter(S=>S.path.length),c=S=>{let y=xy(a(),S);return{facetId:S,field:a().categoryFacetSet[S].request.field,path:y,deselect:()=>{r(pr(S)),r(I({legacy:Sd({categoryFacetPath:y.map(x=>x.value),categoryFacetId:S}),next:Dv(S,y.map(x=>x.value))}))}}},u=()=>{var y;let S=(y=a().staticFilterSet)!=null?y:{};return Object.values(S).map(l)},l=S=>{let{id:y,values:x}=S,b=x.filter(P=>P.state!=="idle").map(P=>d(y,P));return{id:y,values:b}},d=(S,y)=>({value:y,deselect:()=>{let{caption:x,expression:b}=y;y.state==="selected"?r(Zr({id:S,value:y})):y.state==="excluded"&&r(ea({id:S,value:y})),r(I({legacy:Ci({staticFilterId:S,staticFilterValue:{caption:x,expression:b}}),next:pd(S,{caption:x,expression:b})}))}}),p=()=>{var y,x;let S=(x=(y=a().automaticFacetSet)==null?void 0:y.set)!=null?x:{};return Object.values(S).map(b=>f(b.response))},f=S=>{let{field:y,label:x}=S,b=S.values.filter(P=>P.state==="selected").map(P=>m(y,P));return{facetId:y,field:y,label:x,values:b}},m=(S,y)=>({value:y,deselect:()=>{r(Ma({field:S,selection:y})),r(I({legacy:Yo({facetId:S,facetValue:y.value}),next:el(S,y.value)}))}});function g(){return!![...n(),...o(),...i(),...s(),...u(),...p()].length}return{...t,get state(){return{facetBreadcrumbs:n(),categoryFacetBreadcrumbs:s(),numericFacetBreadcrumbs:o(),dateFacetBreadcrumbs:i(),staticFilterBreadcrumbs:u(),automaticFacetBreadcrumbs:p(),hasBreadcrumbs:g()}},deselectAll:()=>{t.deselectAll(),r(I({legacy:yd(),next:Vv()}))}}}function Qq(e){return e.addReducers({configuration:$,search:J,facetSet:Or,numericFacetSet:Pt,dateFacetSet:qr,categoryFacetSet:fr}),!0}function Lv(e){return e.type==="redirect"}var Am=class{constructor(t){this.response=t}get basicExpression(){return this.response.parsedInput.basicExpression}get largeExpression(){return this.response.parsedInput.largeExpression}get redirectionUrl(){let t=this.response.preprocessingOutput.triggers.filter(Lv);return t.length?t[0].content:null}};var xi=C("standaloneSearchBox/register",e=>A(e,{id:O,redirectionUrl:O})),vi=C("standaloneSearchBox/reset",e=>A(e,{id:O})),Ai=C("standaloneSearchBox/updateAnalyticsToSearchFromLink",e=>A(e,{id:O})),bi=C("standaloneSearchBox/updateAnalyticsToOmniboxFromLink"),Ua=W("standaloneSearchBox/fetchRedirect",async(e,{dispatch:t,getState:r,rejectWithValue:a,extra:{apiClient:n,validatePayload:o}})=>{o(e,{id:new w({emptyAllowed:!1})});let i=await jq(r()),s=await n.plan(i);if(ye(s))return a(s.error);let{redirectionUrl:c}=new Am(s.success);return c&&t(Bq(c)),c||""}),Bq=e=>E("analytics/standaloneSearchBox/redirect",t=>t.makeTriggerRedirect({redirectedTo:e})),jq=async e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,timezone:e.configuration.search.timezone,q:e.query.q,...e.context&&{context:e.context.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.searchHub&&{searchHub:e.searchHub},...e.configuration.analytics.enabled&&{visitorId:await We(e.configuration.analytics)},...e.configuration.analytics.enabled&&await bo(e.configuration.analytics),...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}});var Ad=T(Zc(),e=>e.addCase(xi,(t,r)=>{let{id:a,redirectionUrl:n}=r.payload;a in t||(t[a]=Nv(n))}).addCase(vi,(t,r)=>{let{id:a}=r.payload,n=t[a];if(n){t[a]=Nv(n.defaultRedirectionUrl);return}}).addCase(Ua.pending,(t,r)=>{let a=t[r.meta.arg.id];!a||(a.isLoading=!0)}).addCase(Ua.fulfilled,(t,r)=>{let a=r.payload,n=t[r.meta.arg.id];!n||(n.redirectTo=a||n.defaultRedirectionUrl,n.isLoading=!1)}).addCase(Ua.rejected,(t,r)=>{let a=t[r.meta.arg.id];!a||(a.isLoading=!1)}).addCase(Ai,(t,r)=>{let a=t[r.payload.id];!a||(a.analytics.cause="searchFromLink")}).addCase(bi,(t,r)=>{let a=t[r.payload.id];!a||(a.analytics.cause="omniboxFromLink",a.analytics.metadata=r.payload.metadata)}));function Nv(e){return{defaultRedirectionUrl:e,redirectTo:"",isLoading:!1,analytics:{cause:"",metadata:null}}}var Qv=new Y({...ym,redirectionUrl:new w({required:!0,emptyAllowed:!1})});function Uq(e,t){if(!_q(e))throw k;let{dispatch:r}=e,a=()=>e.state,n=t.options.id||la("standalone_search_box"),o={id:n,highlightOptions:{...t.options.highlightOptions},...ad,...t.options};he(e,Qv,o,"buildStandaloneSearchBox");let i=Cm(e,{options:o});return r(xi({id:n,redirectionUrl:o.redirectionUrl})),{...i,updateText(s){i.updateText(s),r(Ai({id:n}))},selectSuggestion(s){let c=hm(a(),{id:n,suggestion:s});r(Vr({id:n,expression:s})),r(bi({id:n,metadata:c})),this.submit()},afterRedirection(){r(vi({id:n}))},submit(){r(Ye({q:this.state.value,enableQuerySyntax:o.enableQuerySyntax})),r(Ua({id:n}))},get state(){let c=a().standaloneSearchBoxSet[n];return{...i.state,isLoading:c.isLoading,redirectTo:c.redirectTo,analytics:c.analytics}}}}function _q(e){return e.addReducers({standaloneSearchBoxSet:Ad,configuration:$,query:It,querySuggest:mi}),!0}function Bv(e,t){return e.q!==t.q?Ba():e.sortCriteria!==t.sortCriteria?gi():e.firstResult!==t.firstResult?si():e.numberOfResults!==t.numberOfResults?ii():Et(e.f,t.f)?Js(e.f,t.f):Et(e.fExcluded,t.fExcluded)?Js(e.fExcluded,t.fExcluded,!0):Et(e.cf,t.cf)?Js(e.cf,t.cf):Et(e.af,t.af)?Js(e.af,t.af):Et(e.nf,t.nf)?jv(e.nf,t.nf):Et(e.df,t.df)?jv(e.df,t.df):ya()}function Js(e={},t={},r=!1){let a=Object.keys(e),n=Object.keys(t),o=a.filter(p=>!n.includes(p));if(o.length){let p=o[0];switch(!0){case e[p].length>1:return Ne(p);case r:return Wr({facetId:p,facetValue:e[p][0]});default:return Ut({facetId:p,facetValue:e[p][0]})}}let i=n.filter(p=>!a.includes(p));if(i.length){let p=i[0];return r?St({facetId:p,facetValue:t[p][0]}):Pe({facetId:p,facetValue:t[p][0]})}let s=n.find(p=>t[p].filter(f=>e[p].includes(f)));if(!s)return ya();let c=e[s],u=t[s],l=u.filter(p=>!c.includes(p));if(l.length)return r?St({facetId:s,facetValue:l[0]}):Pe({facetId:s,facetValue:l[0]});let d=c.filter(p=>!u.includes(p));return d.length?r?Wr({facetId:s,facetValue:d[0]}):Ut({facetId:s,facetValue:d[0]}):ya()}function jv(e={},t={}){return Js(Ri(e),Ri(t))}function Uv(e,t){return e.q!==t.q?ed():e.sortCriteria!==t.sortCriteria?id():Et(e.f,t.f)?Fi(e.f,t.f):Et(e.fExcluded,t.fExcluded)?Fi(e.fExcluded,t.fExcluded,!0):Et(e.cf,t.cf)?Fi(e.cf,t.cf):Et(e.af,t.af)?Fi(e.af,t.af):Et(e.nf,t.nf)?Fi(Ri(e.nf),Ri(t.nf)):Et(e.df,t.df)?Fi(Ri(e.df),Ri(t.df)):io()}function Et(e={},t={}){return JSON.stringify(e)!==JSON.stringify(t)}function Fi(e={},t={},r=!1){let a=Object.keys(e),n=Object.keys(t),o=a.filter(p=>!n.includes(p));if(o.length){let p=o[0];return e[p].length>1?Xe(p):Yr(p,e[p][0])}let i=n.filter(p=>!a.includes(p));if(i.length){let p=i[0];return r?hr(p,t[p][0]):De(p,t[p][0])}let s=n.find(p=>t[p].filter(f=>e[p].includes(f)));if(!s)return io();let c=e[s],u=t[s],l=u.filter(p=>!c.includes(p));if(l.length)return r?hr(s,l[0]):De(s,l[0]);let d=c.filter(p=>!u.includes(p));return d.length?Yr(s,d[0]):io()}function Ri(e={}){let t={};return Object.keys(e).forEach(r=>t[r]=e[r].map(a=>`${a.start}..${a.end}`)),t}function _v(e){var t,r,a,n,o,i;return{q:xe().q,enableQuerySyntax:xe().enableQuerySyntax,aq:(r=(t=e.advancedSearchQueries)==null?void 0:t.defaultFilters.aq)!=null?r:st().defaultFilters.aq,cq:(n=(a=e.advancedSearchQueries)==null?void 0:a.defaultFilters.cq)!=null?n:st().defaultFilters.cq,firstResult:Ue().firstResult,numberOfResults:(i=(o=e.pagination)==null?void 0:o.defaultNumberOfResults)!=null?i:Ue().defaultNumberOfResults,sortCriteria:tt(),f:{},fExcluded:{},cf:{},nf:{},df:{},debug:Ct(),sf:{},tab:"",af:{}}}var $q=new Y({parameters:new q({options:{required:!0},values:bu})});function $v(e,t){let{dispatch:r}=e,a=M(e);return ke(e,$q,t.initialState,"buildSearchParameterManager"),r(ue(t.initialState.parameters)),{...a,synchronize(n){let o=bd(e,n);r(ue(o))},get state(){return{parameters:bm(e)}}}}function bd(e,t){return{..._v(e.state),...t}}function Hv(e,t){return zq(e,t)}function bm(e){let t=e.state;return{...Hq(t),...Gq(t),...Wq(t),...Gv(t,zv,"f"),...Gv(t,Yq,"fExcluded"),...Kq(t),...Jq(t),...Xq(t),...Zq(t)}}function Hq(e){if(e.query===void 0)return{};let t=e.query.q;return t!==xe().q?{q:t}:{}}function Gq(e){var r;let t=Object.values((r=e.tabSet)!=null?r:{}).find(a=>a.isActive);return t?{tab:t.id}:{}}function zq(e,t){let r=e.state.tabSet,a=t.tab;if(!r||!Object.entries(r).length||!a)return!0;let n=a in r;return n||e.logger.warn(`The tab search parameter "${a}" is invalid. Ignoring change.`),n}function Wq(e){if(e.sortCriteria===void 0)return{};let t=e.sortCriteria;return t!==tt()?{sortCriteria:t}:{}}function Gv(e,t,r){if(e.facetSet===void 0)return{};let a=Object.entries(e.facetSet).filter(([n])=>{var o,i,s;return(s=(i=(o=e.facetOptions)==null?void 0:o.facets[n])==null?void 0:i.enabled)!=null?s:!0}).map(([n,{request:o}])=>{let i=t(o.currentValues);return i.length?{[n]:i}:{}}).reduce((n,o)=>({...n,...o}),{});return Object.keys(a).length?{[r]:a}:{}}function zv(e){return e.filter(t=>t.state==="selected").map(t=>t.value)}function Yq(e){return e.filter(t=>t.state==="excluded").map(t=>t.value)}function Kq(e){if(e.categoryFacetSet===void 0)return{};let t=Object.entries(e.categoryFacetSet).filter(([r])=>{var a,n,o;return(o=(n=(a=e.facetOptions)==null?void 0:a.facets[r])==null?void 0:n.enabled)!=null?o:!0}).map(([r,a])=>{let o=gt(a.request.currentValues).map(i=>i.value);return o.length?{[r]:o}:{}}).reduce((r,a)=>({...r,...a}),{});return Object.keys(t).length?{cf:t}:{}}function Jq(e){if(e.numericFacetSet===void 0)return{};let t=Object.entries(e.numericFacetSet).filter(([r])=>{var a,n,o;return(o=(n=(a=e.facetOptions)==null?void 0:a.facets[r])==null?void 0:n.enabled)!=null?o:!0}).map(([r,{request:a}])=>{let n=Wv(a.currentValues);return n.length?{[r]:n}:{}}).reduce((r,a)=>({...r,...a}),{});return Object.keys(t).length?{nf:t}:{}}function Xq(e){if(e.dateFacetSet===void 0)return{};let t=Object.entries(e.dateFacetSet).filter(([r])=>{var a,n,o;return(o=(n=(a=e.facetOptions)==null?void 0:a.facets[r])==null?void 0:n.enabled)!=null?o:!0}).map(([r,{request:a}])=>{let n=Wv(a.currentValues);return n.length?{[r]:n}:{}}).reduce((r,a)=>({...r,...a}),{});return Object.keys(t).length?{df:t}:{}}function Wv(e){return e.filter(t=>t.state==="selected")}function Zq(e){var a;let t=(a=e.automaticFacetSet)==null?void 0:a.set;if(t===void 0)return{};let r=Object.entries(t).map(([n,{response:o}])=>{let i=zv(o.values);return i.length?{[n]:i}:{}}).reduce((n,o)=>({...n,...o}),{});return Object.keys(r).length?{af:r}:{}}function Fm(e,t){let{dispatch:r}=e,a=$v(e,t);return{...a,synchronize(n){let o=Yv(e),i=bd(e,o),s=bd(e,n);zs(i,s)||!Hv(e,s)||(a.synchronize(n),r(I({legacy:Bv(i,s),next:Uv(i,s)})))},get state(){return{parameters:Yv(e)}}}}function Yv(e){let t=e.state;return{...bm(e),...eT(t),...tT(t),...rT(t),...aT(t),...nT(t),...sT(t),...oT(t)}}function eT(e){if(e.query===void 0)return{};let t=e.query.enableQuerySyntax;return t!==void 0&&t!==xe().enableQuerySyntax?{enableQuerySyntax:t}:{}}function tT(e){if(e.advancedSearchQueries===void 0)return{};let{aq:t,defaultFilters:r}=e.advancedSearchQueries;return t!==r.aq?{aq:t}:{}}function rT(e){if(e.advancedSearchQueries===void 0)return{};let{cq:t,defaultFilters:r}=e.advancedSearchQueries;return t!==r.cq?{cq:t}:{}}function aT(e){if(e.pagination===void 0)return{};let t=e.pagination.firstResult;return t!==Ue().firstResult?{firstResult:t}:{}}function nT(e){if(e.pagination===void 0)return{};let{numberOfResults:t,defaultNumberOfResults:r}=e.pagination;return t!==r?{numberOfResults:t}:{}}function oT(e){if(e.staticFilterSet===void 0)return{};let t=Object.entries(e.staticFilterSet).map(([r,a])=>{let n=iT(a.values);return n.length?{[r]:n}:{}}).reduce((r,a)=>({...r,...a}),{});return Object.keys(t).length?{sf:t}:{}}function iT(e){return e.filter(t=>t.state==="selected").map(t=>t.caption)}function sT(e){if(e.debug===void 0)return{};let t=e.debug;return t!==Ct()?{debug:t}:{}}var Kv="..",Rm="...",cT=/^(f|fExcluded|cf|nf|df|sf|af)-(.+)$/,uT={f:!0,fExcluded:!0,cf:!0,sf:!0,af:!0,nf:!0,df:!0},Fd="&",Xs="=";function Rd(){return{serialize:pT(fT),deserialize:CT}}function Zs(e){return e in uT}function lT(e){return e in{q:!0,aq:!0,cq:!0,enableQuerySyntax:!0,firstResult:!0,numberOfResults:!0,sortCriteria:!0,debug:!0,tab:!0}}function dT(e){let r=e in{nf:!0,df:!0};return Zs(e)&&r}function Jv(e){return lT(e)||Zs(e)}var pT=e=>t=>Object.entries(t).map(e).filter(r=>r).join(Fd);function fT(e){let[t,r]=e;return Jv(t)?Zs(t)&&!dT(t)?gT(r)?ST(t,r):"":t==="nf"||t==="df"?hT(r)?yT(t,r):"":mT(t,r):""}function mT(e,t){return`${e}${Xs}${encodeURIComponent(t)}`}function gT(e){return Pm(e)?Xv(e,r=>typeof r=="string"):!1}function hT(e){return Pm(e)?Xv(e,r=>Pm(r)&&"start"in r&&"end"in r):!1}function Pm(e){return!!(e&&typeof e=="object")}function Xv(e,t){return Object.entries(e).filter(a=>{let n=a[1];return!Array.isArray(n)||!n.every(t)}).length===0}function ST(e,t){return Object.entries(t).map(([r,a])=>`${e}-${r}${Xs}${a.map(n=>encodeURIComponent(n)).join(",")}`).join(Fd)}function yT(e,t){return Object.entries(t).map(([r,a])=>{let n=a.map(({start:o,end:i,endInclusive:s})=>`${o}${s?Rm:Kv}${i}`).join(",");return`${e}-${r}${Xs}${n}`}).join(Fd)}function CT(e){return e.split(Fd).map(a=>xT(a)).map(vT).filter(RT).map(a=>PT(a)).reduce((a,n)=>{let[o,i]=n;if(Zs(o)){let s={...a[o],...i};return{...a,[o]:s}}return{...a,[o]:i}},{})}function xT(e){let[t,...r]=e.split(Xs),a=r.join(Xs);return[t,a]}function vT(e){let[t,r]=e,a=cT.exec(t);if(!a)return e;let n=a[1],o=a[2],i=r.split(","),s=AT(n,i),c={[o]:s};return[n,JSON.stringify(c)]}function AT(e,t){return e==="nf"?bT(t):e==="df"?FT(t):t}function bT(e){return e.map(t=>{let{startAsString:r,endAsString:a,isEndInclusive:n}=eA(t);return{start:parseFloat(r),end:parseFloat(a),endInclusive:n}}).filter(({start:t,end:r})=>Number.isFinite(t)&&Number.isFinite(r)).map(({start:t,end:r,endInclusive:a})=>Hs({start:t,end:r,state:"selected",endInclusive:a}))}function Zv(e){try{return rC(e)?(Iu(e,Os),!0):cr(e)?(dn(e),!0):!1}catch(t){return!1}}function FT(e){return e.map(t=>{let{isEndInclusive:r,startAsString:a,endAsString:n}=eA(t);return{start:a,end:n,endInclusive:r}}).filter(({start:t,end:r})=>Zv(t)&&Zv(r)).map(({start:t,end:r,endInclusive:a})=>Pn({start:t,end:r,state:"selected",endInclusive:a}))}function RT(e){let t=Jv(e[0]),r=e.length===2;return t&&r}function PT(e,t=!0){let[r,a]=e;return r==="enableQuerySyntax"?[r,a==="true"]:r==="debug"?[r,a==="true"]:r==="firstResult"?[r,parseInt(a)]:r==="numberOfResults"?[r,parseInt(a)]:Zs(r)?[r,wT(a)]:[r,t?decodeURIComponent(a):a]}function wT(e){let t=JSON.parse(e),r={};return Object.entries(t).forEach(a=>{let[n,o]=a;r[n]=o.map(i=>Un(i)?decodeURIComponent(i):i)}),r}function eA(e){let t=e.indexOf(Rm)!==-1,[r,a]=e.split(t?Rm:Kv);return{isEndInclusive:t,startAsString:r,endAsString:a}}var IT=new Y({fragment:new w});function ET(e,t){let r;function a(){r=e.state.search.requestId}function n(){return r!==e.state.search.requestId}if(!OT(e))throw k;ke(e,IT,t.initialState,"buildUrlManager");let o=M(e),i=t.initialState.fragment;a();let s=Fm(e,{initialState:{parameters:Pd(i)}});return{...o,subscribe(c){let u=()=>{let l=this.state.fragment;!kT(i,l)&&n()&&(i=l,c()),a()};return u(),e.subscribe(u)},get state(){return{fragment:Rd().serialize(s.state.parameters)}},synchronize(c){i=c;let u=Pd(c);s.synchronize(u)}}}function kT(e,t){if(e===t)return!0;let r=Pd(e),a=Pd(t);return zs(r,a)}function Pd(e){return Rd().deserialize(e)}function OT(e){return e.addReducers({configuration:$}),!0}function qT(e){return ci(e)}async function wd(e,t){var s;let{search:r,accessToken:a,organizationId:n,analytics:o}=e.configuration,i=((s=e.query)==null?void 0:s.q)||"";return{url:r.apiBaseUrl,accessToken:a,organizationId:n,enableNavigation:!1,...o.enabled&&{visitorId:await We(e.configuration.analytics)},q:i,...t,requestedOutputSize:t.requestedOutputSize||0,...r.authenticationProviders.length&&{authentication:r.authenticationProviders.join(",")}}}var Dn=W("resultPreview/fetchResultContent",async(e,{extra:t,getState:r,rejectWithValue:a})=>{let n=r(),o=await wd(n,e),i=await t.apiClient.html(o);return ye(i)?a(i.error):{content:i.success,uniqueId:e.uniqueId}}),Pi=C("resultPreview/next"),wi=C("resultPreview/previous"),Ii=C("resultPreview/prepare",e=>A(e,{results:new X({required:!0})})),tA=2048,Ei=W("resultPreview/updateContentURL",async(e,{getState:t,extra:r})=>{let a=t(),n=dS(await e.buildResultPreviewRequest(a,{uniqueId:e.uniqueId,requestedOutputSize:e.requestedOutputSize}),e.path);return(n==null?void 0:n.length)>tA&&r.logger.error(`The content URL was truncated as it exceeds the maximum allowed length of ${tA} characters.`),{contentURL:n}});var rA=e=>E({prefix:"analytics/resultPreview/open",__legacy__getBuilder:(t,r)=>{ut(e);let a=Oe(e,r),n=Le(e);return t.makeDocumentQuickview(a,n)},analyticsType:"itemClick",analyticsPayloadBuilder:t=>{var n,o;let r=Oe(e,t),a=Le(e);return{searchUid:(o=(n=t.search)==null?void 0:n.response.searchUid)!=null?o:"",position:r.documentPosition,actionCause:"open",itemMetadata:{uniqueFieldName:a.contentIDKey,uniqueFieldValue:a.contentIDValue,title:r.documentTitle,author:r.documentAuthor,url:r.documentUrl}}}});var wm=e=>{let{content:t,isLoading:r,uniqueId:a,contentURL:n}=Ja();e.content=t,e.isLoading=r,e.uniqueId=a,e.contentURL=n},Im=e=>e.filter(t=>t.hasHtmlVersion).map(t=>t.uniqueId),Id=T(Ja(),e=>{e.addCase(Dn.pending,t=>{t.isLoading=!0}).addCase(Dn.fulfilled,(t,r)=>{let{content:a,uniqueId:n}=r.payload;t.position=t.resultsWithPreview.indexOf(n),t.content=a,t.uniqueId=n,t.isLoading=!1}).addCase(I.fulfilled,(t,r)=>{wm(t),t.resultsWithPreview=Im(r.payload.response.results)}).addCase(Fa.fulfilled,(t,r)=>{wm(t),t.resultsWithPreview=t.resultsWithPreview.concat(Im(r.payload.response.results))}).addCase(ur.fulfilled,wm).addCase(Ii,(t,r)=>{t.resultsWithPreview=Im(r.payload.results)}).addCase(Pi,t=>{if(t.isLoading)return;let r=t.position+1;r>t.resultsWithPreview.length-1&&(r=0),t.position=r}).addCase(wi,t=>{if(t.isLoading)return;let r=t.position-1;r<0&&(r=t.resultsWithPreview.length-1),t.position=r}).addCase(Ei.fulfilled,(t,r)=>{t.contentURL=r.payload.contentURL})});function aA(e,t,r,a,n){if(!TT(e))throw k;let{dispatch:o}=e,i=()=>e.state,s=M(e),{result:c,maximumPreviewSize:u}=t.options,l=()=>{let{resultsWithPreview:p,position:f}=i().resultPreview;return p[f]},d=p=>{o(Ei({uniqueId:p,requestedOutputSize:u,buildResultPreviewRequest:r,path:a})),t.options.onlyContentURL||o(Dn({uniqueId:p,requestedOutputSize:u})),n&&n()};return{...s,fetchResultContent(){d(c.uniqueId)},next(){o(Pi()),d(l())},previous(){o(wi()),d(l())},get state(){let p=i(),f=c.hasHtmlVersion,m=p.resultPreview,g=c.uniqueId===m.uniqueId?m.content:"",S=m.isLoading,y=m.contentURL,x=l();return{content:g,resultHasPreview:f,isLoading:S,contentURL:y,currentResultUniqueId:x}}}}function TT(e){return e.addReducers({configuration:$,resultPreview:Id}),!0}function DT(e,t){if(!VT(e))throw k;let{dispatch:r}=e,a=()=>e.state,n=()=>a().search.results,s=aA(e,t,wd,"/html",()=>{e.dispatch(rA(t.options.result))});return r(Ii({results:n()})),{...s,get state(){return{...s.state,currentResult:n().findIndex(c=>c.uniqueId===s.state.currentResultUniqueId)+1,totalResults:n().length}}}}function VT(e){return e.addReducers({search:J}),!0}var MT=e=>E("analytics/folding/showMore",(t,r)=>(ut(e),t.makeShowMoreFoldedResults(Oe(e,r),Le(e)))),LT=()=>E("analytics/folding/showLess",e=>e.makeShowLessFoldedResults()),nA={logShowMoreFoldedResults:MT,logShowLessFoldedResults:LT};function NT(e,t){return e.raw[t.collection]}function Em(e,t){return e.raw[t.parent]}function ec(e,t){let r=e.raw[t.child];return Ec(r)?r[0]:r}function QT(e,t){return(e||t)!==void 0&&e===t}function oA(e,t,r,a=[]){let n=ec(e,r);return n?a.indexOf(n)!==-1?[]:t.filter(o=>{let i=ec(o,r)===ec(e,r);return Em(o,r)===n&&!i}).map(o=>({result:o,children:oA(o,t,r,[...a,n])})):[]}function BT(e,t){return e.find(r=>{let a=Em(r,t)===void 0,n=QT(Em(r,t),ec(r,t));return a||n})}function iA(e){return e.parentResult?iA(e.parentResult):e}function jT(e,t,r){var o;let a=Su(e),n=(o=r!=null?r:BT(a,t))!=null?o:iA(e);return{result:n,children:oA(n,a,t),moreResultsAvailable:!0,isLoadingMoreResults:!1}}function Ed(e,t,r){let a={};return e.forEach(n=>{let o=NT(n,t);!o||!ec(n,t)&&!n.parentResult||(a[o]=jT(n,t,r))}),a}function sA(e,t){if(!e.collections[t])throw new Error(`Missing collection ${t} from ${Object.keys(e.collections)}: Folding most probably in an invalid state...`);return e.collections[t]}var kd=T(rn(),e=>e.addCase(I.fulfilled,(t,{payload:r})=>{t.collections=t.enabled?Ed(r.response.results,t.fields):{}}).addCase(ur.fulfilled,(t,{payload:r})=>{t.collections=t.enabled?Ed(r.response.results,t.fields):{}}).addCase(Fa.fulfilled,(t,{payload:r})=>{t.collections=t.enabled?{...t.collections,...Ed(r.response.results,t.fields)}:{}}).addCase(wa,(t,{payload:r})=>{var a,n,o,i;return t.enabled?t:{enabled:!0,collections:{},fields:{collection:(a=r.collectionField)!=null?a:t.fields.collection,parent:(n=r.parentField)!=null?n:t.fields.parent,child:(o=r.childField)!=null?o:t.fields.child},filterFieldRange:(i=r.numberOfFoldedResults)!=null?i:t.filterFieldRange}}).addCase(Ia.pending,(t,{meta:r})=>{let a=r.arg;sA(t,a).isLoadingMoreResults=!0}).addCase(Ia.rejected,(t,{meta:r})=>{let a=r.arg;sA(t,a).isLoadingMoreResults=!1}).addCase(Ia.fulfilled,(t,{payload:{collectionId:r,results:a,rootResult:n}})=>{let o=Ed(a,t.fields,n);if(!o||!o[r])throw new Error(`Unable to create collection ${r} from received results: ${JSON.stringify(a)}. Folding most probably in an invalid state... `);t.collections[r]=o[r],t.collections[r].moreResultsAvailable=!1}));var UT=new Y(Xf);function cA(e,t,r){var s;if(!_T(e))throw k;let a=Xl(e,t),{dispatch:n}=e,o=()=>e.state,i=((s=t.options)==null?void 0:s.folding)?he(e,UT,t.options.folding,"buildFoldedResultList"):{};return n(wa({...i})),{...a,loadCollection:c=>{n(t.loadCollectionActionCreator(c.result.raw[e.state.folding.fields.collection])),n(r.logShowMoreFoldedResults(c.result))},logShowMoreFoldedResults:c=>{n(r.logShowMoreFoldedResults(c))},logShowLessFoldedResults:()=>{n(r.logShowLessFoldedResults())},findResultById(c){return km(this.state.results,u=>u.result.uniqueId===c.result.uniqueId)},findResultByCollection(c){return km(this.state.results,u=>u.result.raw.foldingcollection===c.result.raw.foldingcollection)},get state(){let c=o();return{...a.state,results:a.state.results.map(u=>{let l=u.raw[c.folding.fields.collection];return!l||!c.folding.collections[l]?{result:u,moreResultsAvailable:!1,isLoadingMoreResults:!1,children:[]}:c.folding.collections[l]})}}}}function _T(e){return e.addReducers({search:J,configuration:ju,folding:kd,query:It}),!0}function km(e,t){for(let r=0;r<e.length;r++){let a=e[r];if(t(a))return a;if(a.children.length){let n=km(a.children,t);if(n)return n}}return null}function $T(e,t={}){let r=cA(e,{...t,loadCollectionActionCreator:Ia,fetchMoreResultsActionCreator:Fa},nA);return{...r,get state(){return r.state}}}var _a=T(eu(),e=>e.addCase(I.pending,t=>{t.query="",t.queryModification={originalQuery:"",newQuery:"",queryToIgnore:t.queryModification.queryToIgnore}}).addCase(I.fulfilled,(t,r)=>{var s;let a=[],n=[],o=[],i=[];r.payload.response.triggers.forEach(c=>{switch(c.type){case"redirect":a.push(c.content);break;case"query":n.push(c.content);break;case"execute":o.push({functionName:c.content.name,params:c.content.params});break;case"notify":i.push(c.content);break}}),t.redirectTo=(s=a[0])!=null?s:"",t.query=t.queryModification.newQuery,t.executions=o,t.notifications=i}).addCase(Eo,(t,r)=>{t.queryModification={...r.payload,queryToIgnore:""}}).addCase(ba,(t,r)=>{t.queryModification.queryToIgnore=r.payload}));function HT(e){if(!GT(e))throw k;let t=M(e),{dispatch:r}=e,a=()=>e.state,n=a().triggers.redirectTo;return{...t,subscribe(o){let i=()=>{let s=n!==this.state.redirectTo;n=this.state.redirectTo,s&&this.state.redirectTo&&(o(),r(Mu()))};return i(),e.subscribe(i)},get state(){return{redirectTo:a().triggers.redirectTo}}}}function GT(e){return e.addReducers({triggers:_a}),!0}function zT(e){if(!WT(e))throw k;let t=M(e),{dispatch:r}=e,a=()=>e.state,n=()=>a().triggers.queryModification.newQuery,o=()=>a().triggers.queryModification.originalQuery;return{...t,get state(){return{newQuery:n(),originalQuery:o(),wasQueryModified:n()!==""}},undo(){r(ba(n())),r(Ye({q:o()})),r(I({legacy:Du({undoneQuery:n()}),next:hC(n())}))}}}function WT(e){return e.addReducers({triggers:_a,query:It}),!0}function YT(e){if(!KT(e))throw k;let t=M(e),{dispatch:r}=e,a=()=>e.state,n=a().triggers.executions;return{...t,subscribe(o){let i=()=>{let s=!kn(this.state.executions,n,(c,u)=>c.functionName===u.functionName&&kn(c.params,u.params));n=this.state.executions,s&&this.state.executions.length&&(o(),r(Lu()))};return i(),e.subscribe(i)},get state(){return{executions:a().triggers.executions}}}}function KT(e){return e.addReducers({triggers:_a}),!0}function JT(e){if(!XT(e))throw k;let t=M(e),{dispatch:r}=e,a=()=>e.state,n=a().triggers.notifications;return{...t,subscribe(o){let i=()=>{let s=!kn(n,this.state.notifications);n=this.state.notifications,s&&(o(),r(Vu()))};return i(),e.subscribe(i)},get state(){return{notifications:a().triggers.notifications}}}}function XT(e){return e.addReducers({triggers:_a}),!0}var Od=()=>new q({values:{questionAnswerId:O},options:{required:!0}}),Om=()=>new q({values:{linkText:ge,linkURL:ge},options:{required:!0}});function ki(e){return A(e,Od())}function ta(e,t){var a,n;let r=t!=null?t:(n=(a=e.search)==null?void 0:a.questionAnswer)==null?void 0:n.documentId;return r&&e.search&&vC(e,r.contentIdKey,r.contentIdValue)}function Vn(e,t){var n,o,i,s,c;let r=(o=(n=e.questionAnswering)==null?void 0:n.relatedQuestions.findIndex(u=>u.questionAnswerId===t))!=null?o:-1;if(r===-1)return null;let a=(c=(s=(i=e.search)==null?void 0:i.questionAnswer)==null?void 0:s.relatedQuestions)==null?void 0:c[r];return a!=null?a:null}var qm=()=>E("analytics/smartSnippet/expand",e=>e.makeExpandSmartSnippet()),Tm=()=>E("analytics/smartSnippet/collapse",e=>e.makeCollapseSmartSnippet()),Dm=()=>E("analytics/smartSnippet/like",e=>e.makeLikeSmartSnippet()),Vm=()=>E("analytics/smartSnippet/dislike",e=>e.makeDislikeSmartSnippet());function Mm(){return E("analytics/smartSnippet/source/open",(e,t)=>{let r=ta(t);return e.makeOpenSmartSnippetSource(Oe(r,t),Le(r))})}var tc=e=>E("analytics/smartSnippet/source/open",(t,r)=>{A(e,Om());let a=ta(r);return t.makeOpenSmartSnippetInlineLink(Oe(a,r),{...Le(a),...e})}),Lm=()=>E("analytics/smartSnippet/feedbackModal/open",e=>e.makeOpenSmartSnippetFeedbackModal()),Nm=()=>E("analytics/smartSnippet/feedbackModal/close",e=>e.makeCloseSmartSnippetFeedbackModal()),Qm=e=>E("analytics/smartSnippet/sendFeedback",t=>t.makeSmartSnippetFeedbackReason(e)),Bm=e=>E("analytics/smartSnippet/sendFeedback",t=>t.makeSmartSnippetFeedbackReason("other",e)),jm=e=>E("analytics/smartSnippetSuggestion/expand",(t,r)=>{ki(e);let a=Vn(r,e.questionAnswerId);return a?t.makeExpandSmartSnippetSuggestion({question:a.question,answerSnippet:a.answerSnippet,documentId:a.documentId}):null}),Um=e=>E("analytics/smartSnippetSuggestion/expand",(t,r)=>{ki(e);let a=Vn(r,e.questionAnswerId);return a?t.makeCollapseSmartSnippetSuggestion({question:a.question,answerSnippet:a.answerSnippet,documentId:a.documentId}):null}),rc=e=>E("analytics/smartSnippet/source/open",(t,r)=>{A(e,Od());let a=Vn(r,e.questionAnswerId);if(!a)return null;let n=ta(r,a.documentId);return n?t.makeOpenSmartSnippetSuggestionSource(Oe(n,r),{question:a.question,answerSnippet:a.answerSnippet,documentId:a.documentId}):null}),qd=(e,t)=>E("analytics/smartSnippet/source/open",(r,a)=>{A(e,Od()),A(t,Om());let n=Vn(a,e.questionAnswerId);if(!n)return null;let o=ta(a,n.documentId);return o?r.makeOpenSmartSnippetSuggestionInlineLink(Oe(o,a),{question:n.question,answerSnippet:n.answerSnippet,documentId:n.documentId,linkText:t.linkText,linkURL:t.linkURL}):null}),Td={logExpandSmartSnippet:qm,logCollapseSmartSnippet:Tm,logLikeSmartSnippet:Dm,logDislikeSmartSnippet:Vm,logOpenSmartSnippetSource:Mm,logOpenSmartSnippetInlineLink:tc,logOpenSmartSnippetFeedbackModal:Lm,logCloseSmartSnippetFeedbackModal:Nm,logSmartSnippetFeedback:Qm,logSmartSnippetDetailedFeedback:Bm,logExpandSmartSnippetSuggestion:jm,logCollapseSmartSnippetSuggestion:Um,logOpenSmartSnippetSuggestionSource:rc};var Oi=C("smartSnippet/expand"),qi=C("smartSnippet/collapse"),Ti=C("smartSnippet/like"),Di=C("smartSnippet/dislike"),Vi=C("smartSnippet/feedbackModal/open"),$a=C("smartSnippet/feedbackModal/close"),Mi=C("smartSnippet/related/expand",e=>ki(e)),Li=C("smartSnippet/related/collapse",e=>ki(e));var uA=(e,t)=>e.findIndex(r=>r.questionAnswerId===t.questionAnswerId);function lA({question:e,answerSnippet:t,documentId:{contentIdKey:r,contentIdValue:a}}){return Hn({question:e,answerSnippet:t,contentIdKey:r,contentIdValue:a})}function ZT(e,t){let r=lA(e);return t&&r===t.questionAnswerId?t:{contentIdKey:e.documentId.contentIdKey,contentIdValue:e.documentId.contentIdValue,expanded:!1,questionAnswerId:r}}var Mr=T(Kn(),e=>e.addCase(Oi,t=>{t.expanded=!0}).addCase(qi,t=>{t.expanded=!1}).addCase(Ti,t=>{t.liked=!0,t.disliked=!1,t.feedbackModalOpen=!1}).addCase(Di,t=>{t.liked=!1,t.disliked=!0}).addCase(Vi,t=>{t.feedbackModalOpen=!0}).addCase($a,t=>{t.feedbackModalOpen=!1}).addCase(I.fulfilled,(t,r)=>{let a=r.payload.response.questionAnswer.relatedQuestions.map((o,i)=>ZT(o,t.relatedQuestions[i])),n=lA(r.payload.response.questionAnswer);return t.questionAnswerId===n?{...t,relatedQuestions:a}:{...Kn(),relatedQuestions:a,questionAnswerId:n}}).addCase(Mi,(t,r)=>{let a=uA(t.relatedQuestions,r.payload);a!==-1&&(t.relatedQuestions[a].expanded=!0)}).addCase(Li,(t,r)=>{let a=uA(t.relatedQuestions,r.payload);a!==-1&&(t.relatedQuestions[a].expanded=!1)}));function dA(e,t,r){var c;if(!eD(e))throw k;let a=M(e),n=()=>e.state,o=()=>ta(n()),i=null,s=dt(e,{options:{selectionDelay:(c=r==null?void 0:r.options)==null?void 0:c.selectionDelay}},()=>{let u=o();if(!u){i=null;return}let{searchResponseId:l}=n().search;i!==l&&(i=l,e.dispatch(t.logOpenSmartSnippetSource()),e.dispatch(wt(u)))});return{...a,get state(){let u=n();return{question:u.search.questionAnswer.question,answer:u.search.questionAnswer.answerSnippet,documentId:u.search.questionAnswer.documentId,expanded:u.questionAnswering.expanded,answerFound:u.search.questionAnswer.answerSnippet!=="",liked:u.questionAnswering.liked,disliked:u.questionAnswering.disliked,feedbackModalOpen:u.questionAnswering.feedbackModalOpen,source:o()}},expand(){e.dispatch(t.logExpandSmartSnippet()),e.dispatch(Oi())},collapse(){e.dispatch(t.logCollapseSmartSnippet()),e.dispatch(qi())},like(){e.dispatch(t.logLikeSmartSnippet()),e.dispatch(Ti())},dislike(){e.dispatch(t.logDislikeSmartSnippet()),e.dispatch(Di())},openFeedbackModal(){e.dispatch(t.logOpenSmartSnippetFeedbackModal()),e.dispatch(Vi())},closeFeedbackModal(){e.dispatch(t.logCloseSmartSnippetFeedbackModal()),e.dispatch($a())},sendFeedback(u){e.dispatch(t.logSmartSnippetFeedback(u)),e.dispatch($a())},sendDetailedFeedback(u){e.dispatch(t.logSmartSnippetDetailedFeedback(u)),e.dispatch($a())},selectSource(){s.select()},beginDelayedSelectSource(){s.beginDelayedSelect()},cancelPendingSelectSource(){s.cancelPendingSelect()}}}function eD(e){return e.addReducers({search:J,questionAnswering:Mr}),!0}function Dd(e,t){if(!tD(e))throw k;let r=()=>e.state,a=new Set,n=l=>a.has(l)?!0:(a.add(l),!1),o=null,i=l=>{o!==l&&(o=l,c={},a.clear())},s=(l,d,p)=>{var f;return dt(e,{options:{selectionDelay:(f=t==null?void 0:t.options)==null?void 0:f.selectionDelay}},()=>{n(d)||e.dispatch(p?qd({questionAnswerId:p},l):tc(l))})},c={},u=(l,d)=>{let{searchResponseId:p}=r().search;i(p);let f=Hn({...l,questionAnswerId:d});return f in c||(c[f]=s(l,f,d)),c[f]};return{selectInlineLink(l,d){var p;(p=u(l,d))==null||p.select()},beginDelayedSelectInlineLink(l,d){var p;(p=u(l,d))==null||p.beginDelayedSelect()},cancelPendingSelectInlineLink(l,d){var p;(p=u(l,d))==null||p.cancelPendingSelect()}}}function tD(e){return e.addReducers({search:J,questionAnswering:Mr}),!0}function rD(e,t){var n;let r=dA(e,Td,t),a=Dd(e,{options:{selectionDelay:(n=t==null?void 0:t.options)==null?void 0:n.selectionDelay}});return{...r,get state(){return r.state},selectInlineLink(o){a.selectInlineLink(o)},beginDelayedSelectInlineLink(o){a.beginDelayedSelectInlineLink(o)},cancelPendingSelectInlineLink(o){a.cancelPendingSelectInlineLink(o)}}}function pA(e,t){if(!aD(e))throw k;let r=M(e),a=()=>e.state,n=o=>{let{contentIdKey:i,contentIdValue:s}=o;return e.state.search.results.find(c=>Ra(c,i)===s)};return{...r,get state(){let o=a();return{questions:o.search.questionAnswer.relatedQuestions.map((i,s)=>({question:i.question,answer:i.answerSnippet,documentId:i.documentId,questionAnswerId:o.questionAnswering.relatedQuestions[s].questionAnswerId,expanded:o.questionAnswering.relatedQuestions[s].expanded,source:n(i.documentId)}))}},expand(o){let i={questionAnswerId:o};e.dispatch(t.logExpandSmartSnippetSuggestion(i)),e.dispatch(Mi(i))},collapse(o){let i={questionAnswerId:o};e.dispatch(t.logCollapseSmartSnippetSuggestion(i)),e.dispatch(Li(i))}}}function aD(e){return e.addReducers({search:J,questionAnswering:Mr}),!0}function fA(e,t){if(!nD(e))throw k;let r=()=>e.state,a=d=>{let p=r(),f=Vn(p,d);return f?ta(p,f.documentId):null},n=new Set,o=d=>n.has(d)?!0:(n.add(d),!1),i=null,s=d=>{i!==d&&(i=d,u={},n.clear())},c=(d,p)=>{var f;return dt(e,{options:{selectionDelay:(f=t==null?void 0:t.options)==null?void 0:f.selectionDelay}},()=>{o(p)||(e.dispatch(rc({questionAnswerId:p})),e.dispatch(wt(d)))})},u={},l=d=>{let{searchResponseId:p}=r().search;s(p);let f=a(d);return f?(d in u||(u[d]=c(f,d)),u[d]):null};return{selectSource(d){var p;(p=l(d))==null||p.select()},beginDelayedSelectSource(d){var p;(p=l(d))==null||p.beginDelayedSelect()},cancelPendingSelectSource(d){var p;(p=l(d))==null||p.cancelPendingSelect()}}}function nD(e){return e.addReducers({search:J,questionAnswering:Mr}),!0}function oD(e,t){var o,i;let r=pA(e,Td),a=Dd(e,{options:{selectionDelay:(o=t==null?void 0:t.options)==null?void 0:o.selectionDelay}}),n=fA(e,{options:{selectionDelay:(i=t==null?void 0:t.options)==null?void 0:i.selectionDelay}});return{...r,get state(){return r.state},selectSource(s){n.selectSource(s)},beginDelayedSelectSource(s){n.beginDelayedSelectSource(s)},cancelPendingSelectSource(s){n.cancelPendingSelectSource(s)},selectInlineLink(s,c){a.selectInlineLink(c,s)},beginDelayedSelectInlineLink(s,c){a.beginDelayedSelectInlineLink(c,s)},cancelPendingSelectInlineLink(s,c){a.cancelPendingSelectInlineLink(c,s)}}}var iD={queries:new X({required:!0,each:new w({emptyAllowed:!1})}),maxLength:new D({required:!0,min:1,default:10})},Ni=C("recentQueries/registerRecentQueries",e=>A(e,iD)),Qi=C("recentQueries/clearRecentQueries");var mA=()=>E("analytics/recentQueries/clear",e=>e.makeClearRecentQueries()),gA=()=>E("analytics/recentQueries/click",e=>e.makeRecentQueryClick()),hA=()=>({actionCause:oe.recentQueryClick,getEventExtraPayload:e=>new ae(()=>e).getBaseMetadata()});var Vd=T(Jc(),e=>{e.addCase(Ni,(t,r)=>{t.queries=r.payload.queries.slice(0,r.payload.maxLength),t.maxLength=r.payload.maxLength}).addCase(Qi,t=>{t.queries=[]}).addCase(I.fulfilled,(t,r)=>{let a=r.payload.queryExecuted.trim(),n=r.payload.response.results;if(!a.length||!n.length)return;t.queries=t.queries.filter(i=>i!==a);let o=t.queries.slice(0,t.maxLength-1);t.queries=[a,...o]})});var sD={queries:[]},cD={maxLength:10,clearFilters:!0},uD=new Y({queries:new X({required:!0})}),lD=new Y({maxLength:new D({required:!0,min:1}),clearFilters:new K});function dD(e,t){he(e,lD,t==null?void 0:t.options,"buildRecentQueriesList"),ke(e,uD,t==null?void 0:t.initialState,"buildRecentQueriesList")}function pD(e,t){if(!fD(e))throw k;let r=M(e),{dispatch:a}=e,n=()=>e.state,o={...cD,...t==null?void 0:t.options},i={...sD,...t==null?void 0:t.initialState};dD(e,{options:o,initialState:i});let s={queries:i.queries,maxLength:o.maxLength};return a(Ni(s)),{...r,get state(){let c=n();return{...c.recentQueries,analyticsEnabled:c.configuration.analytics.enabled}},clear(){a(mA()),a(Qi())},executeRecentQuery(c){let u=new D({required:!0,min:0,max:this.state.queries.length}).validate(c);if(u)throw new Error(u);a(Bu({q:this.state.queries[c],clearFilters:o.clearFilters})),a(I({legacy:gA(),next:hA()}))}}}function fD(e){return e.addReducers({search:J,recentQueries:Vd}),!0}var SA=e=>E("analytics/recentResults/click",(t,r)=>(ut(e),t.makeRecentResultClick(Oe(e,r),Le(e)))),yA=()=>E("analytics/recentResults/clear",e=>e.makeClearRecentResults());var Md=T(Xc(),e=>{e.addCase(ui,(t,r)=>{t.results=r.payload.results.slice(0,r.payload.maxLength),t.maxLength=r.payload.maxLength}).addCase(li,t=>{t.results=[]}).addCase(wt,(t,r)=>{let a=r.payload;t.results=t.results.filter(o=>o.uniqueId!==a.uniqueId);let n=t.results.slice(0,t.maxLength-1);t.results=[a,...n]})});var mD={initialState:{results:[]},options:{maxLength:10}},gD=new Y({results:new X({required:!0})}),hD=new Y({maxLength:new D({required:!0,min:1})});function SD(e,t){he(e,hD,t==null?void 0:t.options,"buildRecentResultsList"),ke(e,gD,t==null?void 0:t.initialState,"buildRecentResultsList")}function yD(e,t){if(!CD(e))throw k;let r=M(e),{dispatch:a}=e,n=()=>e.state,o={...mD,...t};SD(e,o);let i={results:o.initialState.results,maxLength:o.options.maxLength};return a(ui(i)),{...r,get state(){return n().recentResults},clear(){a(yA()),a(li())}}}function CD(e){return e.addReducers({recentResults:Md}),!0}function xD(e,t){return dt(e,t,()=>e.dispatch(SA(t.options.result)))}function vD(e,t){if(!AD(e))throw k;let r=p=>{var f,m;return(m=(f=e.state.facetOptions.facets[p])==null?void 0:f.enabled)!=null?m:!1},a=p=>{var f,m,g,S,y,x,b,P,N,H,Z,U,_,fe,Se,j;return(j=(Se=(Z=(b=(g=(m=(f=e.state.facetSet)==null?void 0:f[p])==null?void 0:m.request)==null?void 0:g.currentValues)!=null?b:(x=(y=(S=e.state.categoryFacetSet)==null?void 0:S[p])==null?void 0:y.request)==null?void 0:x.currentValues)!=null?Z:(H=(N=(P=e.state.numericFacetSet)==null?void 0:P[p])==null?void 0:N.request)==null?void 0:H.currentValues)!=null?Se:(fe=(_=(U=e.state.dateFacetSet)==null?void 0:U[p])==null?void 0:_.request)==null?void 0:fe.currentValues)!=null?j:null},n=p=>p in e.state.facetOptions.facets,o=()=>Hn({isFacetRegistered:n(t.facetId),parentFacets:t.conditions.map(({parentFacetId:p})=>n(p)?{enabled:r(p),values:a(p)}:null)}),i=()=>{let p=o();return p===l?!1:(l=p,!0)},s=()=>t.conditions.some(p=>{if(!r(p.parentFacetId))return!1;let f=a(p.parentFacetId);return f===null?!1:p.condition(f)}),c=()=>{e.state.facetSet&&Object.entries(e.state.facetSet).forEach(([p,f])=>f.request.freezeCurrentValues&&e.dispatch(Kr({facetId:p,freezeCurrentValues:!1})))},u=()=>{if(!n(t.facetId))return;let p=r(t.facetId),f=s();p!==f&&(e.dispatch(f?Ke(t.facetId):ve(t.facetId)),c())};if(!t.conditions.length)return{stopWatching(){}};let l=o(),d=e.subscribe(()=>{i()&&u()});return u(),{stopWatching(){d()}}}function AD(e){return e.addReducers({facetOptions:Qe}),!0}function bD(e,t){if(!FD(e))throw k;let{facetSearch:r,allowedValues:a,...n}=t.options.facet,o=Ze(e,n);e.dispatch(Ar({...$s,...n,facetId:o,...a&&{allowedValues:{type:"simple",values:a}}}));let i=xl(e,{options:{...r,facetId:o},select:c=>{e.dispatch(ie()),e.dispatch(I({legacy:Pe({facetId:o,facetValue:c.rawValue}),next:De(o,c.rawValue)}))},exclude:c=>{e.dispatch(ie()),e.dispatch(I({legacy:St({facetId:o,facetValue:c.rawValue}),next:hr(o,c.rawValue)}))},isForFieldSuggestions:!0,executeFacetSearchActionCreator:Je,executeFieldSuggestActionCreator:Oa});return{...M(e),...i,updateText:function(c){i.updateText(c),i.search()},get state(){return i.state}}}function FD(e){return e.addReducers({facetSet:Or,configuration:$,facetSearchSet:ti,search:J}),!0}function RD(e,t){if(!PD(e))throw k;let{facetSearch:r,...a}=t.options.facet,n=Ze(e,a);e.dispatch(dr({...Bs,...a,facetId:n}));let o=ll(e,{options:{...r,facetId:n},isForFieldSuggestions:!0});return{...M(e),...o,updateText:function(s){o.updateText(s),o.search()},get state(){return o.state}}}function PD(e){return e.addReducers({categoryFacetSet:fr,configuration:$,categoryFacetSearchSet:Go,search:J}),!0}var CA=T(ha(),e=>{e.addCase(I.fulfilled,(t,r)=>{var n;t.set={};let a=(n=r.payload.response.generateAutomaticFacets)==null?void 0:n.facets;a==null||a.forEach(o=>{t.set[o.field]={response:o}})}).addCase(zl,(t,r)=>{r.payload.desiredCount&&(t.desiredCount=r.payload.desiredCount),r.payload.numberOfValues&&(t.numberOfValues=r.payload.numberOfValues)}).addCase(Ma,(t,r)=>{var c;let{field:a,selection:n}=r.payload,o=(c=t.set[a])==null?void 0:c.response;if(!o)return;let i=o.values.find(u=>u.value===n.value);if(!i)return;let s=i.state==="selected";i.state=s?"idle":"selected"}).addCase(Wl,(t,r)=>{var o;let a=r.payload,n=(o=t.set[a])==null?void 0:o.response;if(!!n)for(let i of n.values)i.state="idle"}).addCase(ue,(t,r)=>{var o,i,s;let a=(o=r.payload.af)!=null?o:{},n=Object.keys(t.set);for(let c in a)if(!t.set[c]){let u=wD(c),l=a[c].map(d=>ID(d));u.values.push(...l),t.set[c]={response:u}}for(let c of n)if(!(c in a)){let u=(i=t.set[c])==null?void 0:i.response;for(let l of u.values)l.state="idle"}for(let c in a){let u=(s=t.set[c])==null?void 0:s.response;if(u){let l=u.values;for(let d of l)a[c].includes(d.value)?d.state==="idle"&&(d.state="selected"):d.state="idle"}}}).addCase(ce.fulfilled,(t,r)=>{if(!!r.payload&&Object.keys(r.payload.automaticFacetSet.set).length!==0)return r.payload.automaticFacetSet}).addCase(Fe,t=>{Object.values(t.set).forEach(({response:r})=>{r.values.forEach(a=>a.state="idle")})})});function wD(e){return{field:e,values:[],moreValuesAvailable:!1,label:"",indexScore:0}}function ID(e){return{value:e,state:"selected",numberOfResults:0}}function xA(e,t){let{dispatch:r}=e,a=M(e),{field:n}=t;return{...a,toggleSelect(o){r(Ma({field:n,selection:o})),r(I({legacy:yl(n,o),next:Cl(n,o)}))},deselectAll(){r(Wl(n)),r(I({legacy:Ne(n),next:Xe(n)}))},get state(){var s,c;let o=(c=(s=e.state.automaticFacetSet)==null?void 0:s.set[n])==null?void 0:c.response;return o?{field:o.field,label:o.label,values:o.values}:{field:"",values:[],label:""}}}}function vA(e){return{desiredCount:e.desiredCount,numberOfValues:e.numberOfValues}}function ED(e,t){if(!kD(e))throw k;let{dispatch:r}=e,a=vA(t.options);return r(zl(a)),{...M(e),get state(){var i,s;return{automaticFacets:(s=(i=e.state.search.response.generateAutomaticFacets)==null?void 0:i.facets.map(c=>xA(e,{field:c.field})))!=null?s:[]}}}}function kD(e){return e.addReducers({automaticFacetSet:CA,configuration:$,search:J}),!0}function _m(e,t){var r,a;return(a=(r=e.generatedAnswer)==null?void 0:r.citations)==null?void 0:a.find(n=>n.id===t)}function kt(e){var t,r,a;return(a=(r=(t=e.search)==null?void 0:t.response)==null?void 0:r.extendedResults)==null?void 0:a.generativeQuestionAnsweringId}var OD=()=>E("analytics/generatedAnswer/retry",e=>e.makeRetryGeneratedAnswer()),qD=e=>E("analytics/generatedAnswer/rephrase",(t,r)=>{let a=kt(r);return a?t.makeRephraseGeneratedAnswer({generativeQuestionAnsweringId:a,rephraseFormat:e.answerStyle}):null}),TD=e=>E("analytics/generatedAnswer/openAnswerSource",(t,r)=>{let a=kt(r),n=_m(r,e);return!a||!n?null:t.makeOpenGeneratedAnswerSource({generativeQuestionAnsweringId:a,permanentId:n.permanentid,citationId:n.id})}),DD=(e,t)=>E("analytics/generatedAnswer/hoverCitation",(r,a)=>{let n=kt(a),o=_m(a,e);return!n||!o?null:r.makeGeneratedAnswerSourceHover({generativeQuestionAnsweringId:n,permanentId:o.permanentid,citationId:o.id,citationHoverTimeMs:t})}),VD=()=>E("analytics/generatedAnswer/like",(e,t)=>{let r=kt(t);return r?e.makeLikeGeneratedAnswer({generativeQuestionAnsweringId:r}):null}),MD=()=>E("analytics/generatedAnswer/dislike",(e,t)=>{let r=kt(t);return r?e.makeDislikeGeneratedAnswer({generativeQuestionAnsweringId:r}):null}),LD=e=>E("analytics/generatedAnswer/sendFeedback",(t,r)=>{let a=kt(r);return a?t.makeGeneratedAnswerFeedbackSubmit({generativeQuestionAnsweringId:a,reason:e}):null}),ND=e=>E("analytics/generatedAnswer/sendFeedback",(t,r)=>{let a=kt(r);return a?t.makeGeneratedAnswerFeedbackSubmit({generativeQuestionAnsweringId:a,reason:"other",details:e}):null}),$m=e=>E("analytics/generatedAnswer/streamEnd",(t,r)=>{let a=kt(r);return a?t.makeGeneratedAnswerStreamEnd({generativeQuestionAnsweringId:a,answerGenerated:e}):null}),QD=()=>E("analytics/generatedAnswer/show",(e,t)=>{let r=kt(t);return r?e.makeGeneratedAnswerShowAnswers({generativeQuestionAnsweringId:r}):null}),BD=()=>E("analytics/generatedAnswer/hide",(e,t)=>{let r=kt(t);return r?e.makeGeneratedAnswerHideAnswers({generativeQuestionAnsweringId:r}):null}),jD=()=>E("analytics/generatedAnswer/copy",(e,t)=>{let r=kt(t);return r?e.makeGeneratedAnswerCopyToClipboard({generativeQuestionAnsweringId:r}):null}),Bi={logCopyGeneratedAnswer:jD,logGeneratedAnswerHideAnswers:BD,logGeneratedAnswerShowAnswers:QD,logGeneratedAnswerStreamEnd:$m,logGeneratedAnswerDetailedFeedback:ND,logGeneratedAnswerFeedback:LD,logDislikeGeneratedAnswer:MD,logLikeGeneratedAnswer:VD,logHoverCitation:DD,logOpenGeneratedAnswerSource:TD,logRetryGeneratedAnswer:OD,logRephraseGeneratedAnswer:qD};var AA=async e=>{var t;return{accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.platformUrl,streamId:(t=e.search.extendedResults)==null?void 0:t.generativeQuestionAnsweringId}};var bA=["default","bullet","step","concise"];var ac=new w({required:!0}),FA=new w,Hm=new K({required:!0}),UD={id:ac,title:ac,uri:ac,permanentid:ac,clickUri:FA},ji=C("generatedAnswer/setIsVisible",e=>A(e,Hm)),Gm=C("generatedAnswer/updateMessage",e=>A(e,{textDelta:ac})),zm=C("generatedAnswer/updateCitations",e=>A(e,{citations:new X({required:!0,each:new q({values:UD})})})),Wm=C("generatedAnswer/updateError",e=>A(e,{message:FA,code:new D({min:0})})),Mn=C("generatedAnswer/resetAnswer"),Ld=C("generatedAnswer/like"),Nd=C("generatedAnswer/dislike"),Qd=C("generatedAnswer/feedbackModal/open"),Bd=C("generatedAnswer/setId",e=>A(e,{id:new w({required:!0})})),jd=C("generatedAnswer/feedbackModal/close"),nc=C("generatedAnswer/sendFeedback"),oc=C("generatedAnswer/setIsLoading",e=>A(e,Hm)),Ud=C("generatedAnswer/setIsStreaming",e=>A(e,Hm)),ic=C("generatedAnswer/updateResponseFormat",e=>A(e,{answerStyle:new w({required:!0,constrainTo:bA})})),_d=C("generatedAnswer/registerFieldsToIncludeInCitations",e=>A(e,Pc)),RA=W("generatedAnswer/streamAnswer",async(e,t)=>{var l;let r=t.getState(),{dispatch:a,extra:n}=t,{setAbortControllerRef:o}=e,i=await AA(r),s=(d,p)=>{switch(d){case"genqa.messageType":a(Gm(JSON.parse(p)));break;case"genqa.citationsType":a(zm(JSON.parse(p)));break;case"genqa.endOfStreamType":a(Ud(!1)),a($m(JSON.parse(p).answerGenerated));break;default:r.debug&&n.logger.warn(`Unknown payloadType: "${d}"`)}};a(oc(!0));let c=d=>d.streamId===t.getState().search.extendedResults.generativeQuestionAnsweringId,u=(l=n.streamingClient)==null?void 0:l.streamGeneratedAnswer(i,{write:d=>{c(i)&&(a(oc(!1)),d.payload&&d.payloadType&&s(d.payloadType,d.payload))},abort:d=>{c(i)&&a(Wm(d))},close:()=>{c(i)&&a(Ud(!1))},resetAnswer:()=>{c(i)&&a(Mn())}});u?o(u):a(oc(!1))});var $d=T(Yn(),e=>e.addCase(ji,(t,{payload:r})=>{t.isVisible=r}).addCase(Bd,(t,{payload:r})=>{t.id=r.id}).addCase(Gm,(t,{payload:r})=>{t.isLoading=!1,t.isStreaming=!0,t.answer||(t.answer=""),t.answer+=r.textDelta,delete t.error}).addCase(zm,(t,{payload:r})=>{t.isLoading=!1,t.isStreaming=!0,t.citations=t.citations.concat(r.citations),delete t.error}).addCase(Wm,(t,{payload:r})=>{t.isLoading=!1,t.isStreaming=!1,t.error={...r,isRetryable:r.code===uf},t.citations=[],delete t.answer}).addCase(Ld,t=>{t.liked=!0,t.disliked=!1}).addCase(Nd,t=>{t.liked=!1,t.disliked=!0}).addCase(Qd,t=>{t.feedbackModalOpen=!0}).addCase(jd,t=>{t.feedbackModalOpen=!1}).addCase(nc,t=>{t.feedbackSubmitted=!0}).addCase(Mn,t=>({...Yn(),responseFormat:t.responseFormat,fieldsToIncludeInCitations:t.fieldsToIncludeInCitations,isVisible:t.isVisible,id:t.id})).addCase(oc,(t,{payload:r})=>{t.isLoading=r}).addCase(Ud,(t,{payload:r})=>{t.isStreaming=r}).addCase(ic,(t,{payload:r})=>{t.responseFormat=r}).addCase(_d,(t,r)=>{t.fieldsToIncludeInCitations=[...new Set(t.fieldsToIncludeInCitations.concat(r.payload))]}));var yt={engines:{},setAbortControllerRef:(e,t)=>{yt.engines[t].abortController=e},getIsStreamInProgress:e=>{var t;return!yt.engines[e].abortController||((t=yt.engines[e].abortController)==null?void 0:t.signal.aborted)?(yt.engines[e].abortController=void 0,!1):!0},subscribeToSearchRequests:e=>{let t=()=>{var s;let r=e.state,a=r.search.requestId,n=r.search.extendedResults.generativeQuestionAnsweringId,o=r.generatedAnswer.id;yt.engines[o].lastRequestId!==a&&(yt.engines[o].lastRequestId=a,(s=yt.engines[o].abortController)==null||s.abort(),e.dispatch(Mn())),!yt.getIsStreamInProgress(o)&&n&&n!==yt.engines[o].lastStreamId&&(yt.engines[o].lastStreamId=n,e.dispatch(RA({setAbortControllerRef:c=>yt.setAbortControllerRef(c,o)})))};return e.subscribe(t)}};function PA(e,t,r={}){var u,l;if(!_D(e))throw k;let{dispatch:a}=e,n=M(e),o=()=>e.state;if(!e.state.generatedAnswer.id){let d=la("genQA-",12);a(Bd({id:d})),yt.engines[d]={abortController:void 0,lastRequestId:"",lastStreamId:""}}let i=(u=r.initialState)==null?void 0:u.isVisible;i!==void 0&&a(ji(i));let s=(l=r.initialState)==null?void 0:l.responseFormat;s&&a(ic(s));let c=r.fieldsToIncludeInCitations;return c&&a(_d(c)),yt.subscribeToSearchRequests(e),{...n,get state(){return o().generatedAnswer},like(){this.state.liked||(a(Ld()),a(t.logLikeGeneratedAnswer()))},dislike(){this.state.disliked||(a(Nd()),a(t.logDislikeGeneratedAnswer()))},openFeedbackModal(){a(Qd())},closeFeedbackModal(){a(jd())},sendFeedback(d){a(t.logGeneratedAnswerFeedback(d)),a(nc())},sendDetailedFeedback(d){a(t.logGeneratedAnswerDetailedFeedback(d)),a(nc())},logCitationClick(d){a(t.logOpenGeneratedAnswerSource(d))},logCitationHover(d,p){a(t.logHoverCitation(d,p))},rephrase(d){a(ic(d))},show(){this.state.isVisible||(a(ji(!0)),a(t.logGeneratedAnswerShowAnswers()))},hide(){this.state.isVisible&&(a(ji(!1)),a(t.logGeneratedAnswerHideAnswers()))},logCopyToClipboard(){a(t.logCopyGeneratedAnswer())},retry(){}}}function _D(e){return e.addReducers({generatedAnswer:$d}),!0}function $D(e,t={}){let{dispatch:r}=e,a=PA(e,Bi,t);return{...a,get state(){return a.state},retry(){r(I({legacy:Bi.logRetryGeneratedAnswer()}))},rephrase(n){a.rephrase(n),r(I({legacy:Bi.logRephraseGeneratedAnswer(n)}))}}}function wA(e,t,r){let a=!1,n=()=>{a||(a=!0,e.dispatch(t.logOpenGeneratedAnswerSource(r.options.citation.id)))};return dt(e,r,()=>{n()})}function HD(e,t){return wA(e,Bi,t)}var Ha=()=>new w({required:!1,emptyAllowed:!0}),Hd=C("advancedSearchQueries/update",e=>A(e,{aq:Ha(),cq:Ha(),lq:Ha(),dq:Ha()})),Gd=C("advancedSearchQueries/register",e=>A(e,{aq:Ha(),cq:Ha(),lq:Ha(),dq:Ha()}));var IA=T(st(),e=>{e.addCase(Hd,(t,r)=>{let{aq:a,cq:n,lq:o,dq:i}=r.payload;Ee(a)||(t.aq=a,t.aqWasSet=!0),Ee(n)||(t.cq=n,t.cqWasSet=!0),Ee(o)||(t.lq=o,t.lqWasSet=!0),Ee(i)||(t.dq=i,t.dqWasSet=!0)}).addCase(Gd,(t,r)=>{let{aq:a,cq:n,lq:o,dq:i}=r.payload;Ee(a)||(t.defaultFilters.aq=a,t.aqWasSet||(t.aq=a)),Ee(n)||(t.defaultFilters.cq=n,t.cqWasSet||(t.cq=n)),Ee(o)||(t.defaultFilters.lq=o,t.lqWasSet||(t.lq=o)),Ee(i)||(t.defaultFilters.dq=i,t.dqWasSet||(t.dq=i))}).addCase(ce.fulfilled,(t,r)=>{var a,n;return(n=(a=r.payload)==null?void 0:a.advancedSearchQueries)!=null?n:t}).addCase(ue,(t,r)=>{let{aq:a,cq:n}=r.payload;Ee(a)||(t.aq=a,t.aqWasSet=!0),Ee(n)||(t.cq=n,t.cqWasSet=!0)})});function uhe(e){return e.addReducers({advancedSearchQueries:IA}),{updateAdvancedSearchQueries:Hd,registerAdvancedSearchQueries:Gd}}function xhe(e){return e.addReducers({categoryFacetSet:fr}),{deselectAllCategoryFacetValues:pr,registerCategoryFacet:dr,toggleSelectCategoryFacetValue:ka,updateCategoryFacetNumberOfValues:Cn,updateCategoryFacetSortCriterion:$o,updateFacetAutoSelection:bt,updateCategoryFacetBasePath:Yu}}function qhe(e){return e.addReducers({facetSet:Or}),{deselectAllFacetValues:Ae,registerFacet:Ar,toggleSelectFacetValue:br,toggleExcludeFacetValue:Fr,updateFacetIsFieldExpanded:Rn,updateFacetNumberOfValues:Fn,updateFacetSortCriterion:Jo,updateFreezeCurrentValues:Kr,updateFacetAutoSelection:bt}}function jhe(e){return e.addReducers({configuration:$}),{disableAnalytics:so,enableAnalytics:co,setOriginLevel2:vu,setOriginLevel3:Au,updateAnalyticsConfiguration:Ca,updateBasicConfiguration:ir}}function Whe(e){return e.addReducers({configuration:$,pipeline:fo,searchHub:go}),{updateSearchConfiguration:At}}function Zhe(e){return e.addReducers({context:_u}),{addContext:Sn,removeContext:yn,setContext:hn}}function nSe(e){return e.addReducers({dictionaryFieldContext:Hu}),{addContext:No,removeContext:Qo,setContext:Lo}}function cSe(e){return e.addReducers({debug:lo}),{disableDebug:uo,enableDebug:xa}}function hSe(e){return e.addReducers({dateFacetSet:qr}),{deselectAllDateFacetValues:il,registerDateFacet:Rr,toggleSelectDateFacetValue:Pr,toggleExcludeDateFacetValue:wr,updateDateFacetSortCriterion:ol,updateDateFacetValues:Jr}}function bSe(e){return e.addReducers({facetOptions:Qe}),{updateFacetOptions:ie,enableFacet:Ke,disableFacet:ve}}function ISe(e){return e.addReducers({didYouMean:Gu,query:It}),{applyDidYouMeanCorrection:Rt,disableDidYouMean:ku,enableDidYouMean:Po,enableAutomaticQueryCorrection:Ou,disableAutomaticQueryCorrection:wo,setCorrectionMode:Io}}function qSe(e){return e.addReducers({fields:Ea}),{registerFieldsToInclude:Pa,enableFetchAllFields:Vo,disableFetchAllFields:gn,fetchFieldsDescription:Mo}}function LSe(e){return e.addReducers({history:Gl,facetOrder:jl}),{back:ks,forward:Fu}}function HSe(e){return e.addReducers({numericFacetSet:Pt}),{deselectAllNumericFacetValues:ul,registerNumericFacet:Ir,toggleSelectNumericFacetValue:Er,toggleExcludeNumericFacetValue:kr,updateNumericFacetSortCriterion:cl,updateNumericFacetValues:Xr}}function XSe(e){return e.addReducers({folding:kd}),{registerFolding:wa,loadCollection:Ia}}function rye(e){return e.addReducers({pagination:Dr}),{nextPage:vo,previousPage:Ao,registerNumberOfResults:yo,registerPage:xo,updateNumberOfResults:Co,updatePage:Ft}}function iye(e){return e.addReducers({pipeline:fo}),{setPipeline:po}}function dye(e){return e.addReducers({query:It}),{updateQuery:Ye}}function Sye(e){return e.addReducers({querySet:fi}),{registerQuerySetQuery:pi,updateQuerySetQuery:qn}}function Pye(e){return e.addReducers({instantResults:nd}),{registerInstantResults:ho,updateInstantResultsQuery:sr,clearExpiredResults:So}}function Lye(e){return e.addReducers({querySuggest:mi,querySet:fi}),{clearQuerySuggest:Na,fetchQuerySuggestions:Qa,registerQuerySuggest:di,selectQuerySuggestion:Vr}}function Uye(e){return e.addReducers({search:J}),{executeSearch:ko,fetchMoreResults:qo,fetchFacetValues:Nu,fetchPage:Oo,fetchInstantResults:SC}}function Gye(e){return e.addReducers({searchHub:go}),{setSearchHub:mo}}function Kye(e){return e.addReducers({sortCriteria:sd}),{registerSortCriterion:hi,updateSortCriterion:Si}}function iCe(e){return e.addReducers({standaloneSearchBoxSet:Ad}),{registerStandaloneSearchBox:xi,fetchRedirectUrl:Ua,updateAnalyticsToSearchFromLink:Ai,updateAnalyticsToOmniboxFromLink:bi,resetStandaloneSearchBox:vi}}function pCe(e){return e.addReducers({staticFilterSet:fd}),{registerStaticFilter:yi,toggleSelectStaticFilterValue:Zr,toggleExcludeStaticFilterValue:ea,deselectAllStaticFilterValues:ja}}function SCe(e){return e.addReducers({tabSet:hd}),{registerTab:Do,updateActiveTab:jt}}function vCe(e){return e.addReducers({questionAnswering:Mr}),{collapseSmartSnippet:qi,expandSmartSnippet:Oi,dislikeSmartSnippet:Di,likeSmartSnippet:Ti,openFeedbackModal:Vi,closeFeedbackModal:$a,expandSmartSnippetRelatedQuestion:Mi,collapseSmartSnippetRelatedQuestion:Li}}function FCe(e){return e.addReducers({}),{deselectAllBreadcrumbs:Fe,deselectAllNonBreadcrumbs:va}}function ECe(e){return e.addReducers({recentQueries:Vd}),{registerRecentQueries:Ni,clearRecentQueries:Qi}}function DCe(e){return e.addReducers({recentResults:Md}),{registerRecentResults:ui,clearRecentResults:li,pushRecentResult:wt}}var zd=C("excerptLength/set",e=>A(e,new D({min:0,required:!0})));var EA=T(Hc(),e=>{e.addCase(zd,(t,r)=>{t.length=r.payload})});function GCe(e){return e.addReducers({excerptLength:EA}),{setExcerptLength:zd}}function txe(e){return e.addReducers({resultPreview:Id}),{fetchResultContent:Dn,updateContentURL:Ei,nextPreview:Pi,previousPreview:wi,preparePreviewPagination:Ii}}function oxe(e){return e.addReducers({generatedAnswer:$d}),{resetAnswer:Mn}}var GD=new Y({content:new me({required:!0}),conditions:new me({required:!0}),priority:new D({required:!1,default:0,min:0}),fields:new X({required:!1,each:O})});function zD(e){if(!WD(e))throw k;let t=[],r=a=>{a.forEach(n=>{if(GD.validate(n),!n.conditions.every(i=>i instanceof Function))throw new Ya("Each result template conditions should be a function that takes a result as an argument and returns a boolean")})};return{registerTemplates(...a){let n=[];r(a),a.forEach(o=>{let i={...o,priority:o.priority||0,fields:o.fields||[]};t.push(i),n.push(...i.fields)}),t.sort((o,i)=>i.priority-o.priority),n.length&&e.dispatch(Pa(n))},selectTemplate(a){let n=t.find(o=>o.conditions.every(i=>i(a)));return n?n.content:null}}}function WD(e){return e.addReducers({fields:Ea}),!0}function $xe(e){return e.addReducers({}),{logClearBreadcrumbs:yd,logInterfaceLoad:yu,logSearchFromLink:Cu,logOmniboxFromLink:xu,logInterfaceChange:ya,logDidYouMeanClick:qu,logCategoryFacetBreadcrumb:Sd,logFacetBreadcrumb:Yo,logFacetClearAll:Ne,logFacetUnexclude:Wr,logFacetExclude:St,logFacetDeselect:Ut,logFacetSelect:Pe,logFacetShowLess:Wo,logFacetShowMore:zo,logFacetUpdateSort:gr,logDateFacetBreadcrumb:Ys,logNumericFacetBreadcrumb:Ks,logNavigateBackward:_l,logNavigateForward:Ul,logPageNext:Kl,logPageNumber:si,logPagePrevious:Jl,logPagerResize:ii,logSearchboxSubmit:Ba,logQuerySuggestionClick:td,logResultsSort:gi,logDislikeSmartSnippet:Vm,logLikeSmartSnippet:Dm,logOpenSmartSnippetFeedbackModal:Lm,logCloseSmartSnippetFeedbackModal:Nm,logSmartSnippetFeedback:Qm,logSmartSnippetDetailedFeedback:Bm,logExpandSmartSnippet:qm,logCollapseSmartSnippet:Tm,logExpandSmartSnippetSuggestion:jm,logCollapseSmartSnippetSuggestion:Um,logNoResultsBack:$l,logStaticFilterSelect:ld,logStaticFilterDeselect:Ci,logStaticFilterClearAll:dd,logTriggerQuery:Tu,logUndoTriggerQuery:Du,logNotifyTrigger:Vu,logTriggerRedirect:Mu,logTriggerExecute:Lu}}function Wxe(e){return e.addReducers({}),{logDocumentOpen:Zl,logOpenSmartSnippetSource:Mm,logOpenSmartSnippetSuggestionSource:rc,logOpenSmartSnippetInlineLink:tc,logOpenSmartSnippetSuggestionInlineLink:qd}}function eve(e){return e.addReducers({}),{logSearchEvent:_y,logClickEvent:$y,logCustomEvent:Hy}}var kA=W("analytics/addPageViewEntry",async(e,{getState:t})=>{t().configuration.analytics.enabled&&vt.addElement({name:"PageView",value:e,time:JSON.stringify(new Date)})});function ive(e){return e.addReducers({}),{addPageViewEntryInActionsHistory:kA}}function YD(e){let{by:t,order:r}=e;switch(t){case Zt.Relevancy:return Cs();case Zt.QRE:return af();case Zt.NoSort:return nf();case Zt.Date:if(!r)throw new Error('An order (i.e., ascending or descending) should be specified for a sort criterion sorted by "date"');return tf(r);default:if(!r)throw new Error(`An order (i.e., ascending or descending) should be specified for a sort criterion sorted by a field, such as "${t}"`);return rf(t,r)}}function KD(e){return e===void 0||e===ma.Ascending||e===ma.Descending}function JD(e){let t=e.split(","),r=new Error(`Wrong criterion expression format for "${e}"`);if(!t.length)throw r;return t.map(a=>{let n=a.trim().split(" "),o=n[0].toLowerCase(),i=n[1]&&n[1].toLowerCase();if(n.length>2||o==="")throw r;if(!KD(i))throw new Error(`Wrong criterion sort order "${i}" in expression "${e}". Order should either be "${ma.Ascending}" or "${ma.Descending}"`);return YD({by:o,order:i})})}function Be(e){return e.negate?"NOT ":""}function Ot(e){return{contains:"=",differentThan:"<>",fuzzyMatch:"~=",greaterThan:">",greaterThanOrEqual:">=",isExactly:"==",lowerThan:"<",lowerThanOrEqual:"<=",phoneticMatch:"%=",regexMatch:"/=",wildcardMatch:"*="}[e]}function OA(e){return{toQuerySyntax(){let{field:t,value:r}=e,a=Ot(e.operator);return`${Be(e)}@${t}${a}${r}`}}}function qA(e){return{toQuerySyntax(){let t=Be(e),{field:r,from:a,to:n}=e,o=Ot("isExactly");return`${t}@${r}${o}${a}..${n}`}}}function TA(e){return{toQuerySyntax(){let t=Be(e),{expression:r}=e;return`${t}"${r}"`}}}function DA(e){return{toQuerySyntax(){let t=Be(e),{field:r}=e;return`${t}@${r}`}}}function VA(e){return{toQuerySyntax(){let{expression:t,negate:r}=e;return r?`NOT (${t})`:t}}}function MA(e){return{toQuerySyntax(){let t=Be(e),{startTerm:r,otherTerms:a}=e,n=XD(a),o=`${r} ${n}`;return e.negate?`${t}(${o})`:o}}}function XD(e){return e.map(t=>{let{endTerm:r,maxKeywordsBetween:a}=t;return`near:${a} ${r}`}).join(" ")}function LA(e){return{toQuerySyntax(){let{field:t,value:r}=e,a=Be(e),n=Ot(e.operator);return`${a}@${t}${n}${r}`}}}function NA(e){return{toQuerySyntax(){let t=Be(e),{field:r,from:a,to:n}=e,o=Ot("isExactly");return`${t}@${r}${o}${a}..${n}`}}}function QA(e){return{toQuerySyntax(){let{name:t,parameters:r}=e,a=ZD(r);return`$${t}(${a})`}}}function ZD(e){return Object.entries(e).map(t=>{let[r,a]=t,n=typeof a=="string"?a:a.toQuerySyntax();return`${r}: ${n}`}).join(", ")}function BA(e){return{toQuerySyntax(){let t=Be(e),{field:r,operator:a,value:n}=e,o=Ot(a),i=a==="fuzzyMatch"?` $quoteVar(value: ${n})`:`("${n}")`;return`${t}@${r}${o}${i}`}}}function jA(e){return{toQuerySyntax(){let{field:t}=e,r=Be(e),a=Ot(e.operator),n=e.values.map(i=>`"${i}"`),o=n.length===1?n[0]:`(${n.join(",")})`;return`${r}@${t}${a}${o}`}}}function vAe(){let e=[],t="and";return{addExpression(r){return e.push(r),this},addKeyword(r){return e.push(VA(r)),this},addNear(r){return e.push(MA(r)),this},addExactMatch(r){return e.push(TA(r)),this},addFieldExists(r){return e.push(DA(r)),this},addStringField(r){return e.push(jA(r)),this},addStringFacetField(r){return e.push(BA(r)),this},addNumericField(r){return e.push(LA(r)),this},addNumericRangeField(r){return e.push(NA(r)),this},addDateField(r){return e.push(OA(r)),this},addDateRangeField(r){return e.push(qA(r)),this},addQueryExtension(r){return e.push(QA(r)),this},joinUsing(r){return t=r,this},toQuerySyntax(){let r=eV(t),a=e.map(n=>n.toQuerySyntax()).join(`) ${r} (`);return e.length<=1?a:`(${a})`}}}function eV(e){return e==="and"?"AND":"OR"}var IAe={buildMockRaw:As,buildMockSearchAppEngine:ES,buildMockResult:OS,createMockState:tu};Jm();export{Os as API_DATE_FORMAT,CS as DefaultFieldsToInclude,XR as EcommerceDefaultFieldsToInclude,qS as HighlightUtils,ef as MinimumFieldsToInclude,rE as ResultTemplatesHelpers,Zt as SortBy,ma as SortOrder,IAe as TestUtils,un as VERSION,Yp as analyticsUrl,rr as baseFacetResponseSelector,ED as buildAutomaticFacetGenerator,Nq as buildBreadcrumbManager,pk as buildCategoryFacet,RD as buildCategoryFieldSuggestions,NE as buildContext,M as buildController,Hr as buildCriterionExpression,qk as buildDateFacet,Hk as buildDateFilter,Pn as buildDateRange,tf as buildDateSortCriterion,QE as buildDictionaryFieldContext,UE as buildDidYouMean,YT as buildExecuteTrigger,Pk as buildFacet,vD as buildFacetConditionsManager,Vq as buildFacetManager,rf as buildFieldSortCriterion,bD as buildFieldSuggestions,$T as buildFoldedResultList,$D as buildGeneratedAnswer,DO as buildHistoryManager,xq as buildInstantResults,HD as buildInteractiveCitation,cq as buildInteractiveInstantResult,xD as buildInteractiveRecentResult,sq as buildInteractiveResult,nf as buildNoSortCriterion,JT as buildNotifyTrigger,Lk as buildNumericFacet,jk as buildNumericFilter,Hs as buildNumericRange,KO as buildPager,XO as buildQueryError,vAe as buildQueryExpression,af as buildQueryRankingExpressionSortCriterion,tq as buildQuerySummary,zT as buildQueryTrigger,DT as buildQuickview,pD as buildRecentQueriesList,yD as buildRecentResultsList,HT as buildRedirectionTrigger,EE as buildRelevanceInspector,Cs as buildRelevanceSortCriterion,nq as buildResultList,zD as buildResultTemplatesManager,dq as buildResultsPerPage,Cm as buildSearchBox,vE as buildSearchEngine,Fm as buildSearchParameterManager,Rd as buildSearchParameterSerializer,qT as buildSearchStatus,rD as buildSmartSnippet,oD as buildSmartSnippetQuestionsList,Rq as buildSort,Uq as buildStandaloneSearchBox,wq as buildStaticFilter,kv as buildStaticFilterValue,Tq as buildTab,ET as buildUrlManager,C as createAction,W as createAsyncThunk,T as createReducer,La as currentPageSelector,mm as currentPagesSelector,EI as deserializeRelativeDate,bf as facetRequestSelector,Tw as facetResponseSelectedValuesSelector,Is as facetResponseSelector,gs as getOrganizationEndpoints,_C as getSampleSearchEngineConfiguration,uhe as loadAdvancedSearchQueryActions,FCe as loadBreadcrumbActions,xhe as loadCategoryFacetSetActions,Wxe as loadClickAnalyticsActions,jhe as loadConfigurationActions,Zhe as loadContextActions,hSe as loadDateFacetSetActions,cSe as loadDebugActions,nSe as loadDictionaryFieldContextActions,ISe as loadDidYouMeanActions,GCe as loadExcerptLengthActions,bSe as loadFacetOptionsActions,qhe as loadFacetSetActions,qSe as loadFieldActions,XSe as loadFoldingActions,oxe as loadGeneratedAnswerActions,eve as loadGenericAnalyticsActions,LSe as loadHistoryActions,ive as loadIPXActionsHistoryActions,Pye as loadInstantResultsActions,HSe as loadNumericFacetSetActions,rye as loadPaginationActions,iye as loadPipelineActions,dye as loadQueryActions,Sye as loadQuerySetActions,Lye as loadQuerySuggestActions,vCe as loadQuestionAnsweringActions,ECe as loadRecentQueriesActions,DCe as loadRecentResultsActions,txe as loadResultPreviewActions,Uye as loadSearchActions,$xe as loadSearchAnalyticsActions,Whe as loadSearchConfigurationActions,Gye as loadSearchHubActions,Kye as loadSortCriteriaActions,iCe as loadStandaloneSearchBoxSetActions,pCe as loadStaticFilterSetActions,SCe as loadTabSetActions,Yl as maxPageSelector,JD as parseCriterionExpression,Tc as platformUrl,dn as validateRelativeDate};
/**
 * @license
 *
 * Copyright 2024 Coveo Solutions Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *       http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
